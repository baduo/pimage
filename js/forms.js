(function(a){a.fn.forms=function(b){return this.each(function(){var d=a(this),c=d.data("forms")||{errorCl:"error",emptyCl:"empty",invalidCl:"invalid",notRequiredCl:"notRequired",successCl:"success",successShow:"4000",mailHandlerURL:"bat/MailHandler.php",ownerEmail:"support@guardlex.com",stripHTML:true,smtpMailServer:"localhost",targets:"input,textarea",controls:"a[data-type=reset],a[data-type=submit]",validate:true,rx:{".name":{rx:/^[a-zA-Z'][a-zA-Z-' ]+[a-zA-Z']?$/,target:"input"},".state":{rx:/^[a-zA-Z'][a-zA-Z-' ]+[a-zA-Z']?$/,target:"input"},".email":{rx:/^(("[\w-\s]+")|([\w-]+(?:\.[\w-]+)*)|("[\w-\s]+")([\w-]+(?:\.[\w-]+)*))(@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$)|(@\[?((25[0-5]\.|2[0-4][0-9]\.|1[0-9]{2}\.|[0-9]{1,2}\.))((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){2}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\]?$)/i,target:"input"},".phone":{rx:/^\+?(\d[\d\-\+\(\) ]{5,}\d$)/,target:"input"},".fax":{rx:/^\+?(\d[\d\-\+\(\) ]{5,}\d$)/,target:"input"},".message":{rx:/.{20}/,target:"textarea"}},preFu:function(){c.labels.each(function(){var e=a(this),g=a(c.targets,this),h=g.val(),f=(function(){var i=g.is("input")?(i=e.html().match(/value=['"](.+?)['"].+/),!!i&&!!i[1]&&i[1]):g.html();return h==""?h:i;})();f!=h&&g.val(h=f||h);e.data({defVal:h});g.bind("focus",function(){g.val()==h&&(g.val(""),c.hideEmptyFu(e),e.removeClass(c.invalidCl));}).bind("blur",function(){c.validateFu(e);if(c.isEmpty(e)){g.val(h),c.hideErrorFu(e.removeClass(c.invalidCl));}}).bind("keyup",function(){e.hasClass(c.invalidCl)&&c.validateFu(e);});e.find("."+c.errorCl+",."+c.emptyCl).css({display:"block"}).hide();});c.success=a("."+c.successCl,c.form).hide();},isRequired:function(e){return !e.hasClass(c.notRequiredCl);},isValid:function(f){var e=true;a.each(c.rx,function(g,h){if(f.is(g)){e=h.rx.test(f.find(h.target).val());}});return e;},isEmpty:function(f){var e;return(e=f.find(c.targets).val())==""||e==f.data("defVal");},validateFu:function(e){e.each(function(){var h=a(this),g=c.isRequired(h),i=c.isEmpty(h),f=c.isValid(h);if(i&&g){c.showEmptyFu(h.addClass(c.invalidCl));}else{c.hideEmptyFu(h.removeClass(c.invalidCl));}if(!i){if(f){c.hideErrorFu(h.removeClass(c.invalidCl));}else{c.showErrorFu(h.addClass(c.invalidCl));}}});},getValFromLabel:function(e){var g=a("input,textarea",e).val(),f=e.data("defVal");return e.length?g==f?"nope":g:"nope";},submitFu:function(){c.validateFu(c.labels);if(!c.form.has("."+c.invalidCl).length){a.ajax({type:"POST",url:c.mailHandlerURL,data:{name:c.getValFromLabel(a(".name",c.form)),email:c.getValFromLabel(a(".email",c.form)),phone:c.getValFromLabel(a(".phone",c.form)),fax:c.getValFromLabel(a(".fax",c.form)),state:c.getValFromLabel(a(".state",c.form)),message:c.getValFromLabel(a(".message",c.form)),owner_email:c.ownerEmail,stripHTML:c.stripHTML},success:function(){c.showFu();}});}},showFu:function(){c.success.slideDown(function(){setTimeout(function(){c.success.slideUp();c.form.trigger("reset");},c.successShow);});},controlsFu:function(){a(c.controls,c.form).each(function(){var e=a(this);e.bind("click",function(){c.form.trigger(e.data("type"));return false;});});},showErrorFu:function(e){e.find("."+c.errorCl).slideDown();},hideErrorFu:function(e){e.find("."+c.errorCl).slideUp();},showEmptyFu:function(e){e.find("."+c.emptyCl).slideDown();c.hideErrorFu(e);},hideEmptyFu:function(e){e.find("."+c.emptyCl).slideUp();},init:function(){c.form=c.me;c.labels=a("label",c.form);c.preFu();c.controlsFu();c.form.bind("submit",function(){if(c.validate){c.submitFu();}else{c.form[0].submit();}return false;}).bind("reset",function(){c.labels.removeClass(c.invalidCl);c.labels.each(function(){var e=a(this);c.hideErrorFu(e);c.hideEmptyFu(e);});});c.form.trigger("reset");}};c.me||c.init(c.me=d.data({forms:c}));typeof b=="object"&&a.extend(c,b);});};})(jQuery);$(window).load(function(){$("#pro_contact-form").forms({ownerEmail:"#"});$("#contact-form").forms({ownerEmail:"#"});});