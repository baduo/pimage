function $(a,b){if(!a){return;}return((typeof(b)=="object"?b:document).getElementById(a));}function $2D(a){return($(a).getContext("2d"));}function $S(a){return($(a).style);}function $SS(b){var a=document.styleSheets[0];if(a.cssRules){a=a.cssRules;}else{a=a.rules;}return(a[b].style);}function $T(a,b){return((typeof(b)=="object"?b:$(b)).getElementsByTagName(a));}function abPos(b){var b=(typeof(b)=="object"?b:$(b)),a={X:0,Y:0};while(b!=null){a.X+=b.offsetLeft;a.Y+=b.offsetTop;b=b.offsetParent;}return(a);}function agent(a){return(Math.max(navigator.userAgent.toLowerCase().indexOf(a),0));}var globalversion=1;function cookieStab(b,a){if(b=="windows"){a="VERSION_"+globalversion+":"+a;}document.cookie=b+"="+a+"; path=/";}function cookieGrab(k){var a=k+"=",m=document.cookie.split(";");for(var g=0;g<m.length;g++){var n=m[g];while(n.charAt(0)==" "){n=n.substring(1,n.length);}if(n.indexOf(a)==0){var l=n.substring(a.length,n.length);if(k=="windows"){var j=l.indexOf("VERSION_");if(j>-1){var h=l.substr(j,l.indexOf(":"));if(parseInt(h.split("_")[1])<globalversion){return;}}}return(n.substring(a.length,n.length));}}}function getTime(){return((new Date()).getTime());}function isset(a){return((typeof(a)=="undefined"||a.length==0)?a:"");}function noMove(){if(stop){stop=0;document.onmouseup=function(){document.onmouseup="";stop=1;};}return false;}function trim(a){return(a.replace(/^\s+|\s+$/g,""));}function ucletter(a){return(a.substr(0,1).toUpperCase());}function ucword(a){return(a.substr(0,1).toUpperCase()+a.substr(1));}function XYwin(a){var b=agent("msie")?{"X":document.body.clientWidth,"Y":document.body.clientHeight}:{"X":window.innerWidth,"Y":window.innerHeight};return(a?b[a]:b);}function XY(b,a){var c=agent("msie")?{"X":event.clientX+document.body.scrollLeft,"Y":event.clientY+document.body.scrollTop}:{"X":b.pageX,"Y":b.pageY};return(a?c[a]:c);}function zindex(a){a.style.zIndex=win.zindex++;}function $C(a,g){var g=(typeof(g)=="object"?g:$(g)).getElementsByTagName("*"),c=new RegExp("\\b"+a+"\\b"),f=[];for(var b=0;b<g.length;b++){if(c.test(g[b].className)){f.push(g[b]);}}return(f);}function C$(b,k){if(!$(b)){return false;}var j=$(b),l=j.className;if(k["+"]){j.className=l+" "+k["+"];}if(k["-"]){var a=k["-"].split(" "),g={};for(var f in a){g[a[f]]=1;}var l=l.split(" "),h="";for(var f in l){f=l[f];if(!g[f]){h+=f+" ";}}j.className=h;}}Event={"add":function(c,a,b){if(typeof(a)!="object"){a={el:a,e:a};}if(c.addEventListener){c.addEventListener(a.el,b,false);}else{if(c.attachEvent){a=a.e;c["e"+a+b]=b;c[a+b]=function(){c["e"+a+b](window.event);};c.attachEvent("on"+a,c[a+b]);}}},"rm":function(c,a,b){if(typeof(a)!="object"){a={el:a,e:a};}if(c.removeEventListener){c.removeEventListener(a.el,b,false);}else{if(c.detachEvent){a=a.e;c.detachEvent("on"+a,c[a+b]);c[a+b]=null;c["e"+a+b]=null;}}}};var aXY={},bXY={},oXY={},cXY={},mXY="",moXY={},mcXY={},stop=1;core={"X":function(g,c,f,b){f.X=Math.max(b.X1,b.X2?Math.min(b.X2,f.X+b.X1):f.X+b.X1);return(f);},"Y":function(g,c,f,b){f.Y=Math.max(b.Y1,b.Y2?Math.min(b.Y2,f.Y+b.Y1):f.Y+b.Y1);return(f);},"XY":function(g,c,f,b){f.X=b.X2?Math.min(f.X+b.X1,b.X2-b.X1):f.X+b.X1;f.Y=b.Y2?Math.min(f.Y+b.Y1,b.Y2-b.Y1):f.Y+b.Y1;return(f);},"fu":function(h,n,b,B){if(stop){var m=abPos($(h)).X,k=abPos($(h)).Y,a=XY(n);function s(f,c){a=XY(f);if(b){a=b.fu(h,c,{"X":a.X-m,"Y":a.Y-k},b);}return(a);}function l(f,c){s(f,c);if(B){B(oXY,a,c,f);}return(a);}function g(f,c){a=XY(f);return((c=="down"?"P":" ")+(a.X-m)+" "+(a.Y-k)+(c=="up"?"z":""));}if(isNaN(b.oX)){m=a.X-m;}else{m=m-b.oX-zero($S(h).left);}if(isNaN(b.oY)){k=a.Y-k;}else{k=k-b.oY-zero($S(h).top);}stop=0;oXY=s(n);cXY=l(n,mXY="down");core.time=getTime();var q="T"+vars.type+" rgba("+vars["fillCO"].join(",")+") rgba("+vars["strokeCO"].join(",")+")";var j="",z=[],u={};if((vars.type in gui_options.modules)&&("vars" in gui_options.modules[vars.type])){u=gui_options.modules[vars.type].vars;for(j in u){if(j in vars){z.push(j+"("+vars[j]+")");}}if(z.length){q+=" "+z.join(" ");}}document.onmousemove=function(c){if(typeof(c)=="undefined"){var c=event;}if(!stop){cXY=l(c,"move");}};document.onmouseup=function(c){if(typeof(c)=="undefined"){var c=event;}stop=1;document.onmousemove="";document.onmouseup="";cXY=l(c,mXY="up");};document.onselectstart=function(){return false;};}},"win":function(h,c,f,b){f.X=(!isNaN(b.X1)?Math.max(f.X,b.X1):f.X);f.Y=(!isNaN(b.Y1)?Math.max(f.Y,b.Y1):f.Y);var g=$S(h);if(c=="down"){if(b.z){zindex($(h));}core.win.stop=0;setTimeout("if(!core.win.stop) { core.win_visible('"+h+"','hidden'); }",500);}else{if(c=="move"){if(!core.win.stop){core.win_visible(h,"hidden");}core.win.stop=1;}}if(E.sh&&oXY){if(Math.abs(f.X-oXY.X)<Math.abs(f.Y-oXY.Y)){g.top=f.Y+"px";g.left=oXY.X+"px";}else{g.left=f.X+"px";g.top=oXY.Y+"px";}}else{g.left=f.X+"px";g.top=f.Y+"px";}if(c=="up"){if(win.r[h]){win.cp(h,["block",zero(g.left),zero(g.top),parseInt(win.r[h][3])]);}core.win.stop=1;core.win_visible(h,"visible");}return(f);},"win_visible":function(b,a){var c=(a=="visible")?1:0.5;if($C("TMM",b)[0]){$C("TMM",b)[0].style.opacity=c;}else{if($C("west",$C("TM",b)[0])[0]){$C("west",b)[0].style.opacity=c;$C("east",b)[0].style.opacity=c;}else{if($C("TRx",b)[0]){$C("TRx",b)[0].style.opacity=c;$C("TML",b)[0].style.opacity=c;}}}}};N={"format":function(g){g=String(g);var a=g.split("."),c=a[0],b=a.length>1?"."+a[1]:"",f=/(\d+)(\d{3})/;while(f.test(c)){c=c.replace(f,"$1"+","+"$2");}return(c+b);},"between":function(f,b,c){return((f>=b&&f<=c)?true:false);},"rand":function(a){return(Math.floor(Math.random()*a));}};function exp(b,f,h,c){if(h<=1){h*=100;}if(c=="low"){var g=Math.pow(2,h/15.019);}else{var g=-105.78*Math.pow(2,-1*h/15)+102;}return((g/100)*(f-b)+b-(0.01*f));}function zero(a){return(!isNaN(a=parseFloat(a))?a:0);}function deObject(f){var c=[];for(var a in f){if(typeof(f[a])=="object"){c[a]=[];for(var b in f[a]){if(!isNaN(f[a][b])){c[a][b]=Number(f[a][b]);}else{if(typeof(f[a][b])=="object"){c[a][b]=String(f[a][b]).split(",");}else{if(typeof(f[a][b])=="string"){c[a][b]=f[a][b];}}}}}else{c="";}}return(c?c:String(f).split(","));}function typeOf(a){var b=typeof(a);if(b==="object"){if(a){if(a instanceof Array){b="array";}}else{b="null";}}return(b);}marqueeID=false;mixin=function(f){var b=arguments.length;for(var c=1;c<b;c++){for(var a in arguments[c]){f[a]=arguments[c][a];}}return f;};var dtx2D=document.createElement("canvas");var ctx2D;try{ctx2D=dtx2D.getContext("2d");}catch(e){}var data2pattern=function(f,b){if(ctx2D==null){ctx2D=dtx2D.getContext("2d");}function a(h,j){var g=new Image();g.onload=function(){f[j]=ctx2D.createPattern(g,"repeat");};g.src=h;}for(var c in b){a(b[c],c);}};gui={"options":function(){var c=[],g=N.format;cF={"inner_radius_spirograph":{type:"X",val:[1,100,10]},"outer_radius_spirograph":{type:"X",val:[1,100,10]},"diameter_spirograph":{type:"X",val:[1,500,10]},"speed_spirograph":{type:"X",val:[2,250,10]},"resolution_spirograph":{type:"X",val:[1,1000,10]},"stroke_text":{type:"X",val:[0,20,2]},"fontSize":{type:"X",val:[16,256,64]},"kerning":{type:"X",val:[0,2,1,"float"]},"diameter_pencil":{type:"X",val:[1,15,10]},"opacity_fill":{type:"X",val:[1,100,100],fu:infc.opacity},"lineOpacity":{type:"X",val:[2,100,1]},"sides_shape":{type:"X",val:[2,100,1]},"slope_shape":{type:"X",val:[0.2,10,1,"float"]},"sides_marquee":{type:"X",val:[2,100,1]},"slope_marquee":{type:"X",val:[0.2,10,1,"float"]},"stampSize":{type:"X",val:[1,200,100]},"leading":{type:"X",val:[0,2,1,"float"]},"rand":{type:"X",val:{"_min":[0,100,50],"_max":[0,100,50]}},"fill":{type:"menu",val:["Color","Gradient","Pattern"]},"marquee":{type:"menu",val:["Ellipses","Polygon","Star","Burst","Gear"]},"spirograph":{type:"menu",val:["Hypotrochoid","Epitrochoid"]},"shape":{type:"menu",val:["Ellipses","Polygon","Star","Burst","Gear"]},"crop":{type:"menu",val:["Display ("+g(screen.width)+"x"+g(screen.height)+")","Original ("+g(canvas.W)+"x"+g(canvas.H)+")","2x3","3x5","4x3 (DVD)","4x3 (Book)","4x6 (Postcard)","5x7 (L, 2L)","8x10","16x9 (HD)","16x20","20x30 (Poster)","Square"]},"draw":{type:"menu",val:["Pencil","Brush","Calligraphy"]},"lineClose":{type:"check",val:["lineClose","true","false"]},"constrain":{type:"check",val:["constrain","true","false"]},"Premultiply":{type:"check",val:["constrain","true","false"]},"preview":{type:"check",val:["preview","true","false"]},"marqType":{type:"radio",val:["marquee","lasso","ellipses","rectangle","star","burst","gear"]},"aspect":{type:"radio",val:["aspect","landscape","portrait"]},"lineCap":{type:"radio",val:["lineCap","butt","round","square"]},"corner":{type:"radio",val:["lineJoin","round","miter","bevel"]}};c=["marquee","text","line","ellipses","polygon","star","burst","gear","brush","calligraphy","pencil","stamp","fill","eraser"];for(var b in c){cF["movement_"+c[b]]={type:"radio",val:["movement_"+c[b],"anchored","freedraw","active"]};}function f(k,h){for(var j in k){cF[h+"_"+k[j]]={type:"X",val:[1,100,100]};}}f(["ellipses","polygon","star","burst","gear","line"],"stroke");f(["brush","calligraphy","eraser","pencil","stamp"],"opacity");f(["brush","calligraphy","eraser"],"diameter");f(["brush","calligraphy","eraser","stamp"],"flow");f(["brush","eraser"],"hardness");var a=0,c=[];for(var b in stamp.r){c[a++]=b;}cF.stamp={type:"menu",val:c};if(!gui.menu.cur){if(!vars.crop){vars.crop="Original ("+g(canvas.W)+"x"+g(canvas.H)+")";}gui.menu.cur={};gui.menu.key={};gui.menu.key.stamp=vars.stamp;gui.menu.key.font=vars.font;gui.menu.key.draw=vars.draw;gui.menu.key.shape=vars.shape;gui.menu.key.marquee=vars.marquee;gui.menu.key.crop=vars.crop;gui.menu.key.fill=vars.fill;gui.menu.key.spirograph=vars.spirograph;gui.menu.key.fi=vars.fi;gui.menu.key["PT*"]=vars["PT*"];gui.menu.key["GD*"]=vars["GD*"];gui.menu.key["CO*"]=vars["CO*"];for(var b in gui.menu.key){gui.menu.cur[b]=String(gui.menu.key[b]);}gui.menu.klean("crop",vars.crop);}},"check":{"build":function(a,g,f,b){return('<div id="'+g+'_check" class="check">'+" <span>"+a+"</span><br>"+" <div onclick=\"gui.check.click(this,'"+f[0]+"')\""+(vars[f[0]]=="true"?((b)?'class="cur hooker"':'class="cur"'):((b)?'class="hooker"':""))+">"+vars[f[0]]+"</div>"+"</div>");},"click":function(c,a){function b(g,f,j,h){vars[a]=j;c.innerHTML=j;if(c.className.indexOf("hooker")>-1){c.className=h+" hooker";hooker.fi();}else{c.className=h;}}if(c.className.indexOf("cur")>-1){b("block","none","false","");}else{b("none","block","true","cur");}crop.click();}},"radio":{"build":function(f,l,k,j){var a="";for(var g=1;g<k.length;g++){a+='<div class="'+(((vars[k[0]]==k[g]&&vars.type!="crop")||(vars[k[0]]==k[g]&&vars.type=="crop"&&!crop.force(vars.crop)))?((j)?" cur hooker":" cur"):((j)?"hooker":""))+'" onclick="gui.radio.click(this,\''+k[0]+"')\">"+k[g]+"</div><br>";}return("<div"+((crop.force(vars.crop)&&vars.type=="crop")?' style="opacity: 0.6"':"")+' class="radio" id="'+l+'_radio"><span>'+f+"</span><br>"+a+"</div>");},"click":function(h,f){if(!$C("cur",h.parentNode)[0]){return;}var g=h.innerHTML,c=vars[f];if($C("cur",h.parentNode)[0].className.indexOf("hooker")>-1){$C("cur",h.parentNode)[0].className="hooker";}else{$C("cur",h.parentNode)[0].className="";}vars[f]=g;if(h.className.indexOf("hooker")>-1){h.className=" cur hooker";hooker.fi();}else{h.className="cur";}vars[f]=g;if(f=="marquee"){var a=$C("Marquee_"+c,"tools")[0];if(g=="lasso"||c=="lasso"){marquee.reset("",1);}a.src="media/gui/Marquee_"+g+"_2.png";a.className="Marquee_"+g;gui_tools.prev=a.className;vars.tool="Marquee_"+g;}vars.cache(1);crop.click();}},"menu":{"build":function(l,f){var h="",a=0,g=gui.menu;if(typeof(f)=="object"&&!f.length){for(var b in f){a++;}}else{a=f.length;}for(var b in f){var k=(b==0)?'style="border-top: none;"':((parseInt(b)+1)==a?'style="border-bottom: none;"':"");if(f[b].toLowerCase()==g.cur[l].toLowerCase()||(!g.cur[l]&&b==0)){className='class="sel"';var j='style="top:-'+(g.cellHeight*b)+'px"';}else{className="";}h+='<li onmousedown="gui.menu.toggle(this)" onmouseup="gui.menu.select(this)" onmouseover="gui.menu.okClose(this.parentNode.parentNode)" '+k+" "+className+">"+f[b]+"</li>";}return('<div class="menuWrap" id="'+l+'_opt">'+' <div class="t"><div class="l"></div><div class="r"></div><div class="c"></div></div>'+' <div class="menuBox">'+"  <ul "+j+">"+'   <li class="top"><div class="l"></div><div class="r"></div><div class="c"></div></li>'+h+'   <li class="bottom"><div class="l"></div><div class="c"></div><div class="r"></div></li>'+"  </ul>"+" </div>"+' <div class="b"><div class="l"></div><div class="r"></div><div class="c"></div></div>'+"</div>");},"fu":{"z":function(b,a){gui.menu.klean(b,a.innerHTML);},"crop":function(b,a){gui.menu.fu.z(b,a);$T("div","constrain_check")[0].innerHTML="true";$T("div","constrain_check")[0].className="cur";vars.constrain="true";crop.click();vars.cache(1);},"fill":function(b,a){gui.menu.fu.z(b,a);gui_palette.click("fill");gui_swatch.cur({"Gradient":"GD","Color":"CO","Pattern":"PT"}[a.innerHTML]);},"stamp":function(b,a){gui.menu.fu.z(b,a);stamp.fileNumber=1;stop=1;var a=gui.Y;a.cur.stamp=1;a.prev.stamp=null;a.id="stamp";a.stamp();a.kontrol_update("stamp");vars.cache(1);},"fi":function(b,a){gui.menu.fu.z(b,a);gui_filter.fileNumber=1;stop=1;var a=gui.Y;a.cur.fi=1;a.prev.fi=null;a.id="fi";a.fi();a.kontrol_update("fi");vars.cache(1);},"draw":function(g,f){gui.menu.fu.z(g,f);var a=f.innerHTML;vars.draw=a;$C(vars.draw,"tools")[0].title=a;gui_tools.imageCurrent(a);},"spirograph":function(g,f){gui.menu.fu.z(g,f);var a=f.innerHTML;vars.type_spirograph=a;},"sw":function(h,f,g,b){gui.menu.fu.z(h,f);var a=vars.id+g;vars[g]=Q[g][f.innerHTML];gui_swatch.n[a]=Math.min(gui_swatch.n[a],vars[g].length);vars[a]=vars[g][gui_swatch.n[a]-1];var f=gui.Y;gui_swatch.cur(g);f.prev[g]=null;f.sw(1);f.kontrol_update(g);vars.cache(1);$("author_"+gui_swatch.id).innerHTML=gui_swatch.author();},"CO*":function(b,a){gui.menu.fu.sw(b,a,"CO","solid");},"GD*":function(b,a){gui.menu.fu.sw(b,a,"GD","gradient");},"PT*":function(g,b){gui.menu.fu.z(g,b);vars.PT=Q.PT[b.innerHTML];var a=vars.id+"PT",f=vars.PT.length-(gui_swatch.n[a]=Math.min(gui_swatch.n[a],vars.PT.length));vars.PT[f+1]=new Image();vars.PT[f+1].src=gui_pattern.dir+vars["PT*"]+"/"+f+"-live.jpg";vars[vars.id+"PT"]=vars.PT[f+1];vars[vars.id+"PT"].onload=function(){vars[vars.id+"PT"].opacity=1;var c=gui.Y;gui_swatch.cur("PT");c.prev.PT=null;c.sw(1);c.kontrol_update("PT");vars.cache(1);};$("author_"+gui_swatch.id).innerHTML=gui_swatch.author();},"shape":function(b,a){gui.menu.fu.z(b,a);gui_tools.imageCurrent(vars.tool="Shape_"+(vars.shape=vars.shape.toLowerCase()));},"marquee":function(b,a){gui.menu.fu.z(b,a);gui_tools.imageCurrent(vars.tool="Marquee_"+(vars.marquee=vars.marquee.toLowerCase()));}},"klean":function(g,h){gui.menu.cur[g]=h;vars[g]=h;var f=h,c=f.substr(0,f.indexOf("(")!=-1?f.indexOf("(")-1:f.length);gui.menu.key[g]=c;},"cellHeight":17,"parent":{},"prev":{},"toggle":function(j){var a=j.parentNode.parentNode,g=gui.menu;if(a.opened!=true){if(g.parent.opened==true){g.close();}stop=0;g.prev=j;g.parent=a;var h=a.parentNode.id.replace("_opt","");win.id=a.parentNode.parentNode.parentNode.parentNode.parentNode;if(h=="CO*"||h=="GD*"||h=="PT*"){win.id=win.id.parentNode.parentNode;}zindex(win.id);var f=parseInt(j.parentNode.style.top);if(!isNaN(f)){f=(f/g.cellHeight)*(g.cellHeight+2);var b=-1*f-abPos(a).Y+3;if(b>0){j.parentNode.style.top=(f+b)+"px";}else{j.parentNode.style.top=(f-3)+"px";}}a.style.overflow="visible";j.parentNode.className+="opened";window.setTimeout(function(){a.opened=true;},100);window.onmousedown=g.close;}else{g.doSelect(j,a);}},"doSelect":function(k,b){var g=false;var f=k.parentNode.parentNode;stop=1;var h=$T("li",f);f.style.overflow="hidden";for(var a=0;a<h.length;a++){if(!g&&(h[a].innerHTML=="blur"||h[a].innerHTML=="stylize")){g=true;}h[a].className=trim(h[a].className.replace("sel",""));if(h[a]==k){k.className+=" sel";k.parentNode.style.top=-((a-1)*gui.menu.cellHeight)+"px";}}k.parentNode.className=trim(k.parentNode.className.replace("opened",""));f.opened=f.okClose=false;window.onmousedown=null;var j=f.parentNode.id.replace("_opt","");gui.menu.fu[j](j,k,b);if(g){$("filter_placeholder").innerHTML="<div></div>";gui_filter.resize(180);}},"close":function(){if(gui.menu.parent.opened==true){gui.menu.doSelect(gui.menu.prev);}},"select":function(c,a){var b=c.parentNode.parentNode;if(b.okClose==true){gui.menu.doSelect(c,a);}},"okClose":function(a){if(a.opened){a.okClose=true;}}},"Y":{"id":"stamp","cur":{"stamp":1,"hi":1,"CO":1,"GD":1,"PT":1,"fi":-1},"prev":{"stamp":10,"hi":10,"CO":10,"GD":10,"PT":10,"fi":10},"fu":{"stamp":"gui.Y.stamp","hi":"gui.Y.hi","CO":"gui.Y.sw","GD":"gui.Y.sw","PT":"gui.Y.sw","fi":"gui.Y.fi"},"r":{"stamp":{"Y":110,"n":function(){return(stamp.r[vars.stamp]);},"display":12,"col":4,"row":3},"fi":{"Y":76,"n":function(){return(gui_filter.r[vars.fi]);},"display":8,"col":4,"row":2},"hi":{"Y":135,"n":function(){var a=canvas.history_r;return(1+a.z-a.a);},"display":7,"col":1,"row":7},"CO":{"Y":106,"n":function(){return(vars["CO"].length);},"display":28,"col":7,"row":4},"GD":{"Y":106,"n":function(){return(vars["GD"].length);},"display":28,"col":7,"row":4},"PT":{"Y":106,"n":function(){return(vars["PT"].length);},"display":28,"col":7,"row":4}},"wheel":function(_13){var o=gui.Y,r=o.r[o.id];if(_13.wheelDelta){var v=_13.wheelDelta/120;if(window.opera){v=-v;}}else{if(_13.detail){var v=-_13.detail/3;}}var n=Math.max(2.5,(r.n()/(r.col*r.row))/r.row*4),v=(v<=0)?Math.floor(v+0.2):Math.ceil(v+0.5);o.cord(v*n);eval(o.fu[o.id]+"()");},"cord":function(a){var g=gui.Y,c=g.r[g.id];var b=c.Y-g.height(g.id),h=c.n()-c.display,f=g.cur[g.id];if(g.id=="hi"){f-=canvas.history_r.a+1;}a=Math.round(Math.max(0,Math.min(h,f-a)));$S(g.id+"Slide").top=Math.round(1/h*b*a)+"px";if(g.id=="hi"){a+=canvas.history_r.a+1;}g.cur[g.id]=a;},"kontrol":function(b,g){var f=gui.Y,c=f.r[b],a=f.height(b);return('<div id="'+b+'Kontrol" onmousedown="gui.Y.slide_fu(event,\''+b+'\')" class="slideY" style="top: '+(!isNaN(g)?g:35)+"px; height: "+c.Y+"px; display:"+(c.n()<=c.display?"none":"block")+'">'+' <span class="rT"></span><span class="rB" style="top:'+c.Y+'px;"></span>'+' <div id="'+b+'Slide" class="slider" style="position: relative; height:'+f.height(b)+"px; top:"+f.top(f,c)+'px;">'+'  <div class="rT"></div><div class="rB" style="top:'+a+'px"></div>'+" </div>"+"</div>");},"kontrol_update":function(c,h){var k=gui.Y,j=k.r[c],g=$(c+"Slide");var f=k.height(c),a=g.style;$S(c+"Kontrol").display="none";a.height=f+"px";g.childNodes[2].style.top=f+"px";a.top=k.top(k,j)+"px";$S(c+"Kontrol").display=(j.n()<=j.display)?"none":"block";},"slide":function(a,b,m){var o=gui.Y,r=o.r[o.id],n=r.n()-r.display;$S(o.id+"Slide").top=b.Y+"px";var a=Math.round(Math.max(0,Math.min(n,(b.Y/(r.Y-o.height(o.id)))*n)));if(o.id=="hi"){a+=canvas.history_r.a+1;}o.cur[o.id]=a;eval(o.fu[o.id]+"()");},"slide_fu":function(c,b){var f=gui.Y,a=f.height(b);f.id=b;core.fu(b+"Slide",c,{fu:core.Y,oX:0,oY:-(a/2),Y1:0,Y2:f.r[b].Y-a},f.slide);},"height":function(a){var b=gui.Y.r[a];return(Math.round(b.row/Math.ceil(b.n()/b.col)*b.Y));},"top":function(f,b){var c=f.cur[f.id],g=b.row,a=f.height(f.id);if(f.id=="hi"){c-=canvas.history_r.a-6;}return(c<=1?0:Math.round((c/((b.n()-b.display)+g))*(b.Y-a)));},"active":function(b,c,j,h,g,m){var k="",l="",a=gui.Y;if(m){a.prev[a.id]=null;}while(Math.round(a.cur[a.id]-1)%c!=0){a.cur[a.id]++;j++;h++;}if(a.cur[a.id]!=a.prev[a.id]){if(g.change){g.change();}for(var f=j;f<=h;f++){var l=g.each(f,g.vars);if(l){k+=l;}}b.innerHTML=k;a.prev[a.id]=a.cur[a.id];return true;}},"sw":function(b){var f=gui.Y,h=f.cur;function g(c,j){if(c<=j.length){if(gui_swatch.id=="PT"){vars.PT[c-1]=new Image();vars.PT[c-1].id=c;vars.PT[c-1].src=gui_pattern.dir+vars["PT*"]+"/"+String(vars.PT.length-c)+"-live.jpg";}return('<canvas id="'+vars.id+gui_swatch.id+c+'" height="16" width="16"'+(j.n==c?'class="cur"':"")+' onmousedown="gui_swatch.click(this)" title="'+String(vars.PT.length-c)+'"></canvas>');}}if(f.active($(gui_swatch.id),7,h[gui_swatch.id],h[gui_swatch.id]+27,{"each":g,"vars":{"length":vars[gui_swatch.id].length,"n":gui_swatch.n[vars.id+gui_swatch.id]}},b)){if(gui_swatch.id=="PT"){for(var a=h[gui_swatch.id];a<=h[gui_swatch.id]+27;a++){if(a<=vars[gui_swatch.id].length&&vars.PT[a-1]){vars.PT[a-1].onload=function(){gui_swatch.update(this.id);};}}}else{gui_swatch.update(this.id);}}},"fi":function(b){var f=gui.Y,h=f.cur;function g(c,k){if(c<=k.length){gui_filter.src[c]=new Image();gui_filter.src[c].src="media/filter/"+vars.fi+"/"+(c-1)+"-thumb.png";gui_filter.src[c].id=c;var j=gui_filter.filterNameDic[vars["fi"]][c];return('<canvas width="34" height="34" onmousedown="if(this.id.substr(2)!=gui_filter.fileNumber) '+'{ gui_filter.current(this); }" id="fi'+c+'"  title="'+j+'"'+(gui_filter.fileNumber==c?' class="cur"':"")+" onmouseup=\"gui_filter.buildfilterOp(vars['fi'],this.id.substr(2))\""+"></canvas>");}}if(f.active($("fi"),4,h[f.id],h[f.id]+11,{"change":function(){gui_filter.src=[];},"each":g,"vars":{"length":gui_filter.r[vars.fi]}},b)){for(var a in gui_filter.src){gui_filter.src[a].onload=function(){gui_filter.preview(this.id);};}}},"stamp":function(f){var g=gui.Y,j=g.cur;function h(c,k){if(c<=k.length){stamp.src[c]=new Image();stamp.src[c].src="media/glyph/"+vars.stamp+"/"+(c-1)+"-thumb.png";stamp.src[c].id=c;return('<canvas width="34" height="34" onmousedown="if(this.id.substr(5)!=stamp.fileNumber) '+"{ stamp.current(this); co.glyph(stamp.uri('live'),this.id); }\" id=\"stamp"+c+'"'+(stamp.fileNumber==c?' class="cur"':"")+"></canvas>");}}if($("brush_author")){var b=Resources.Brushes[vars.stamp];if(!b){$("brush_author").innerHTML="";}else{$("brush_author").innerHTML='<div style="background: #555; height: 1px; margin: 6px 0 2px; "></div>';}}if(g.active($("stamp"),4,j[g.id],j[g.id]+11,{"change":function(){stamp.src=[];},"each":h,"vars":{"length":stamp.r[vars.stamp]}},f)){for(var a in stamp.src){stamp.src[a].onload=function(){stamp.preview(this.id);};}}},"hi":function(a){var b=gui.Y,g=b.cur;b.id="hi";function f(h){var j=canvas.history_r;h--;if(h<=j.z&&h>=j.a){var c=j.data[j.r[h]];if(c){c=c[3]?{"img":c[3],"type":c[4]?c[4]:c[2],"n":1}:{"img":"Original","type":"original"};return('<div onmousedown="gui.Y.prev[gui.Y.id]=null; canvas.history_set(canvas.history_r.n='+h+',1)" class="'+(j.n==h?"cur":(h<=j.n?"keep":"discard"))+'">'+' <div style="float: left">'+'  <div style="background: url(media/gui/tools/'+c.img+".png); opacity: "+(h<=j.n?1:0.65)+'"></div>'+" </div>"+' <div style="float: left; margin-left: 3px;">'+c.type+"</div>"+" <span>"+(c.n?"#"+h:"")+"</span>"+"</div>");}}}b.active($C("z","history")[0],1,g[b.id],g[b.id]+7,{"each":f},a);}},"X":{"html":function(c,b,f,a){if(b[3]){vars[c]=Math.round(Math.max(b[0],f*b[1])*100)/100;}else{vars[c]=Math.round(Math.max(b[0],f*b[1]));}if(cF[c]&&cF[c].val[4]){$(c+"CurV").innerHTML=Math.round((vars[c]-cF[c].val[4])*100)/100;}else{$(c+"CurV").innerHTML=vars[c];}if(a=="up"){co.glyph();}},"left":function(a,b){$S(a+"Cur").left=Math.max(0,b)+"px";},"build":function(g,m,l,k){var f="",c="",p=0;if(!isNaN(l[0])){l={"":l};d="slideX";}else{d="slideXX";}for(var j in l){p++;f='<div id="'+m+j+'Cur" class="'+j+'" style="left: '+Math.round(vars[m+j]/(j?cF[m].val[j]:cF[m].val)[1]*112)+'px"></div>'+f;c='<div id="'+m+j+'CurV" class="v">'+Math.round(vars[m+j]-(cF[m].val[4]?cF[m].val[4]:0))+"</div>"+(c?'<div class="u">/</div>':"")+c;}return('<div class="'+d+'"><span>'+g+'</span><br><div onmousedown="gui.X.'+(p>1?"xxSwitch":"xRun")+"('"+m+'\',event,this)" class="slide_div'+((k)?" hooker":"")+'">'+(p>1?'<div id="'+m+'cCur" class="slide_center"></div>':"")+f+"</div>"+c+"<br></div>"+(d=="slideXX"?'<br style="margin-top: 26px">':""));},"xRun":function(c,a,b){core.fu(c+"Cur",a,{fu:core.X,oX:-6,X1:0,X2:110,oY:0},function(h,g,f){var j=cF[c];if(j.fu){j.fu(c,j.val,g.X,f);}else{gui.X.html(c,j.val,g.X/110,f);}gui.X.left(c,g.X);if(f=="up"){vars.cache(1);if(b.className.indexOf("hooker")>-1){hooker.fi();}}});},"xxSwitch":function(k,h,g){var l=(XY(h,"X")-abPos(g).X-7);gui.X.xxID=k;function j(b,a){$S(k+b+"Cur").zIndex=1;$S(k+a+"Cur").zIndex=0;core.fu(k+b+"Cur",h,{fu:core.X,oX:b=="_min"?0:-7,X1:0,X2:115,oY:0},function(p,o,n){gui.X.xxRun(p,o,n,b);if(n=="up"){vars.cache(1);}});}var f=zero($S(k+"_maxCur").left),c=zero($S(k+"_minCur").left);if(Math.abs(l-f)<Math.abs(l-c)||(Math.abs(l-f)==Math.abs(l-c)&&l<=f)){j("_max","_min");}else{j("_min","_max");}},"range":function(c,f,h){var b=(f=="_min")?h:parseInt($S(c+"_minCur").left),g=(f=="_max")?h:parseInt($S(c+"_maxCur").left);$S(c+"cCur").left=(g+7)+"px";$S(c+"cCur").width=Math.max(0,b-g-7)+"px";},"xxRun":function(g,f,c,j){var l=gui.X,h=l.xxID;function k(m,a){l.html(h+m,cF[h].val[m],a/115,c);l.left(h+m,a);l.range(h,m,a);}if(j=="_max"&&zero($S(h+"_minCur").left)<(f.X+1)){k("_min",Math.min(115,f.X+1));}else{if(j=="_min"&&zero($S(h+"_maxCur").left)>(f.X-1)){k("_max",Math.max(0,f.X-1));}}k(j,f.X);},"xxID":0}};win={"close":function(a,b){win.tog(a,{display:"none",effect:true});if(b){setTimeout("var v=$('i"+a+"'); v.className=(v.className=='cur')?'':'cur'; v.opened=false;",190);}},"tab":function(f,a){var c=$(f.id.substr(1));if(f.opened==false){var b=f.id.substr(0,2);b=gui_swatch.L2S[b];if(b){gui_swatch.cur(b);}}if(f.opened==false&&!c.interval){f.opened=true;f.className="";win.tog(a,{display:"block",effect:true});}else{if(!c.interval){f.opened=false;f.className="cur";win.tog(a,{display:"none",effect:true});}}},"tog":function(g,h,j){if($(g)){var l=$(g),k=$S(g),m=win.getCenter();if(typeof(h)!="object"){h={display:h,effect:false};}if(win&&isNaN(win)){k.left=(win.r[g][1]+m)+"px";k.top=win.r[g][2]+"px";}if($("i"+g)){var f,c;if(!l.start){l.start={"top":20,"left":$("i"+g).offsetLeft+(String($("i"+g).innerHTML).length*2.5)+8-m,"width":1,"height":1,"opacity":10};}l.end={"top":parseInt(win.r[g][2]),"left":parseInt(win.r[g][1]),"width":216,"height":parseInt(win.r[g][3]),"opacity":100};if(h.display=="block"&&h.display!=k.display){if(h.effect){f=l.start;c=l.end;}else{f=l.end;}}else{if(h.display=="none"&&k.display=="block"){if(h.effect){f=l.end;c=l.start;}else{f=l.start;}}}if(c){win.apply(l,f);win.go(l,c,0.4);}else{win.apply(l,f);}}else{l.start=l.end={"opacity":100};win.apply(l,l.start);}win.r[g][0]=h.display;win.cp(1);}},"feed":function(){win.r={canvas:["block",-10,45,],filter:["block",810,45,256],solid:["block",600,45,256],gradient:["none",420,570,230],pattern:["none",700,570,219],swatch:["none",0,570,217],tools:["block",-140,45,279],options:["block",-140,330,200],history:["block",600,300,187]};if(r=cookieGrab("windows")){win.mk(r);}else{win.mk(win.cp());}},"mk":function(c){var g=win.getCenter(),c=c.split(":");for(var b in c){var a=c[b].split(","),f="";if(!a[0]){continue;}win.r[a[0]]=[a[1],parseInt(a[2]),a[3],a[4]];win.tog(a[0],a[1],[g+parseInt(a[2]),a[3],a[4]]);if(f=$("i"+a[0])){f.opened=(a[1]=="none")?false:true;f.className=(a[1]=="none")?"cur":"";}}},"cp":function(f,b){var c="";if(b){b[1]-=win.getCenter();win.r[f]=deObject(b);}if(f=="filter"){win.r[f][3]="undefined";}for(var a in win.r){c+=a+","+win.r[a]+":";}if(f){cookieStab("windows",c);}else{return(c);}},"apply":function(g,c){var f=g.style,h=win.getCenter();for(i in c){if(i=="opacity"){var a=c[i]/100;f.filter="alpha(opacity="+c[i]+")";f.MozOpacity=a;f.opacity=a;f.KhtmlOpacity=a;if(c[i]<=g.start.opacity&&c[i]!=g.end.opacity){f.display="none";}else{f.display="block";}}else{if(i=="left"){f[i]=(c[i]+h)+"px";}else{f[i]=c[i]+"px";}}g[i]=c[i];}},"go":function(b,a,c){stop=0;zindex(b);if(b.interval){window.clearInterval(b.interval);}win.overflow(b,"hidden");b.style.cursor="pointer";b.interval=window.setInterval(function(){var g=true,f=[],h=[];for(i in a){f[i]=Math.round((a[i]-b[i])*c);}for(i in f){h[i]=b[i]+f[i];if(f[i]==0||(f[i]>0&&h[i]>a[i])||(f[i]<0&&h[i]<a[i])){h[i]=a[i];}else{g=false;}}win.apply(b,h);if(g){window.clearInterval(b.interval);b.interval=null;stop=1;b.style.cursor="move";win.overflow(b,"visible");}},35);},"overflow":function(f,a){f.style.overflow=a;function c(g){g.style.overflow=a;}c($C("z",f)[0]);var b=$C("TML",f)[0];if(b){c(b);}var b=$C("TRx",f)[0];if(b){c(b);}},"zindex":3,"getCenter":function(){return(zero((XYwin("X")-710)/2));}};win_size={"core":function(b){function c(j,f,g){var h=Math.max(100,(g.Y-a.Y)+a.H),k=Math.max(212,(g.X-a.X)+a.W);var j={W:k-32,H:h-40};win_size.fu(j,a);if(f=="up"){vars.cache(1);}}var a=win_size.construct({"X":$("canvas").offsetLeft,"Y":$("canvas").offsetTop,"W":parseInt($S("canvas").width),"H":parseInt($S("canvas").height)});core.fu("canvas",b,{fu:c});},"tog":function(a){var b=$S("canvas");win_size[a]();vars.winMax=(a=="max")?1:0;vars.cache(1);win.cp("canvas",["block",zero(b.left),zero(b.top),parseInt(win.r["canvas"][3])]);},"max":function(){var a=win_size;a.fu({cT:19,cL:-8,W:XYwin("X")-16,H:XYwin("Y")-56},a.construct({}));},"min":function(){var a=win_size;a.fu({cT:19,cL:(document.body.scrollWidth-(canvas.W+30))/2,W:canvas.W,H:canvas.H},a.construct({}));},"fu":function(g,h){var f=$S("canvas");vars.winW=g.W;vars.winH=g.H;if(g.cT){f.top=g.cT+"px";f.left=g.cL+"px";}f.width=(g.W+32)+"px";f.height=(g.H+40)+"px";var f=$S("cBound");f.height=g.H+"px";f.width=g.W+"px";h["ML"].height=g.H+"px";h["MM"].height=g.H+"px";h["MR"].height=g.H+"px";h["TM"].width=g.W+"px";h["MM"].width=g.W+"px";h["BM"].width=g.W+"px";var g=win_size.LT(),b=["ctx_box","ctx_temp","ctx_marquee","ctx_active","ctx_mouse","ctx_filter"];for(var a in b){var f=$S(b[a]);f.left=g.L+"px";f.top=g.T+"px";}},"fu2":function(h,j){var g=$S("canvas");vars.winW=h.W;vars.winH=h.H;if(h.cT){g.top=h.cT+"px";g.left=h.cL+"px";}g.width=(h.W+32)+"px";g.height=(h.H+40)+"px";var g=$S("cBound");g.height=h.H+"px";g.width=h.W+"px";j["ML"].height=h.H+"px";j["MM"].height=h.H+"px";j["MR"].height=h.H+"px";j["TM"].width=h.W+"px";j["MM"].width=h.W+"px";j["BM"].width=h.W+"px";var f=win_size.LT();var b=["ctx_box","ctx_temp","ctx_marquee","ctx_active","ctx_mouse","ctx_filter"];for(var a in b){var g=$S(b[a]);g.left=f.L+"px";g.top=f.T+"px";$(b[a]).width=h.W;$(b[a]).height=h.H;}},"LT":function(){return({L:Math.round((vars.winW-canvas.W)/2),T:Math.round((vars.winH-canvas.H)/2)});},"construct":function(f){var c=$("canvas"),b=["ML","MM","MR","TM","BM"];for(var a in b){a=b[a];f[a]=$C(a,c)[0].style;}return(f);}};if(typeof Canvas2D=="undefined"){var Canvas2D={};}(function(){var a={};Canvas2D=mixin(Canvas2D,{add:function(f,c,l,j){if(typeof f=="number"){f={width:f,height:c,id:l,style:j};}if(f){if(typeof f=="string"){f={id:f};}if(f&&f.id&&a[f.id]){return a[f.id];}}var k=document.createElement("canvas"),b=k.getContext("2d");if(typeof f=="object"){for(var h in f){switch(h){case"style":if(typeof f[h]=="object"){for(var g in f[h]){k.style[g]=f[h][g];}break;}else{k.setAttribute(h,f[h]);break;}default:k[h]=f[h];break;}}}document.body.appendChild(k);if(f.id){a[f.id]=b;}return b;},remove:function(b){if(!a[b]){return;}delete a[b];document.body.removeChild($("#"+b));}});})();(function(){TEST={};TEST=(function(){var g,k=0,j="\t\t\t\t\t\t\t\t\t\t\t\t\t\t";function h(l,m){switch(typeof l){case"object":return f(l,m+1);case"function":return"function";case"string":return"'"+l+"'";default:return l;}}function f(q,p){if(p>g){return false;}var o=Object.prototype.toString.call(q),n="\n",m=j.substr(0,p);for(var l in q){n+=m+h(l)+": "+h(q[l],p)+",\n";}m=j.substr(0,p-1);switch(o){case"[object Object]":return"{ "+n.substr(0,n.length-2)+"\n"+m+"}";case"[object Array]":return"[ "+n.substr(0,n.length-2)+"\n"+m+"]";default:return;}}return function(n,m,o){var p=document.getElementById("TEST");if(!p){var p=document.createElement("div");p.id="TEST";document.body.appendChild(p);}g=o||2;if(typeof n!="string"){n=h(n,k);}var l=Object.prototype.toString.call(p)=="[object HTMLDivElement]"?"<br>":"\n";p.innerHTML=m?p.innerHTML+l+n:n;};})();TEST.element=function(f,g){var h=document.getElementById("TEST");if(h){document.body.removeChild(h);}var h=document.createElement(f);h.id="TEST";if(g){h.setAttribute("style",g);}document.body.appendChild(h);if(f=="textarea"){h.style.width=(window.innerWidth-h.offsetLeft-6)+"px";h.style.height=(window.innerHeight-h.offsetTop-6)+"px";}return h;};TEST.speed=function(g,f,o){var l,j,m,k;l=now();for(var h=0;h<=o;h++){g();}m=now()-l;j=now();for(var h=0;h<=o;h++){f();}k=now()-j;TEST("A: "+m+", B: "+k+" = "+(Math.round(k/m*1000)/1000),1);};dump=function(B,v,u){var t="";var z=typeof u=="undefined"?true:u;var q="dumpWin";var p=a();var s=760;var f=500;var o=screen.width?(screen.width-s)/2:0;var n=screen.height?(screen.height-f)/2:0;var m="height="+f+",width="+s+",top="+n+",left="+o+",scrollbars=yes,menubar=yes,status=yes,resizable=yes";var k="Dump";var j='function tRow(s) {t = s.parentNode.lastChild;tTarget(t, tSource(s)) ;}function tTable(s) {var switchToState = tSource(s) ;var table = s.parentNode.parentNode;for (var i = 1; i < table.childNodes.length; i++) {t = table.childNodes[i] ;if (t.style) {tTarget(t, switchToState);}}}function tSource(s) {if (s.style.fontStyle == "italic" || s.style.fontStyle == null) {s.style.fontStyle = "normal";s.title = "click to collapse";return "open";} else {s.style.fontStyle = "italic";s.title = "click to expand";return "closed" ;}}function tTarget (t, switchToState) {if (switchToState == "open") {t.style.display = "";} else {t.style.display = "none";}}';t+=(/string|number|undefined|boolean/.test(typeof(B))||B==null)?B:g(B,typeof B);var l=document.getElementById("TEST");if(!l){var l=document.createElement("div");l.id="TEST";document.body.appendChild(l);}l.innerHTML=v?l.innerHTML+t:t;function g(L,J){var H;var F=0;var I="";J=b(L);switch(J){case"regexp":var G=J;I+="<table"+c(G,"table")+'><tr><th colspan="2"'+c(G,"th")+">"+G+"</th></tr>";I+='<tr><td colspan="2"'+c(G,"td-value")+"><table"+c("arguments","table")+"><tr><td"+c("arguments","td-key")+"><i>RegExp: </i></td><td"+c(J,"td-value")+">"+L+"</td></tr></table>";F++;break;case"date":var G=J;I+="<table"+c(G,"table")+'><tr><th colspan="2"'+c(G,"th")+">"+G+"</th></tr>";I+='<tr><td colspan="2"'+c(G,"td-value")+"><table"+c("arguments","table")+"><tr><td"+c("arguments","td-key")+"><i>Date: </i></td><td"+c(J,"td-value")+">"+L+"</td></tr></table>";F++;break;case"function":var G=J;var h=L.toString().match(/^.*function.*?\((.*?)\)/im);var K=(h==null||typeof h[1]=="undefined"||h[1]=="")?"none":h[1];I+="<table"+c(G,"table")+'><tr><th colspan="2"'+c(G,"th")+">"+G+"</th></tr>";I+='<tr><td colspan="2"'+c(G,"td-value")+"><table"+c("arguments","table")+"><tr><td"+c("arguments","td-key")+"><i>Arguments: </i></td><td"+c(J,"td-value")+">"+K+"</td></tr><tr><td"+c("arguments","td-key")+"><i>Function: </i></td><td"+c(J,"td-value")+">"+L+"</td></tr></table>";F++;break;case"domelement":var G=J;I+="<table"+c(G,"table")+'><tr><th colspan="2"'+c(G,"th")+">"+G+"</th></tr>";I+="<tr><td"+c(G,"td-key")+"><i>Node Name: </i></td><td"+c(J,"td-value")+">"+L.nodeName.toLowerCase()+"</td></tr>";I+="<tr><td"+c(G,"td-key")+"><i>Node Type: </i></td><td"+c(J,"td-value")+">"+L.nodeType+"</td></tr>";I+="<tr><td"+c(G,"td-key")+"><i>Node Value: </i></td><td"+c(J,"td-value")+">"+L.nodeValue+"</td></tr>";I+="<tr><td"+c(G,"td-key")+"><i>innerHTML: </i></td><td"+c(J,"td-value")+">"+L.innerHTML+"</td></tr>";F++;break;}if(/object|array/.test(J)){for(H in L){var G=b(L[H]);if(F<1){I+="<table"+c(J,"table")+'><tr><th colspan="2"'+c(J,"th")+">"+J+"</th></tr>";F++;}if(typeof L[H]=="object"&&L[H]!=null){I+="<tr><td"+c(J,"td-key")+">"+H+(z?" ["+G+"]":"")+"</td><td"+c(J,"td-value")+">"+g(L[H],G)+"</td></tr>";}else{if(typeof L[H]=="function"){I+="<tr><td"+c(J,"td-key")+">"+H+(z?" ["+G+"]":"")+"</td><td"+c(J,"td-value")+">"+g(L[H],G)+"</td></tr>";}else{I+="<tr><td"+c(J,"td-key")+">"+H+(z?" ["+G+"]":"")+"</td><td"+c(J,"td-value")+">"+L[H]+"</td></tr>";}}}}if(F==0){I+="<table"+c(J,"table")+'><tr><th colspan="2"'+c(J,"th")+">"+J+" [empty]</th></tr>";}I+="</table>";return I;}};dump.object=function(f){doc=f;};var c=function(m,f){var l="";var k="font-size:xx-small;font-family:verdana,arial,helvetica,sans-serif;cell-spacing:2px;";var j="font-size:xx-small;font-family:verdana,arial,helvetica,sans-serif;text-align:left;color: white;padding: 5px;vertical-align :top;cursor:hand;cursor:pointer;";var n="font-size:xx-small;font-family:verdana,arial,helvetica,sans-serif;vertical-align:top;padding:3px;";var h='onClick="tTable(this);" title="click to collapse"';var g='onClick="tRow(this);" title="click to collapse"';switch(m){case"string":case"number":case"boolean":case"undefined":case"object":switch(f){case"table":l=' style="'+k+'background-color:#0000cc;"';break;case"th":l=' style="'+j+'background-color:#4444cc;"'+h;break;case"td-key":l=' style="'+n+'background-color:#ccddff;cursor:hand;cursor:pointer;"'+g;break;case"td-value":l=' style="'+n+'background-color:#fff;"';break;}break;case"array":switch(f){case"table":l=' style="'+k+'background-color:#006600;"';break;case"th":l=' style="'+j+'background-color:#009900;"'+h;break;case"td-key":l=' style="'+n+'background-color:#ccffcc;cursor:hand;cursor:pointer;"'+g;break;case"td-value":l=' style="'+n+'background-color:#fff;"';break;}break;case"function":switch(f){case"table":l=' style="'+k+'background-color:#aa4400;"';break;case"th":l=' style="'+j+'background-color:#cc6600;"'+h;break;case"td-key":l=' style="'+n+'background-color:#fff;cursor:hand;cursor:pointer;"'+g;break;case"td-value":l=' style="'+n+'background-color:#fff;"';break;}break;case"arguments":switch(f){case"table":l=' style="'+k+'background-color:#dddddd;cell-spacing:3;"';break;case"td-key":l=' style="'+j+'background-color:#eeeeee;color:#000000;cursor:hand;cursor:pointer;"'+g;break;}break;case"regexp":switch(f){case"table":l=' style="'+k+'background-color:#CC0000;cell-spacing:3;"';break;case"th":l=' style="'+j+'background-color:#FF0000;"'+h;break;case"td-key":l=' style="'+j+'background-color:#FF5757;color:#000000;cursor:hand;cursor:pointer;"'+g;break;case"td-value":l=' style="'+n+'background-color:#fff;"';break;}break;case"date":switch(f){case"table":l=' style="'+k+'background-color:#663399;cell-spacing:3;"';break;case"th":l=' style="'+j+'background-color:#9966CC;"'+h;break;case"td-key":l=' style="'+j+'background-color:#B266FF;color:#000000;cursor:hand;cursor:pointer;"'+g;break;case"td-value":l=' style="'+n+'background-color:#fff;"';break;}break;case"domelement":switch(f){case"table":l=' style="'+k+'background-color:#FFCC33;cell-spacing:3;"';break;case"th":l=' style="'+j+'background-color:#FFD966;"'+h;break;case"td-key":l=' style="'+j+'background-color:#FFF2CC;color:#000000;cursor:hand;cursor:pointer;"'+g;break;case"td-value":l=' style="'+n+'background-color:#fff;"';break;}break;}return l;};var a=function(){var g=navigator.userAgent.toLowerCase();if(typeof window.opera!="undefined"){return"opera";}else{if(typeof document.all!="undefined"){if(typeof document.getElementById!="undefined"){var f=g.replace(/.*ms(ie[\/ ][^ $]+).*/,"$1").replace(/ /,"");if(typeof document.uniqueID!="undefined"){if(f.indexOf("5.5")!=-1){return f.replace(/(.*5\.5).*/,"$1");}else{return f.replace(/(.*)\..*/,"$1");}}else{return"ie5mac";}}}else{if(typeof document.getElementById!="undefined"){if(navigator.vendor.indexOf("Apple Computer, Inc.")!=-1){return"safari";}else{if(g.indexOf("gecko")!=-1){return"mozilla";}}}}}return false;};var b=function(h){var q=typeof(h);if(q=="function"){var k=h.toString();if((/^\/.*\/[gi]??[gi]??$/).test(k)){return"regexp";}else{if((/^\[object.*\]$/i).test(k)){q="object";}}}if(q!="object"){return q;}switch(h){case null:return"null";case window:return"window";case document:return document;case window.event:return"event";}if(window.event&&(event.type==h.type)){return"event";}var n=h.constructor;if(n!=null){switch(n){case Array:q="array";break;case Date:return"date";case RegExp:return"regexp";case Object:q="object";break;case ReferenceError:return"error";default:var o=n.toString();var g=o.match(/\s*function (.*)\(/);if(g!=null){return"object";}}}var p=h.nodeType;if(p!=null){switch(p){case 1:if(h.item==null){return"domelement";}break;case 3:return"string";}}if(h.toString!=null){var l=h.toString();var j=l.match(/^\[object (.*)\]$/i);if(j!=null){var j=j[1];switch(j.toLowerCase()){case"event":return"event";case"nodelist":case"htmlcollection":case"elementarray":return"array";case"htmldocument":return"htmldocument";}}}return q;};})();var co={},vars={};(function(){vars={"id":"fill","draw":"Brush","font":"Arial","gradient":"fixed","marquee":"polygon","shape":"ellipses","stamp":"Default","fi":"blur","PT*":"Squidfingers","GD*":"Web v2.0","CO*":"Oxygen","constrain":"false","fillPT":new Image(),"fill":"solid","lineCap":"round","lineClose":"false","lineJoin":"miter","strokePT":new Image(),"stroke":"solid","type":"Brush","zoom":100};vars.updateTool=function(){var a=vars.type;vars.tool=ucword(a)+(a=="shape"||a=="marquee"?"_"+vars[a]:"");};(vars.cache=function(f){var j=cookieGrab("settings");if(!vars.tool){vars.updateTool();}if(j&&!f){var h=j.split(",");for(var b in h){var a=h[b].split(":");if(!isNaN(parseInt(a[1]))){a[1]=parseInt(a[1]);}if(a[0]!="zoom"){vars[a[0]]=a[1];}}}else{var h="",g={"object":1,"function":1};for(var b in vars){if(b=="winH"||b=="winW"){continue;}if(!g[typeof(vars[b])]){h+=b+":"+vars[b]+",";}}h=h.substr(0,h.length-1);cookieStab("settings",h);}})();co.polygon=function(I,H,G,v){var q=!isNaN(v)?"marquee":"shape",z=co.constrain(I,H,v),p=co.scale(I,H,v);var J=Math.sqrt(Math.pow(I.X-z.X,2)+Math.pow(I.Y-z.Y,2))/2,m=vars["sides_"+q];var u=z.X-((z.X-I.X)/2),t=z.Y-((z.Y-I.Y)/2),l=(Math.PI*2)/m;var k=E.ctrl?Math.atan2(z.X-I.X,z.Y-I.Y):(Math.PI/180*45),F=0;var h=(isNaN(v)&&mXY=="up"&&Math.abs(I.X-H.X)>0&&Math.abs(I.Y-H.Y)>0);function g(){return u+Math.cos(k+(l*B))*J*p.X;}function f(){return(t-Math.sin(k+(l*B))*J*p.Y);}var B=0;G.moveTo(g(),f());for(var B=1;B<=m;B++){G.lineTo(g(),f());}G.closePath();};co.star=function(L,K,J,B){var u=!isNaN(B)?"marquee":"shape",G=co.constrain(L,K,B),f=co.scale(L,K,B);var M=Math.sqrt(Math.pow(L.X-G.X,2)+Math.pow(L.Y-G.Y,2))/2,q=M/vars["slope_"+u],m=vars["sides_"+u];var z=G.X-((G.X-L.X)/2),v=G.Y-((G.Y-L.Y)/2),l=(Math.PI*2)/m,k=l/2;var F=(Math.PI/180),h=E.ctrl?Math.atan2(G.X-L.X,G.Y-L.Y):F*45,I=0;var g=(isNaN(B)&&mXY=="up"&&Math.abs(L.X-K.X)>0&&Math.abs(L.Y-K.Y)>0);function t(a){return((a=="X")?(z+Math.cos(h+(l*H)-k)*M*f.X):(v-Math.sin(h+(l*H)-k)*M*f.Y));}function p(a){return((a=="X")?(z+Math.cos(h+(l*H))*q*f.X):(v-Math.sin(h+(l*H))*q*f.Y));}var H=0;J.moveTo(p("X"),p("Y"));for(var H=1;H<=m;H++){J.lineTo(t("X"),t("Y"));J.lineTo(p("X"),p("Y"));}J.closePath();};co.burst=function(J,I,H,u){var f=!isNaN(u)?"marquee":"shape",B=co.constrain(J,I,u),z=co.scale(J,I,u);var K=Math.sqrt(Math.pow(J.X-B.X,2)+Math.pow(J.Y-B.Y,2))/2,v=K/vars["slope_"+f],t=vars["sides_"+f];var l=B.X-((B.X-J.X)/2),h=B.Y-((B.Y-J.Y)/2),q=(Math.PI*2)/t,p=q/2,m=q/4;var k=E.ctrl?Math.atan2(B.X-J.X,B.Y-J.Y):(Math.PI/180*45),G=0;var g=(isNaN(u)&&mXY=="up"&&Math.abs(J.X-I.X)>0&&Math.abs(J.Y-I.Y)>0);H.moveTo(l+(Math.cos(k)*K)*z.X,h-(Math.sin(k)*K)*z.Y);for(var F=1;F<=t;F++){H.quadraticCurveTo(l+Math.cos(k+(q*F)-(m*3))*(v/Math.cos(m))*z.X,h-Math.sin(k+(q*F)-(m*3))*(v/Math.cos(m))*z.Y,l+Math.cos(k+(q*F)-p)*v*z.X,h-Math.sin(k+(q*F)-p)*v*z.Y);H.quadraticCurveTo(l+Math.cos(k+(q*F)-m)*(v/Math.cos(m))*z.X,h-Math.sin(k+(q*F)-m)*(v/Math.cos(m))*z.Y,l+Math.cos(k+(q*F))*K*z.X,h-Math.sin(k+(q*F))*K*z.Y);}H.closePath();};co.gear=function(J,I,H,z){var f=!isNaN(z)?"marquee":"shape",B=co.constrain(J,I,z),h=co.scale(J,I,z);var K=Math.sqrt(Math.pow(J.X-B.X,2)+Math.pow(J.Y-B.Y,2))/2,g=K/vars["slope_"+f],v=vars["sides_"+f];var p=B.X-((B.X-J.X)/2),l=B.Y-((B.Y-J.Y)/2),u=(Math.PI*2)/v,t=u/2,q=u/4;var m=E.ctrl?Math.atan2(B.X-J.X,B.Y-J.Y):(Math.PI/180*45),G=0;var k=(isNaN(z)&&mXY=="up"&&Math.abs(J.X-I.X)>0&&Math.abs(J.Y-I.Y)>0);H.moveTo(p+(Math.cos(m)*g)*h.X,l-(Math.sin(m)*g)*h.Y);for(var F=1;F<=v;F++){H.lineTo(p+Math.cos(m+(u*F)-(q*3))*K*h.X,l-Math.sin(m+(u*F)-(q*3))*K*h.Y);H.lineTo(p+Math.cos(m+(u*F)-(q*2))*K*h.X,l-Math.sin(m+(u*F)-(q*2))*K*h.Y);H.lineTo(p+Math.cos(m+(u*F)-q)*g*h.X,l-Math.sin(m+(u*F)-q)*g*h.Y);H.lineTo(p+Math.cos(m+(u*F))*g*h.X,l-Math.sin(m+(u*F))*g*h.Y);}H.closePath();};co.ellipses=function(I,H,F,k){var f=!isNaN(k)?"marquee":"shape",l=co.constrain(I,H,k),G=co.scale(I,H,k);var J=Math.sqrt(Math.pow(I.X-l.X,2)+Math.pow(I.Y-l.Y,2))/2,B=150;var h=l.X-((l.X-I.X)/2),g=l.Y-((l.Y-I.Y)/2),z=(Math.PI*2)/B;var v=E.ctrl?Math.atan2(l.X-I.X,l.Y-I.Y):(Math.PI/180*45),p=0;var u=(isNaN(k)&&mXY=="up"&&Math.abs(I.X-H.X)>0&&Math.abs(I.Y-H.Y)>0);function t(){return h+Math.cos(v+(z*m))*J*G.X;}function q(){return(g-Math.sin(v+(z*m))*J*G.Y);}var m=0;F.moveTo(t(),q());for(var m=1;m<=B;m++){F.lineTo(t(),q());}F.closePath();};co.circle=function(g,f,k){var j={"X":Math.max(g.X,f.X)-Math.abs(g.X-f.X)/2,"Y":Math.max(g.Y,f.Y)-Math.abs(g.Y-f.Y)/2};var h=Math.sqrt(Math.pow(g.X-f.X,2)+Math.pow(g.Y-f.Y,2))/2;k.arc(j.X,j.Y,h,0,Math.PI*2,true);k.closePath();};co.rectangle=function(g,f,k,h){var j=co.constrain(g,f,h);if((g.X-j.X<=0)!=(g.Y-j.Y<=0)){k.moveTo(g.X,g.Y);k.lineTo(j.X,g.Y);k.lineTo(j.X,j.Y);k.lineTo(g.X,j.Y);}else{k.moveTo(g.X,g.Y);k.lineTo(g.X,j.Y);k.lineTo(j.X,j.Y);k.lineTo(j.X,g.Y);}k.closePath();};co.brush=function(){if(vars.type=="brush"||vars.type=="eraser"||vars.type=="pencil"){var g=$2D("ctx_brush"),f=vars["diameter_"+vars.type],b=f*2;$("ctx_brush").width=b;$("ctx_brush").height=b;co.del(g);g.globalCompositeOperation="source-over";var a=g.createRadialGradient(f,f,(vars.type=="pencil")?f-1:vars["hardness_"+vars.type]/100*f-1,f,f,f);a.addColorStop(0,"rgba(0,0,0,"+(vars["opacity_"+vars.type]/100)+")");a.addColorStop(0.95,"rgba(0,0,0,0)");a.addColorStop(1,"rgba(0,0,0,0)");g.fillStyle=a;g.fillRect(0,0,b,b);g.globalCompositeOperation="source-in";g.rect(0,0,b,b);co.style[vars.fill]({"X":0,"Y":0},{"X":b,"Y":b},g,"fill");}};co.glyph=function(a,b){co.brush();if(!a){co.stamp();return;}co.stamp.image.src=a;if($(b)){if($(stamp.o)){$(stamp.o).className="";}co.del(b);C$(b,{"+":"load"});stamp.o=b;}co.stamp.image.onload=function(){var c=co.stamp.image;stamp.loaded=true;var f=stamp.fileNumber;C$("stamp"+f,{"-":"load"});stamp.preview(f,"move");co.stamp.r={W:c.width,H:c.height};co.stamp();};};co.stamp=function(){if((vars.type=="calligraphy"||vars.type=="stamp")&&co.stamp.image.src){var g=$2D("ctx_stamp"),a=co.stamp.image,f=vars.type=="stamp"?vars.rand_min/100:1,b=co.stamp.r={W:Math.round(a.width*f),H:Math.round(a.height*f)};$("ctx_stamp").width=b.W;$("ctx_stamp").height=b.H;g.save();g.clearRect(0,0,canvas.W,canvas.H);g.globalAlpha=vars["opacity_"+vars.type]/100;g.globalCompositeOperation="source-over";g.drawImage(a,0,0,b.W,b.H);g.globalCompositeOperation="source-in";g.rect(0,0,b.W,b.H);style(g,"fillStyle","fill",{X:0,Y:0},{X:b.W,Y:b.H});g.fill();g.restore();}};co.stamp.image=new Image();co.stamp.r={};co.core=function(a,c){var b=win_size.LT();core.fu("cBound",a,{fu:core.XY,X1:0,Y1:0,oX:-1-b.L,oY:-1-b.T},c);};co.copy=function(f,c){$2D(c).drawImage($(f),0,0,canvas.W,canvas.H);};co.del=function(a){if(a.length){a=$2D(a);}a.clearRect(0,0,canvas.W,canvas.H);};co.path=function(f,b){f.moveTo(b[0].X,b[0].Y);for(var a in b){f.lineTo(b[a].X,b[a].Y);}};co.constrain=function(f,c,g){if(((E.sh||!isNaN(g))&&g==1)||(E.sh&&isNaN(g))&&!E.ctrl){var k=(c.X-f.X)?(c.X-f.X):1,j=(c.Y-f.Y)?(c.Y-f.Y):1,h={X:Math.abs(k),Y:Math.abs(j)};if(h.X<h.Y){return({X:f.X+(k/h.X*h.Y),Y:c.Y});}else{return({Y:f.Y+(j/h.Y*h.X),X:c.X});}}else{return(c);}};co.scale=function(f,c,g){if((((E.sh||!isNaN(g))&&g==1)||(E.sh&&isNaN(g)))){return({X:1,Y:1});}else{if(Math.abs(f.X-c.X)>Math.abs(f.Y-c.Y)){return({X:1,Y:zero(Math.abs(f.Y-c.Y)/Math.abs(f.X-c.X))});}else{return({X:zero(Math.abs(f.X-c.X)/Math.abs(f.Y-c.Y)),Y:1});}}};co.style={};co.style.fill=function(b,a){b.fillStyle=a;b.fill();};co.style.stroke=function(b,a){b.strokeStyle=a;b.stroke();};co.style.solid=function(g,f,k,h,j){co.style[h](k,"rgba("+vars[((j&&isNaN(j))?j:h)+"CO"].join(",")+")");};co.style.pattern=function(g,f,k,h,j){co.style[h](k,vars[((j&&isNaN(j))?j:h)+"PT~"]);};co.style.gradient={};co.style.gradient=function(g,f,k,h,j){co.style.gradient[vars.gradient](g,f,k,h,j);};co.style.gradient.fixed=function(g,f,k,h,j){co.gradient(g,f,k,vars[((j&&isNaN(j))?j:h)+"GD"],h,j);};co.style.gradient.relative=function(g,f,k,h,j){co.gradient(cXY,f,k,vars[((j&&isNaN(j))?j:h)+"GD"],h,j);};co.style.gradient.absolute=function(g,f,k,h,j){co.gradient({X:0,Y:0},{X:canvas.W,Y:canvas.H},k,vars[((j&&isNaN(j))?j:h)+"GD"],h,j);};co.gradient=function(z,t,q,f,G,H){var n;if(!H){var k=Math.sqrt(Math.pow(t.X-z.X,2)),o=k/2,p=gui_gradient.rotate,l=Math.min(t.X,z.X),j=Math.min(t.Y,z.Y);var F=Math.abs((Math.sin(p)*o)+o),B=Math.abs((Math.cos(p)*o)-o);var h=Math.abs((Math.sin(p+Math.PI)*o)+o),u=Math.abs((Math.cos(p+Math.PI)*o)-o);n=q.createLinearGradient(F+l,B+j,h+l,u+j);}else{n=q.createLinearGradient(z.X,z.Y,t.X,t.Y);}for(var m in f){if(!f[m][2]){n.addColorStop(f[m][0],"rgba("+f[m][1].join(",")+")");}}co.style[G](q,n);};})();gui_tools={imagePos:{},imageMap:function(){var c=$T("div",$C("tools","tools")[0]),b=["Brush","Calligraphy","Crop","Eraser","Fill","Marquee_burst","Marquee_ellipses","Marquee_gear","Marquee_lasso","Marquee_polygon","Marquee_rectangle","Marquee_star","Original","Pencil","Picker","Select","Shape_burst","Shape_ellipses","Shape_gear","Shape_polygon","Shape_rectangle","Shape_star","Stamp","Text","Zoom","Spirograph"];for(var h in b){gui_tools.imagePos[b[h]]=h*26-5;}for(var a in c){a=c[a];if(typeof(a)=="object"){var g=$T("img",a);if(g[0]){g=(g[1]&&g[1].className!="plus")?g[1]:g[0];var g=g.className.split(" ")[0];var f=g.split("_")[0];if(f=="Marquee"||f=="Shape"){g=f+"_"+vars[f.toLowerCase()];}else{if(f=="Brush"){g=ucword(vars["draw"]);}}a.style.backgroundImage="url(media/gui/tools/Tools.png)";a.style.backgroundPosition="5px "+(-gui_tools.imagePos[g])+"px";a.title=g.split("_")[0];a.onmousedown=function(j){j.preventDefault();};}}}},imageSize:function(b,c,a){var g=$C(b,"tools")[0],f=g.style;f.width=(15+c)+"px";f.height=(15+c)+"px";f.top=(-(c/2))+"px";f.left=(-(c/2))+"px";if(c==a){var f=g.parentNode.style;f.backgroundPosition="5px "+(-gui_tools.imagePos[b])+"px";if(c==25){g.style.display="block";g.src="media/gui/tools/"+b+"_2.png";f.backgroundImage="";}else{if(c==0){g.src="";g.style.display="none";f.backgroundImage="url(media/gui/tools/Tools.png)";}}}else{if((c==0&&a==25)||(c==25&&a==0)){var g=$T("img",g.parentNode);if(g[1]){g[0].style.display=(c==0)?"none":"block";}}}},imageCurrent:function(n){function l(c){return(c.indexOf("_")!=-1?c.substr(0,c.indexOf("_")):c).toLowerCase();}var k=gui_tools.prev,a=l(k?k:vars.type),m=l(n);vars.type=m;vars.typeImg=n;if(k!=n){function j(c,p){setTimeout("gui_tools.imageSize('"+c+"',"+f+","+p+")",(h++)*4);}if(m=="marquee"||m=="crop"){marquee.reset();}if(a=="crop"){crop.reset();}if(k){var h=0,g=new Image();g.src="media/gui/tools/"+k+".png";for(var f=25;f>=0;f--){j(k,0);}}var h=0,b=new Image();b.src="media/gui/tools/"+n+"_2.png";for(var f=0;f<=25;f++){j(n,25);}gui_tools.prev=n;gui_options.forge(vars.type);vars.updateTool();vars.cache(1);}}};gui_options={modulesObject:function(){gui_options.modules={"marquee":{build:["sides_marquee","slope_marquee"],vars:{"movement_marquee":"anchored","slope_marquee":2,"sides_marquee":7},head:"marquee",size:{"ellipses":15,"polygon":40,"":85}},"crop":{build:["constrain","aspect"],vars:{"constrain":"false","aspect":"landscape"},head:"crop",size:58},"text":{build:["fontSize","stroke_text"],vars:{"movement_text":"active","fontSize":90,"kerning":1,"leading":1.2,"stroke_text":3},size:140},"shape":{build:["movement_"+vars.shape,"corner","sides_shape","slope_shape","stroke_"+vars.shape],vars:{"movement_shape":"anchored","stroke_shape":7,"gradient":"fixed","slope_shape":2,"sides_shape":7},head:"shape",size:{"ellipses":130,"polygon":170,"":210}},"pencil":{build:["diameter_pencil","opacity_pencil"],vars:{"movement_pencil":"freedraw","lineJoin":"round","gradient":"absolute","diameter_pencil":3,"flow_pencil":100,"opacity_pencil":100},head:"draw",size:85,glyph:1},"brush":{build:["diameter_brush","hardness_brush","flow_brush","opacity_brush"],vars:{"movement_brush":"freedraw","diameter_brush":10,"hardness_brush":60,"flow_brush":92,"opacity_brush":70},head:"draw",size:165,glyph:1},"calligraphy":{build:["diameter_calligraphy","opacity_calligraphy"],vars:{"movement_calligraphy":"freedraw","lineJoin":"round","gradient":"absolute","diameter_calligraphy":20,"flow_calligraphy":100,"opacity_calligraphy":90},head:"draw",size:80,glyph:1},"spirograph":{build:["inner_radius_spirograph","outer_radius_spirograph","diameter_spirograph","speed_spirograph","resolution_spirograph"],vars:{"inner_radius_spirograph":29,"outer_radius_spirograph":79,"diameter_spirograph":30,"speed_spirograph":100,"resolution_spirograph":364,"type_spirograph":"Hypotrochoid"},head:"spirograph",size:205,glyph:1},"stamp":{build:["rand","br","flow_stamp","opacity_stamp"],vars:{"movement_stamp":"freedraw","flow_stamp":10,"opacity_stamp":100,"rand_min":70,"rand_max":25},size:275,head:"stamp"},"fill":{build:["opacity_fill"],vars:{"movement_fill":"anchored","opacity_fill":70},size:40,head:"fill"},"eraser":{build:["diameter_eraser","hardness_eraser","flow_eraser","opacity_eraser"],vars:{"movement_eraser":"freedraw","diameter_eraser":25,"flow_eraser":90,"hardness_eraser":60,"opacity_eraser":30},size:165,glyph:1},"picker":{size:75}};},forge:function(m){if(!gui_options.modules||m=="shape"){gui_options.modulesObject();}var a=gui_options.modules[m],k="";for(var h in a.vars){if(!vars[h]){var l=a.vars[h];}if(h=="movement_shape"){h="movement_"+vars.shape;}else{if(h=="stroke_shape"){h="stroke_"+vars.shape;}}if(!vars[h]){vars[h]=l;}}if(m=="shape"||m=="marquee"){var j=vars[m];gui_options.resize(a.size[j]?a.size[j]:a.size[""]);}else{gui_options.resize(a.size);}for(var h in a.build){h=a.build[h];var c=h.indexOf("_")!=-1?h.substr(0,h.indexOf("_")):h,f=c.replace("_"," ").replace("line","").replace("rand","diameter min max").replace("font","").replace("marq","").replace("shape","").toLowerCase(),g=(h=="br")?"<br>":gui[cF[h].type].build(f,h,cF[h].val);if(m=="shape"){if((j!="ellipses"&&j!="polygon")||(j=="ellipses"&&h!="corner"&&h!="sides_shape"&&h!="slope_shape")||(j=="polygon"&&h!="slope_shape")){k+=(h=="stroke_ellipses"?"<br>":"")+g;}}else{if(m=="marquee"){if((j!="ellipses"&&j!="polygon")||(j=="polygon"&&h!="slope_marquee")){k+=g;}}else{k+=g;}}}if(m=="fill"||m=="brush"||m=="pencil"||m=="calligraphy"||m=="stamp"){gui_palette.click("fill");}else{if(m=="spirograph"){gui_palette.click("stroke");}}switch(m){case"picker":k='<img src="media/gui/loupe.png" onmousedown="return(noMove())" class="loupe" alt="...">'+'<canvas id="picker" height="106" width="149" style="height: 106px; width: 149px"></canvas>'+'<div class="picker"><div>R<br>G<br>B<br>A</div><div id="picker_hex">0<br>0<br>0<br>0</div></div>'+'<canvas id="picker1x1" height="1" width="1"></canvas>';break;case"stamp":k='<div id="stamp"></div>'+gui.Y.kontrol("stamp")+'<span style="position: relative; top: -6px; border: 0" id="brush_author"></span>'+k;break;case"text":if(!vars.textMessage){vars.textMessage="hello!";}k='<div id="text" style="padding-bottom: 13px">'+' <span style="font-size: 11px; -moz-user-select: none; -khtml-user-select: none; user-select: none; ">MESSAGE</span><br>'+' <input type="text" onmousedown="preventDefault = false;" onkeydown="vars.textMessage=this.value;" onkeyup="vars.textMessage=this.value;" style="width: 90%; font-size: 16px" value="'+vars.textMessage+'">'+"</div>"+k;break;}var j=$("options");$C("TML",j)[0].innerHTML='<span style="-moz-user-select: none; -khtml-user-select: none; user-select: none; ">'+(a.head?gui.menu.build(a.head,cF[a.head].val):m)+"</div>";$C("MM",j)[0].innerHTML='<div class="z" style="display: none; margin-top:1px;">'+k+"</div>";if(m=="stamp"){stamp.reset();}else{if(m=="calligraphy"){co.glyph("media/glyph/Calligraphy/0-live.png");}}if(a.glyph){co.glyph();}if(!$("ioptions").opened){win.tab($("ioptions"),"options");}$C("z",j)[0].style.display="block";},resize:function(h){function g(j){j.style.height=h+"px";}var f=$("options"),b=$C("ML",f)[0],a=$C("MM",f)[0],c=$C("MR",f)[0];g(b);g(c);g(a);$S("options").height=(h+40)+"px";win.r["options"][3]=h+40;}};gui_palette={click:function(a){if(vars.id==a){return;}gui_palette.zindex(a);gui_palette.run(gui_swatch.L2S[vars[vars.id=a]]);},zindex:function(a){var b={"fill":"stroke","stroke":"fill"};function c(f,j,g){var h=$(f).parentNode.style;h.zIndex=g;h.cursor=j;$S(f).cursor=j;}c(a,"default",2);c(b[a],"pointer",1);$("swap").innerHTML=a.substr(0,1).toUpperCase();},current:function(){var j=gui_swatch.L2S,h={"CO":1,"GD":1,"PT":1},c;for(var g in h){c=gui_swatch.n["fill"+g];gui_swatch.n["fill"+g]=gui_swatch.n["stroke"+g];gui_swatch.n["stroke"+g]=c;}var k=(vars.id=="fill"),f=k?"stroke":"fill",c=k?"fill":"stroke",k="";if(vars.fill=="pattern"||vars.stroke=="pattern"){gui_pattern.o[f]=vars[c+"PT"];gui_pattern.o[c]=vars[f+"PT"];gui_pattern.create();}k=vars[f];vars[f]=vars[c];vars[c]=k;k=vars[f+"CO"];vars[f+"CO"]=vars[c+"CO"];vars[c+"CO"]=k;k=vars[f+"GD"];vars[f+"GD"]=vars[c+"GD"];vars[c+"GD"]=k;k=vars[f+"PT"];vars[f+"PT"]=vars[c+"PT"];vars[c+"PT"]=k;gui_palette.update(f);gui_palette.run(j[vars[vars.id]]);},run:function(a){if(a!="GD"){gui_gradient.mk(1);}gui_swatch.cur(a);co.glyph();vars.cache(1);},create:function(a){if(a){vars[vars.id]=a;}gui_palette.update();co.glyph();},update:function(f,a){stamp.preview(stamp.fileNumber,a);var j=f||vars.id,g=$(j),h=g.getContext("2d");h.clearRect(0,0,g.width=34,g.height=23);style(h,"fillStyle",j,{X:0,Y:0},{X:34,Y:23});h.fillRect(0,0,34,23);}};gui_color={"core":function(c,a,b){if(gui_swatch.id=="PT"){gui_swatch.cur("CO");}core.fu(c,a,{fu:core.X,oX:-13.5,X1:0,X2:121,oY:0},b);},"cur":function(h,f,g,c){var a=gui_color[f+"_"][g],h=Math.max(0,h)/121;gui_color[f][g[0]]=(g=="Alpha")?h:Math.round((1-h)*a);gui_color.run(g);if(c=="up"){gui_palette.create();}else{gui_palette.update("",c);}},"pos":function(f,a,b){var c=(b=="Alpha"),g=f[b[0]];g=c?(1-g)*100:g;$S(b+"Cur").left=parseInt((121-(g/gui_color[a+"_"][b])*121)+10)+"px";$(b+"Me").innerHTML=Math.round(c?100-g:g);},"mk":function(){var g="",f=$C("MM","solid")[0];var c={"Hue":"HSV","Saturation":"HSV","Value":"HSV","Red":"RGB","Green":"RGB","Blue":"RGB","Alpha":"RGB"};for(var b in c){var a="gui_color.core('"+b+"Cur',event,function(a,b,m) { gui_color.cur(b.X,'"+c[b]+"','"+b+"',m); })";g+='<div title="'+b.substr(0,1).toUpperCase()+b.substr(1)+'">'+' <div class="west" id="'+b+'T">'+b.substr(0,1).toUpperCase()+"</div>"+' <span class="east" id="'+b+'Me"></span>'+' <div onmousedown="'+a+'; return false;" id="'+b+'Cur" class="cur"></div>'+' <canvas id="'+b+'" onmousedown="'+a+'" height="18" width="120"></canvas><br>'+"</div>";}f.innerHTML='<div class="z">'+g+"</div>";},"run":function(f,a){if(f=="set"){f="Red";}if(a){var a=gui_color.RGB={R:a[0],G:a[1],B:a[2],A:a[3]},q=gui_color.HSV=Color.RGB_HSV(gui_color.RGB);}else{var a=gui_color.RGB,q=gui_color.HSV;}if(gui_color.HSV_[f]){var B=Color.HSV_RGB(q);B.A=a.A;a=gui_color.RGB=B;}else{if(gui_color.RGB_[f]){q=gui_color.HSV=Color.RGB_HSV(a);}}var o={"Hue":[[0,{H:0,S:q.S,V:q.V}],[0.15,{H:300,S:q.S,V:q.V}],[0.3,{H:240,S:q.S,V:q.V}],[0.5,{H:180,S:q.S,V:q.V}],[0.65,{H:120,S:q.S,V:q.V}],[0.85,{H:60,S:q.S,V:q.V}],[1,{H:0,S:q.S,V:q.V}]],"Saturation":[[0,{H:q.H,S:100,V:q.V}],[1,{H:q.H,S:0,V:q.V}]],"Value":[[0,{H:q.H,S:q.S,V:100}],[1,{H:q.H,S:q.S,V:0}]],"Red":[[0,{R:255,G:a.G,B:a.B,A:a.A}],[1,{R:0,G:a.G,B:a.B,A:a.A}]],"Green":[[0,{R:a.R,G:255,B:a.B,A:a.A}],[1,{R:a.R,G:0,B:a.B,A:a.A}]],"Blue":[[0,{R:a.R,G:a.G,B:255,A:a.A}],[1,{R:a.R,G:a.G,B:0,A:a.A}]],"Alpha":[[0,{R:a.R,G:a.G,B:a.B,A:0}],[1,{R:a.R,G:a.G,B:a.B,A:1}]]};for(var p in o){var v=$2D(p),s=v.createLinearGradient(0,0,120,18);v.globalCompositeOperation="copy";for(var n in o[p]){var n=o[p][n],l=n[1];if(gui_color.HSV_[p]){l=Color.HSV_RGB(l);l.A=a.A;}var u=gui_color.mode(l,isNaN(l.A)?1:0);u=u.R+","+u.G+","+u.B+","+u.A;s.addColorStop(n[0],"rgba("+u+")");}v.rect(0,0,120,18);co.style.fill(v,s);if(gui_color.HSV_[p]){gui_color.pos(q,"HSV",p);}else{gui_color.pos(a,"RGB",p);}}var a=gui_color.mode(a);$("HEX").innerHTML=Color.HEX_STRING(a.R<<16|a.G<<8|a.B);if(vars[vars.id]=="solid"){vars[vars.id+"CO"]=[a.R,a.G,a.B,a.A];vars.opacity_fill=a.A*100;if($("opacity_fillCur")&&vars.id=="fill"){$("opacity_fillCur").style.left=parseInt(a.A*110)+"px";$("opacity_fillCurV").innerHTML=parseInt(a.A*100);}}else{if(vars[vars.id]=="gradient"){var z=gui_gradient.o.id.substr(2);vars[vars.id+"GD"][z][1]=[a.R,a.G,a.B,a.A];gui_gradient.run(z,"move");}}},"mode":function(b,a){return(a?b:{R:b.R,G:b.G,B:b.B,A:b.A});},"RGB_":{"Red":255,"Green":255,"Blue":255,"Alpha":100},"HSV_":{"Hue":360,"Saturation":100,"Value":100},"RGB":{"R":255,"G":0,"B":0,"A":1},"HSV":{"H":0,"S":100,"V":100}};gui_gradient={"slide_x":function(h,f,c){var k=vars[vars.id+"GD"],j=k[gui_gradient.o.id.substr(2)];if(N.between(f.Y,0,40)){if(gui_gradient.del){gui_gradient.o.style.display="block";gui_gradient.del="";j[2]=0;}j[0]=Math.round(Math.min(1,Math.max(0,f.X/169))*1000)/1000;$("gPos").innerHTML=Math.round(j[0]*100)+'<span class="small">%</span>';gui_gradient.o.style.left=(Math.max(0,f.X)-5)+"px";}else{if(k.length>2){gui_gradient.o.style.display="none";gui_gradient.del=gui_gradient.o;j[2]=1;}}if(c=="up"&&gui_gradient.del&&k.length>2){gui_gradient.remove();}infc.info(c,"cGD2","gPos");gui_gradient.fill(c);},"slide_y":function(h,f,c){var k=vars[vars.id+"GD"],l=Math.round((1-(f.Y+5)/91)*1000)/1000;$S("gOpacity").top=f.Y+"px";$("gPos").innerHTML=Math.round(l*100)+'<span class="small">%</span>';vars.opacity_fill=l*100;if($("opacity_fillCur")&&vars.id=="fill"){$("opacity_fillCur").style.left=parseInt(l*110)+"px";$("opacity_fillCurV").innerHTML=parseInt(l*100);}for(var j in k){k[j][1][3]=l;}infc.info(c,"cGD2","gPos");gui_gradient.run("false",c);gui_gradient.cs();},"slide_o":function(k,f,g,c){g.X+=c.oX;g.Y+=c.oY;var k=$S("gAngle"),b=132,h=b/2,j=Math.atan2(g.X-h-3,b-g.Y-h-6);gui_gradient.rotate=j;k.left=(Math.abs((Math.sin(j)*h)+h)+30)+"px";k.top=(Math.abs((Math.cos(j)*h)-h)+40)+"px";$("gPos").innerHTML=Math.round((gui_gradient.rotate+(Math.PI*2.5))*(180/Math.PI)%360)+"&deg;";infc.info(f,"cGD2","gPos");gui_gradient.fill(f);},"cur":function(a){if(gui_gradient.o){gui_gradient.o.className="";}a.className="cur";gui_gradient.o=a;},"add":function(b){if(stop){var a=vars[vars.id+"GD"],c=a.length;a[c]=[0,deObject(vars[vars.id+"GD"][gui_gradient.o.id.substr(2)][1])];gui_gradient.mk_x("gd"+c);core.fu("gd"+c,b,{fu:core.X,oX:0,oY:15,X1:0,X2:169},gui_gradient.slide_x);}},"remove":function(a){vars[vars.id+"GD"].splice(gui_gradient.del.id.substr(2),1);gui_gradient.mk_x();},"mk":function(){var a=$C("MM","gradient")[0];a.innerHTML='<div class="z" onmousedown="gui_swatch.toType(\'GD\')">'+' <div onmousedown="core.fu(\'cGD1\',event, {fu:gui_gradient.slide_o, oX:-7, oY:-13}); return false;" id="gAngle" class="blue_dot" title="Angle"></div>'+' <div onmousedown="core.fu(\'cGD1\',event, {fu:core.Y, oX:0, oY:-41, Y1:-5, Y2:86}, gui_gradient.slide_y); return false;" class="blue_slide"><div id="gOpacity" class="blue_dot" title="Opacity"></div></div>'+' <div id="gPos"></div>'+' <canvas id="cGD1" height="169" width="169"></canvas>'+' <canvas id="cGD2" onmousedown="core.fu(\'cGD1\',event, {fu:gui_gradient.slide_o, oX:-7, oY:-13})" height="169" width="169"></canvas>'+' <div class="slide_x" onmousedown="gui_gradient.add(event)"></div>'+"</div>";gui_gradient.mk_x();infc.info_draw("cGD2");if(vars[vars.id]=="gradient"){gui_gradient.cs();}},"mk_x":function(f){var b=vars[vars.id+"GD"],c="";for(var a in b){c+="<div onmousedown=\"gui_gradient.cur(this); gui_gradient.cs(); core.fu('gd"+a+'\',event,{fu:core.X, oX:0, oY:15, X1:0, X2:169}, gui_gradient.slide_x)" id="gd'+a+'" style="left: '+((b[a][0]*169)-5)+'px"><canvas height="7" width="7"></canvas></div>';}$C("slide_x","gradient")[0].innerHTML=c;gui_gradient.cur($(f?f:"gd"+a));gui_gradient.run("false","move");},"run":function(b,a){var f=vars[vars.id+"GD"];function h(g){var j=$T("canvas","gd"+g)[0].getContext("2d");j.clearRect(0,0,7,7);j.rect(0,0,7,7);co.style.fill(j,"rgba("+f[g][1].join(",")+")");}if(isNaN(b)){for(var c in f){h(c);}}else{h(b);}gui_gradient.fill(a);},"fill":function(a){var f=$2D("cGD1"),b=vars[vars.id+"GD"];co.gradient({"X":0,"Y":0},{"X":169,"Y":169},f,b,"fill");f.clearRect(0,0,169,169);f.fillRect(0,0,169,169);if(a=="up"){gui_palette.create();}else{gui_palette.update("",a);}},"cs":function(a){a=vars[vars.id+"GD"][gui_gradient.o.id.substr(2)][1];gui_color.run("set",a);},"rotate":(Math.PI/2)+Math.PI};var gui_pattern={"slide_y":function(g,f,c){var h=(gui_pattern.op[vars.id]=Math.round((1-(f.Y+5)/91)*1000)/1000);$("pPos").innerHTML=Math.round(h*100)+'<span class="small">%</span>';vars.opacity_fill=h*100;if($("opacity_fillCur")&&vars.id=="fill"){$("opacity_fillCur").style.left=parseInt(h*110)+"px";$("opacity_fillCurV").innerHTML=parseInt(h*100);}$S("pOpacity").top=f.Y+"px";infc.info(c,"cPT2","pPos");gui_pattern.create(h,c);if(c=="up"){gui_palette.create();}else{gui_palette.update("",c);}},"mk":function(b){var a=0,c=vars[vars.id+"GD"],g=$C("MM","pattern")[0],f="";g.innerHTML='<div class="z" onmousedown="gui_swatch.toType(\'PT\')">'+' <div onmousedown="core.fu(\'cPT1\',event, {fu:core.Y, oX:0, oY:-41, Y1:-5, Y2:86}, gui_pattern.slide_y); return false;" class="blue_slide"><div id="pOpacity" class="blue_dot" title="Opacity"></div></div>'+' <div id="pPos"></div>'+' <canvas id="cPT"></canvas>'+' <canvas id="cPT1" height="169" width="169"></canvas>'+' <canvas id="cPT2" height="169" width="169"></canvas>'+"</div>";gui_pattern.o[vars.id]=vars[vars.id+"PT"];gui_pattern.fill();infc.info_draw("cPT2",1);gui_palette.update();if(vars[vars.id]=="pattern"){gui_gradient.cs();}gui_pattern.cache("fill");gui_pattern.cache("stroke");},"cache":function(b){var a=vars[b+"PT"];dtx2D.width=a.width;dtx2D.height=a.height;ctx2D.save();ctx2D.globalAlpha=isNaN(a.opacity)?1:a.opacity;ctx2D.drawImage(a,0,0);ctx2D.restore();vars[b+"PT~"]=ctx2D.createPattern(dtx2D,"repeat");},"create":function(g,c){var f=vars[vars.id+"PT"],a={X:f.width,Y:f.height};if(!g){g=gui_pattern.op[vars.id];}f.opacity=g;$("cPT").width=a.X;$("cPT").height=a.Y;gui_pattern.cache(vars.id);gui_pattern.o[vars.id]=$("cPT");gui_pattern.fill(g,0,c);},"fill":function(l,g,f,j){if(!l){l=gui_pattern.op[vars.id];}var h={"X":0,"Y":0},g=g?g:{"X":169,"Y":169},k=$2D(j?j:"cPT1");co.del(k);k.globalCompositeOperation="source-over";k.rect(h.X,h.Y,g.X,g.Y);co.style.fill(k,k.createPattern(vars[vars.id+"PT"],"repeat"));k.globalCompositeOperation="destination-in";k.rect(h.X,h.Y,g.X,g.Y);k.fillStyle="rgba(255,255,255,"+l+")";k.fill();if(f=="up"){gui_palette.create();}else{gui_palette.update("",f);}},"o":{"stroke":new Image(),"fill":new Image()},"op":{"stroke":1,"fill":1},"dir":"media/patterns/"};gui_swatch={"click":function(a){var b=parseInt(a.id.replace(/[a-zA-Z]*/,""));if(gui_swatch.n[vars.id+gui_swatch.id]!=b){if(gui_swatch.id=="PT"){vars[vars.id+gui_swatch.id]=new Image();vars[vars.id+gui_swatch.id].src=vars[gui_swatch.id][b-1].src;}else{vars[vars.id+gui_swatch.id]=deObject(vars[gui_swatch.id][b-1]);}gui_swatch.cur_switch(b);co.glyph();}},"cur":function(b,a){gui.Y.id=b=b||"CO";vars[vars.id]=gui_swatch.r[b][0];function c(g,f,h){$C(g,"swatch")[0].style[f]=h;}if(gui_swatch.id){c(gui_swatch.id,"display","none");c(gui_swatch.id+"menu","cursor","pointer");}c(b,"display","block");c(b+"menu","cursor","default");gui_swatch.pos(gui_swatch.n[vars.id+(gui_swatch.id=b)]);gui_swatch.cur_switch(gui_swatch.n[vars.id+gui_swatch.id],a);co.glyph();},"cur_switch":function(f,c){var a=gui_swatch.n[vars.id+gui_swatch.id];gui_swatch.n[vars.id+gui_swatch.id]=f;if(!c){gui_swatch.run();}if($(gui_swatch.o)){$(gui_swatch.o).className="";gui_swatch.update(a);}$(gui_swatch.o=vars.id+gui_swatch.id+f).className="cur";gui_swatch.update(f);},"pos":function(h){var g=gui.Y,f=Math.ceil(h/7)*7,c=(f-7)-(g.cur[gui_swatch.id]-1);if(c>21||c<0){g.cur[gui_swatch.id]=(f-(c<0?7:28));}g.prev[gui_swatch.id]=0;g.cord(0);g.sw(gui_swatch.n[vars.id+gui_swatch.id]=h);},"add":function(){var a=vars[gui_swatch.id],c=gui_swatch.n[vars.id+gui_swatch.id];var b={"CO":function(f){f=deObject(vars[vars.id+gui_swatch.id]);return(f);},"GD":function(f){f=deObject(vars[vars.id+gui_swatch.id]);return(f);},"PT":function(f){f=new Image();f[f.length-1].src=vars[vars.id+gui_swatch.id].src;return(f);}};a.splice(c,0,b[gui_swatch.id](a));vars[vars.id+gui_swatch.id]=a[c];gui.Y.kontrol_update(gui_swatch.id);gui_swatch.pos(c+1);},"remove":function(){if(vars[gui_swatch.id].length>1){var a=vars[gui_swatch.id],b=gui_swatch.n[vars.id+gui_swatch.id];a.splice(b-1,1);vars[vars.id+gui_swatch.id]=a[(b=Math.min(b,a.length))-1];gui_swatch.pos(b);gui_swatch.run();gui.Y.kontrol_update(gui_swatch.id);}},author:function(b){var b=b||gui_swatch.id,a=Resources[b][vars[b+"*"]]||"";if(a){return'<i>by:&nbsp; <a href="'+a.url+'" target="_blank">'+a.name+"</a></i>";}else{return"";}},"mk":function(){var g="";gui_swatch.set={};for(var f in gui_swatch.r){var a=0;gui_swatch.set[f]={};for(var b in Q[f]){gui_swatch.set[f][a++]=b;}}for(var f in gui_swatch.r){var c='<div id="author_'+f+'" class="author">'+gui_swatch.author(f)+"</div>";g+='<div class="menu '+f+'menu" onmousedown="gui_swatch.cur(\''+f+"'); vars.cache(1);\">"+" <div>"+gui_swatch.r[f][0].toUpperCase()+"S</div>"+' <span class="east">'+' <div style="padding: 2px 0 0; font-size: 12px" id="'+f+'_author"></div>'+" </span>"+"</div>"+'<div class="'+f+'" style="display: none">'+' <div style="position: absolute; left: 19px; top: '+(42+gui_swatch.r[f][2])+'px;">'+gui.menu.build(f+"*",gui_swatch.set[f])+"</div>"+' <div id="'+f+'" class="squares"></div>'+gui.Y.kontrol(f,gui_swatch.r[f][2]+49)+"<br>"+"</div>";}$C("MM","swatch")[0].innerHTML='<div class="z">'+g+"</div>";gui_swatch.cur(gui_swatch.id=gui_swatch.L2S[vars[vars.id]]);},"run":function(){({"CO":function(){gui_color.run("set",vars[vars.id+gui_swatch.id]);gui_palette.update();},"GD":function(){gui_gradient.mk_x();gui_gradient.cs();$S("gOpacity").top="-5px";},"PT":function(){gui_pattern.o[vars.id]=vars[vars.id+"PT"];gui_pattern.create();}})[gui_swatch.id]();},"update":function(a,c){var f=vars[gui_swatch.id];var h={"CO":function(j,k){k.fillStyle="rgba("+j[a-1].join(",")+")";k.fill();},"GD":function(j,k){co.gradient({"X":3,"Y":3},{"X":13,"Y":13},k,j[a-1],"fill",1);},"PT":function(j,k){k.fillStyle=k.createPattern(j[a-1],"repeat");k.fill();}};function g(l){var m=$(vars.id+gui_swatch.id+l);if(m){var n=$2D(vars.id+gui_swatch.id+l);n.clearRect(0,0,16,16);if(gui_swatch.n[vars.id+gui_swatch.id]==l&&!c){var k={"X":3,"Y":3},j={"X":13,"Y":13};n.beginPath();co.circle(k,j,n);n.strokeStyle="rgba(255,255,255,1)";n.lineWidth=1.5;n.stroke();h[gui_swatch.id](f,n);n.beginPath();}else{n.rect(0,0,16,16);h[gui_swatch.id](f,n);}}}if(isNaN(a)){for(var a=gui.Y.cur[gui_swatch.id],b=1;a<=f.length&&b<=28;a++,b++){g(a);}}else{g(a);}},toType:function(a){if(gui_swatch.id!=a){gui_swatch.cur(a,1);gui_palette.create();}},"L2S":{"solid":"CO","gradient":"GD","pattern":"PT"},"S2L":{"CO":"solid","GD":"gradient","PT":"pattern"},"S2N":{"CO":1,"GD":2,"PT":3},"r":{"CO":["solid",-13,6],"GD":["gradient",16,25],"PT":["pattern",25,44]},"n":{"fillCO":1,"fillGD":1,"fillPT":1,"strokeCO":2,"strokeGD":2,"strokePT":2},"o":""};infc={"info":function(a,g,b){if(a=="down"||a=="up"){var h=$2D(g),f={"down":["source-over",0.4,0.2,0],"up":["destination-out",1,1,1]}[a];h.beginPath();h.globalCompositeOperation=f[0];co.circle({"X":35+f[3],"Y":20+f[3]},{"X":-15-f[3],"Y":-30-f[3]},h);h.lineWidth=1;co.style.fill(h,"rgba(0,0,0,"+f[1]+")");co.style.stroke(h,"rgba(0,0,0,"+f[2]+")");$S(b).display=(a=="down")?"block":"none";}},"info_draw":function(j,l){var m=$2D(j),g={"X":37,"Y":37},f={"X":131,"Y":131};function k(o,c,p,n){m.beginPath();m.lineWidth=n;co.circle(o,c,m);co.style.stroke(m,"rgba("+p+")");}function h(o,c,p,n){m.beginPath();m.lineWidth=n;m.moveTo(o.X,o.Y);m.lineTo(c.X,c.Y);co.style.stroke(m,"rgba("+p+")");}if(!l){k(g,f,[0,0,0,1],8);m.globalCompositeOperation="source-out";k({"X":g.X+3,"Y":g.Y+3},{"X":f.X+3,"Y":f.Y+3},[0,0,0,0.3],2);m.globalCompositeOperation="source-over";k(g,f,[128,128,128,0.4],8);k({"X":g.X,"Y":g.Y+1},{"X":f.X,"Y":f.Y+1},[255,255,255,0.2],1);k(g,f,[33,33,33,1],1);h({X:84,Y:14},{X:84,Y:7},[0,0,0,0.4],2);h({X:85,Y:14},{X:85,Y:7},[255,255,255,0.4],1);h({X:85,Y:154},{X:85,Y:161},[0,0,0,0.4],2);h({X:85,Y:154},{X:84,Y:161},[255,255,255,0.4],1);h({X:154,Y:85},{X:161,Y:85},[0,0,0,0.4],2);h({X:154,Y:86},{X:161,Y:86},[255,255,255,0.4],1);h({X:14,Y:86},{X:7,Y:86},[0,0,0,0.4],2);h({X:14,Y:85},{X:7,Y:85},[255,255,255,0.4],1);}h({X:87,Y:35},{X:87,Y:135},[0,0,0,0.7],1);h({X:84,Y:35},{X:84,Y:135},[128,128,128,0.4],8);h({X:84,Y:35},{X:84,Y:135},[0,0,0,1],1);h({X:85,Y:35},{X:85,Y:135},[255,255,255,0.2],1);m.closePath();},"opacity":function(h,a,l){gui_palette.click("fill");var k=Math.round((vars[h]=Math.min(a[1],(Math.max(0,l)/110)*100)));if($(h+"CurV")){$(h+"CurV").innerHTML=Math.round(k);}switch(vars["fill"]){case"pattern":gui_pattern.create(k/100);$S("pOpacity").top=((1-(k/100))*91-5)+"px";gui_pattern.op["fill"]=Math.round((k/100)*1000)/1000;break;case"gradient":$S("gOpacity").top=Math.round((1-(k/100))*91-5)+"px";var f=vars["fill"+"GD"];for(var b in f){f[b][1][3]=k/100;}gui_gradient.run("false","move");break;case"solid":var j=vars["fill"+gui_swatch.id];j[3]=k/100;gui_color.run("set",j);gui_palette.update();break;}}};(function(){E={"k":0,"run":0,"sh":0,"sh_var":0};key={"k":function(a){if(typeof(a)=="undefined"){var a=event;}if(typeof(a.shiftKey)=="undefined"){a.shiftKey=0;}E.sh=E.sh_var=a.shiftKey?1:0;E.ctrl=a.ctrlKey?1:0;return(key.code(a));},"active":function(){if(vars.type=="marquee"){marquee.core(oXY,cXY,"move");}else{if(vars.type=="shape"){draw.shape(oXY,cXY,"move");}}},"block":function(b,a){var c={8:"x",13:"\n",32:"space",46:"x",191:"/",222:"'",37:"left",38:"up",39:"right",40:"down"};if(a in c){b.preventDefault();return false;}},"code":function(a){return !(agent("msie")||agent("opera"))?a.keyCode:a.which;},"press":function(c,g,f,b){function a(h){return function(j){g({X:h.X*j,Y:h.Y*j});};}window.blur();setTimeout(window.focus,0);E.k=c;key.up=b;key.down=f;key.move={37:a({X:-1,Y:0}),38:a({X:0,Y:-1}),39:a({X:1,Y:0}),40:a({X:0,Y:1})}[c];setTimeout("key.run("+(E.run=getTime())+")",0);},"run":function(a){if(E.k&&E.run==a){if(key.down){key.down();key.down="";}key.move(E.sh_var?10:1);setTimeout("key.run("+a+")",100);}else{if(!E.k&&key.up){key.up();}}}};document.onkeydown=function(c){if(typeof(c)=="undefined"){var c=event;}var a=key.k(c),b={};if(vars.type=="marquee"&&E.ctrl&&a==65){marquee.core({"X":1,"Y":1},{"X":canvas.W-1,"Y":canvas.H-1},"up");}else{if(c.ctrlKey&&E.sh&&a==90&&(b=canvas.history_r)&&b.r[b.n+1]<=canvas.history_n&&(b.n+1)<=b.z){canvas.history_set(b.n++);}else{if(c.ctrlKey&&!E.sh&&a==90&&(b=canvas.history_r)&&b.r[b.n-1]>=0&&(b.n-1)>=b.a){canvas.history_set(b.n--);}else{if(mXY!="up"&&cXY&&cXY.X){key.active();}else{if(marquee.on||marquee.mv){if(a==8||a==46){marquee.del();}else{if(a==27){marquee.reset();}else{if(a>=37&a<=40){marquee.on=0;window.clearInterval(marqueeID);marquee.mv=1;key.press(a,marquee.move,null,function(){marquee.run();marquee.mv=0;});}}}}else{if(vars.type=="crop"){if(bXY.X&&a==13){crop.apply(aXY,bXY);}else{if(E.ctrl&&a==65){crop.core({"X":0,"Y":0},{"X":canvas.W,"Y":canvas.H},"up");}else{if(a==27){crop.core({"X":0,"Y":0},{"X":0,"Y":0},"up");}else{if(a>=37&&a<=40&&bXY.X){key.press(a,crop.move);}}}}}}}}}}if(vars.type!="text"){key.block(c,a);}};document.onkeypress=function(b){if(typeof(b)=="undefined"){var b=event;}var a=key.k(b);if(vars.type!="text"){key.block(b,a);}};document.onkeyup=function(b){if(typeof(b)=="undefined"){var b=event;}var a=key.k(b);if(a==E.k){E.k=0;}if(mXY!="up"&&oXY.X&&cXY.X){key.active();}};})();marquee={"move":function(a){var f=marquee.shapes;for(var c in f){c=f[c];if(c.T=="lasso"){for(var b in c.R){c.R[b].X+=a.X;c.R[b].Y+=a.Y;}}else{c.A.X+=a.X;c.A.Y+=a.Y;c.Z.X+=a.X;c.Z.Y+=a.Y;}}marquee.dash(ants[ants_n]);},"del":function(a){a=$2D("ctx_temp");a.globalCompositeOperation="source-over";marquee.draw(a);co.style.fill(a,"rgba(0,0,0,1)");a=$2D("ctx_box");a.globalCompositeOperation="destination-out";a.drawImage($("ctx_temp"),0,0,canvas.W,canvas.H);a.globalCompositeOperation="source-over";co.del("ctx_temp");canvas.history_set("delete selection");},"core":function(s,q,h,n){var p=$2D("ctx_marquee");p.beginPath();p.globalCompositeOperation="source-over";if(!E.sh_var&&mouse.id=="move"){var f=marquee.shapes,g=marquee.prev;if(!g){g=s;}var t={X:g.X-q.X,Y:g.Y-q.Y};if(h=="down"){marquee.on=0;window.clearInterval(marqueeID);}for(var l in f){l=f[l];if(l.T=="lasso"){for(var k in l.R){l.R[k].X-=t.X;l.R[k].Y-=t.Y;}}else{l.A.X-=t.X;l.A.Y-=t.Y;l.Z.X-=t.X;l.Z.Y-=t.Y;}}marquee.dash(ants[ants_n]);marquee.prev=q;if(h=="up"){marquee.run();marquee.prev="";marquee.cursor();}}else{if(h!="down"&&(!n||mouse.id||mouse.moved==1||(getTime()-core.time)<=1250)){if(!mouse.down&&n){marquee.reset(q);mouse.down=1;if(marquee.shape>0){E.sh=0;}}else{moXY=s;mcXY=q;mouse.moved=1;}if(Math.abs(s.X-q.X)>1&&Math.abs(s.Y-q.Y)>1){if(vars.marquee=="lasso"){marquee.r[marquee.i++]=q;}marquee.cache(marquee.shape);if(h=="up"){mouse.reset();if(mouse.moveCheck(s,q)){marquee.reset();}else{marquee.cache(marquee.shape++);marquee.run();marquee.cursor();}}}marquee.dash(ants[ants_n],p,1);}else{if(h=="down"&&E.sh_var&&marquee.shapes.length){marquee.dash(ants[ants_n]);}else{marquee.reset();}}}},"draw":function(k,g,a){var h=marquee.shapes,j={sides:vars.sides_marquee,slope:vars.slope_marquee},f=false;for(var b in h){var b=h[b];if(Math.abs(b.A.X-b.Z.X)>1&&Math.abs(b.A.Y-b.Z.Y)>1){if(b.sides){vars.sides_marquee=b.sides;}if(b.slope){vars.slope_marquee=b.slope;}if(b.T=="lasso"){co.path(k,b.R);if(!g){k.closePath();}}else{if(b.T=="ellipses"){co.ellipses(b.A,b.Z,k,b.sh);}else{if(b.T=="polygon"){co.polygon(b.A,b.Z,k,b.sh);}else{if(b.T=="star"){co.star(b.A,b.Z,k,b.sh);}else{if(b.T=="burst"){co.burst(b.A,b.Z,k,b.sh);}else{if(b.T=="gear"){co.gear(b.A,b.Z,k,b.sh);}}}}}}f=true;}}if(a&&f){k.strokeStyle=a.v;k.stroke();}vars.sides_marquee=j.sides;vars.slope_marquee=j.slope;},"cursor":function(){var a=$2D("ctx_mouse");co.del(a);a.beginPath();marquee.draw(a);a.lineWidth=2;a.strokeStyle="rgba(0,0,0,1)";a.stroke();a.fillStyle="rgba(0,0,0,1)";a.fill();if(!mouse.area){mouse.area={};}mouse.area["000000FF"]={"id":"move","cursor":"move"};mouse.fu=function(){return(E.sh_var?false:true);};},"cache":function(f){var c=marquee.shapes,b=E.sh?1:0,a=E.ctrl?1:0;if(vars.marquee=="lasso"){c[marquee.shape=0]={"T":vars.marquee,"R":marquee.r,"sh":b,"ctrl":a};}else{c[f]={"T":vars.marquee,"A":moXY,"Z":mcXY,"sides":vars["sides_marquee"],"slope":vars["slope_marquee"],"sh":b,"ctrl":a};}},"dash":function(f,g,b){var g=g?g:$2D("ctx_marquee"),f=f?f:ants[ants_n=(ants_n+1)%4],a=(b&&vars.marquee=="lasso");g.globalCompositeOperation="source-over";g.clearRect(0,0,canvas.W,canvas.H);g.lineWidth=a?0.5:1;marquee.draw(g,b,{"o":"stroke","v":f});if(!a){g.globalCompositeOperation="destination-out";co.style.fill(g,"rgba(0,0,0,1)");}},"run":function(a,b){if(!b){E.run=(a=getTime());marquee.on=1;marquee.ghost=1;}},"reset":function(a,b){a=a?a:"";E.run=0;marquee.r="";moXY=a;mcXY=a;marquee.on=0;window.clearInterval(marqueeID);marquee.ghost=0;marquee.r=[];marquee.i=0;if(!E.sh_var||!marquee.shapes||b){marquee.shapes=[];marquee.shape=0;}$2D("ctx_marquee").clearRect(0,0,canvas.W,canvas.H);$2D("ctx_temp").clearRect(0,0,canvas.W,canvas.H);marquee.cursor();},"shapes":[]};picker={"core":function(t,q,k){var o=$2D("picker"),u=129,l=96,j=$2D("ctx_box").getImageData(Math.max(0,t.X-1),Math.max(0,t.Y-1),1,1),g=j.data,v=$2D("picker1x1");v.clearRect(0,0,1,1);v.putImageData(j,0,0);g[3]=parseInt(g[3]/255*100);$("picker_hex").innerHTML=g[0]+"<br>"+g[1]+"<br>"+g[2]+"<br>"+g[3];o.clearRect(0,0,u+20,l);o.globalCompositeOperation="source-over";var s=t.X-7,p=t.Y-3,f=(s<0?Math.abs(s+1):0)*10,n=(p<0?Math.abs(p+1):0)*10;o.drawImage($("ctx_box"),Math.max(0,s),Math.max(0,p),u/10,l/10,20+f,n,u,l);o.globalCompositeOperation="destination-in";co.circle({"X":45,"Y":-7},{"X":u,"Y":u-58},o);o.fill();if(k=="down"){g[3]=g[3]/100;gui_color.run("set",g);gui_palette.update();}}};mouse={"cursor":function(j,f){var b=mouse.area;if(b){var m=XY(j);var k=win_size.LT();m.X-=abPos(f).X+k.L;m.Y-=abPos(f).Y+k.T;var c=function(){var a=mouse.id.split("."),o=parseInt(a[0]);return({"n":o,"id":a[1],"num":!isNaN(o)});};function l(B,u){$S("cBound").cursor=B;$("cZoom").innerHTML=mouse.id=u;var t=$2D("ctx_active"),p=c();co.del(t);if(p.id&&p.id!="A"){var a=path.r[p.n+1],s=path.O2R,z=s[a[0]][p.id];if(z){t.beginPath();t.drawImage(path[p.id=="P"?"point_select":"node_select"],0,0,7,7,Math.round(a[z]-4),Math.round(a[z+1]-4),7,7);t.closePath();}}}var f=$2D("ctx_mouse").getImageData(m.X,m.Y,1,1).data,g=(f[0]<<24|f[1]<<16|f[2]<<8|f[3])>>>0,h="";if(g!="00000000"&&mouse.fu()){if((h=b[g])&&mouse.id!=h.id){l(h.cursor,h.id);}}else{if(mouse.id){l("crosshair","");}}}},"draw":function(f){var j=$2D("ctx_mouse"),h=N.rand;co.del(j);mouse.area={};for(var b in f){var g=[h(255),h(255),h(255),255],a=f[b];j.beginPath();if(!a[2]){co.rectangle(a[0],a[1],j);}else{if(a[2]=="ellipses"){co.ellipses(a[0],a[1],j);}else{if(a[2]=="star"){co.star(a[0],a[1],j);}else{if(a[2]=="burst"){co.burst(a[0],a[1],j);}else{if(a[2]=="gear"){co.gear(a[0],a[1],j);}else{if(a[2]=="path"){path.draw(j);}}}}}}j.lineWidth=2.5;j.strokeStyle="rgba("+g+")";j.stroke();j.fillStyle="rgba("+g+")";j.fill();mouse.area[(g[0]<<24|g[1]<<16|g[2]<<8|g[3])>>>0]={"id":b,"cursor":a[3]?f[b][3]:b};}},"moveCheck":function(f,c){var g=getTime()-core.time;return(Math.abs(f.X-c.X)<=5||Math.abs(f.Y-c.Y)<=5||(mouse.area&&!mouse.id&&g<=125));},"reset":function(){mouse.down=0;mouse.moved=0;}};crop={"move":function(a){mouse.id="move";var c=function(h,j){return({X:h.X+(!isNaN(j)?j:j.X),Y:h.Y+(!isNaN(j)?j:j.Y)});};aXY=c(aXY,a);bXY=c(bXY,a);var a=Math.abs(aXY.X-bXY.X),g=Math.abs(aXY.Y-bXY.Y),b=canvas.W,f=canvas.H;if(aXY.X<0){aXY.X=0;bXY.X=a;}else{if(bXY.X>b){aXY.X=b-a;bXY.X=b;}}if(aXY.Y<0){aXY.Y=0;bXY.Y=g;}else{if(bXY.Y>f){aXY.Y=f-g;bXY.Y=f;}}crop.core(aXY,bXY,"up");},"click":function(){if(vars.type=="crop"){var a=$T("div",$("constrain_check"))[0].className;if(crop.force(vars.crop)||!a){var c=$C("cur","aspect_radio");if(c.length>0){c[0].className="";}$S("aspect_radio").opacity=0.6;gui.menu.constrain=String(vars.aspect);vars.aspect="landscape";}else{if(a){var b=gui.menu;if(b.constrain){vars.aspect=String(b.constrain);b.constrain="";}$T("div",$("aspect_radio"))[vars.aspect=="portrait"?1:0].className="cur";$S("aspect_radio").opacity=1;}}if(!isNaN(aXY.X)&&!isNaN(bXY.X)){if(vars.constrain=="true"){crop.aspect(aXY,bXY);crop.transform(aXY,bXY);}crop.core(aXY,bXY,"up");}}},"core":function(t,q,k,n){if(k!="down"&&(!n||mouse.id||mouse.moved==1||(getTime()-core.time)<=1250)){if(!mouse.down&&n){if(!mouse.id){crop.reset();}mouse.down=1;}else{mouse.moved=1;}var o=$2D("ctx_temp");x={X:t.X,Y:t.Y};t=transform.xy(t);transform(t,q,k,n);var j=t.X+0.5,g=q.X-0.5,s=t.Y+0.5,p=q.Y-0.5;o.lineWidth=1;o.beginPath();o.globalCompositeOperation="copy";o.rect(0,0,canvas.W,canvas.H);o.fillStyle="rgba(0,0,0,0.5)";o.fill();o.beginPath();o.globalCompositeOperation="destination-out";o.rect(t.X,t.Y,q.X-t.X,q.Y-t.Y);o.fillStyle="rgba(0,0,0,1)";o.fill();o.beginPath();o.globalCompositeOperation="source-over";o.rect(j-1,s-1,g-j+2,p-s+2);o.strokeStyle="rgba(0,0,0,0.5)";o.stroke();o.beginPath();o.rect(j,s,g-j,p-s);if(k!="up"){o.moveTo(((g-j)/3)+j,s);o.lineTo(((g-j)/3)+j,p);o.moveTo(((g-j)/3*2)+j,s);o.lineTo(((g-j)/3*2)+j,p);o.moveTo(j,((p-s)/3)+s);o.lineTo(g,((p-s)/3)+s);o.moveTo(j,((p-s)/3*2)+s);o.lineTo(g,((p-s)/3*2)+s);}o.strokeStyle="rgba(255,255,255,0.5)";o.stroke();o.beginPath();var f=[{X:j,Y:s},{X:j+8,Y:s+8}],u=[{X:g-8,Y:s},{X:g,Y:s+8}],l=[{X:j,Y:p-8},{X:j+8,Y:p}],h=[{X:g-8,Y:p-8},{X:g,Y:p}];if(Math.abs(j-g)>33&&Math.abs(s-p)>23){co.rectangle({X:(g+j)/2-4,Y:s},{X:(g+j)/2+4,Y:s+8},o);co.rectangle({X:(g+j)/2-4,Y:p-8},{X:(g+j)/2+4,Y:p},o);}if(Math.abs(s-p)>33&&Math.abs(j-g)>23){co.rectangle({X:g-8,Y:(p+s)/2-4},{X:g,Y:(p+s)/2+4},o);co.rectangle({X:j,Y:(p+s)/2-4},{X:j+8,Y:(p+s)/2+4},o);}if(Math.abs(j-g)>23&&Math.abs(s-p)>23){co.rectangle(f[0],f[1],o);co.rectangle(u[0],u[1],o);co.rectangle(h[0],h[1],o);co.rectangle(l[0],l[1],o);}o.fillStyle="rgba(100,100,100,0.8)";o.fill();o.strokeStyle="rgba(255,255,255,0.5)";o.stroke();if(k=="up"){mouse.reset();if(mouse.moveCheck(t,q)){crop.reset();}else{aXY=t;bXY=q;mouse.fu=function(){return(true);};mouse.draw({"move":[t,q],"n-resize":[{X:j+8,Y:s},{X:g-8,Y:s+8}],"s-resize":[{X:j+8,Y:p-8},{X:g-8,Y:p}],"e-resize":[{X:g-8,Y:s+8},{X:g,Y:p-8}],"w-resize":[{X:j,Y:s+8},{X:j+8,Y:p-8}],"nw-resize":[f[0],f[1]],"ne-resize":[u[0],u[1]],"se-resize":[h[0],h[1]],"sw-resize":[l[0],l[1]]});}}}},"aspect":function(f,c){if((Math.abs(f.X-c.X)>Math.abs(f.Y-c.Y)?"landscape":"portrait")!=vars.aspect){crop.XY(f,c,{X:Math.abs((c.Y-f.Y)*0.5),Y:Math.abs((c.X-f.X)*0.5)});crop.overflow(f,c);}},"constrain":function(f,c){var g=crop.ratio[gui.menu.key.crop];var h=(vars.aspect=="portrait")?{A:g[1]/g[0],B:g[0]/g[1]}:{A:g[0]/g[1],B:g[1]/g[0]};if(mouse.id=="n-resize"||mouse.id=="s-resize"){if((c.X-f.X>0&&c.Y-f.Y>0)||(c.X-f.X<0&&c.Y-f.Y<0)){c.X=f.X+(c.Y-f.Y)*h.B;}else{c.X=f.X-(c.Y-f.Y)*h.B;}if(c.X>canvas.W){c.X=canvas.W/c.X*c.X;if(c.Y<f.Y){c.Y=f.Y-(c.X-f.X)*h.A;}else{c.Y=f.Y+(c.X-f.X)*h.A;}}else{if(f.X<0){f.X=0;if(c.Y>f.Y){c.Y=f.Y+(c.X-f.X)*h.A;}else{c.Y=f.Y-(c.X-f.X)*h.A;}}}c.X=Math.round(c.X);c.Y=Math.round(c.Y);}else{if((c.X-f.X>0&&c.Y-f.Y>0)||(c.X-f.X<0&&c.Y-f.Y<0)){c.Y=f.Y+(c.X-f.X)*h.A;}else{c.Y=f.Y-(c.X-f.X)*h.A;}if(c.Y>canvas.H){c.Y=canvas.H/c.Y*c.Y;if(c.X<f.X){c.X=f.X-(c.Y-f.Y)*h.B;}else{c.X=f.X+(c.Y-f.Y)*h.B;}}else{if(c.Y<0){c.Y=0;if(c.X>f.X){c.X=f.X-(c.Y-f.Y)*h.B;}else{c.X=f.X+(c.Y-f.Y)*h.B;}}}c.X=Math.round(c.X);c.Y=Math.round(c.Y);}},"overflow":function(m,l){var n=l.X-m.X,j=l.Y-m.Y,c=j/n;var k=m.Y<0,g=l.Y>canvas.H,o=l.X>canvas.W,f=m.X<0;if(k||g){if(k){j+=m.Y;m.Y=0;}if(g){j+=canvas.H-l.Y-1;l.Y=canvas.H;}n=j/c;}if(o||f){if(f){n+=m.X;m.X=0;}if(o){n+=canvas.W-l.X-1;l.X=canvas.W;}j=n*c;}crop.XY(m,l,{X:n/2,Y:j/2});},"transform":function(g,c){var m=crop.ratio[gui.menu.key.crop],j=m[0]/m[1];var f=Math.abs(c.X-g.X),l=Math.abs(c.Y-g.Y),k=l/f;if((k<1&&j>1)||(k>1&&j<1)){j=1/j;}f=Math.sqrt((1/j)*(k*f*f));crop.XY(g,c,{X:f/2,Y:(j*f)/2});crop.overflow(g,c);},"XY":function(g,f,h){var j={X:((f.X-g.X)*0.5)+g.X,Y:((f.Y-g.Y)*0.5)+g.Y};g.X=Math.round(j.X-h.X);g.Y=Math.round(j.Y-h.Y);f.X=Math.round(j.X+h.X);f.Y=Math.round(j.Y+h.Y);},"apply":function(j,h){var k=$2D("ctx_temp"),g={W:canvas.W,H:canvas.H};co.del(k);var f=[Math.max(j.X,h.X),Math.max(j.Y,h.Y),Math.min(j.X,h.X),Math.min(j.Y,h.Y)];k.drawImage($("ctx_box"),f[2],f[3],f[0]-f[2],f[1]-f[3],0,0,f[0]-f[2],f[1]-f[3]);co.del("ctx_box");co.del("ctx_marquee");canvas.W=f[0]-f[2];canvas.H=f[1]-f[3];$("ctx_box").width=canvas.W;$("ctx_box").height=canvas.H;$2D("ctx_box").drawImage($("ctx_temp"),0,0,g.W,g.H);crop.resize();canvas.history_set();},"resize":function(){co.del("ctx_temp");var b=canvas.W,g=canvas.H,m=$C("MM","canvas")[0].style;var a=(parseInt(m.width)-canvas.W)/2,f=(parseInt(m.height)-canvas.H)/2;function k(h){$(h).width=b;$(h).height=g;$S(h).left=a+"px";$S(h).top=f+"px";}$S("ctx_box").left=a+"px";$S("ctx_box").top=f+"px";$S("cBound").cursor="crosshair";mouse.id="";aXY={};bXY={};mouse.area="";var j=["ctx_temp","ctx_marquee","ctx_active","ctx_mouse","ctx_filter"];for(var c in j){k(j[c]);}},"force":function(v){eval("var r={'Display ("+screen.width+"x"+screen.height+")':1,'Original ("+canvas.W+"x"+canvas.H+")':1,'4x3 (DVD)':1,'16x9 (HD)':1}");return(r[v]);},"ratio_mk":function(){crop.ratio={"Display":[screen.height,screen.width],"Original":[canvas.H,canvas.W],"2x3":[2,3],"3x5":[3,5],"4x3":[4,3],"4x6":[4,6],"5x7":[5,7],"8x10":[8,10],"16x9":[9,16],"16x20":[16,20],"20x30":[20,30],"Square":[1,1]};},"reset":function(){$2D("ctx_temp").clearRect(0,0,canvas.W,canvas.H);$S("cBound").cursor="crosshair";mouse.id="";aXY={};bXY={};mouse.area="";}};transform={};transXY={X:0,Y:0};transform=function(q,p,j,n){if(n){var g=transXY;function B(a){transXY={X:0,Y:0};$S("cBound").cursor=mouse.id=a;co.core(n);}if(mouse.id=="n-resize"){q.X=aXY.X;q.Y=bXY.Y;p.X=bXY.X;p.Y=Math.max(0,aXY.Y+(p.Y-oXY.Y));if(q.Y<p.Y){var u=bXY;bXY={X:bXY.X,Y:aXY.Y-g.Y};aXY={X:aXY.X,Y:u.Y};B("s-resize");}}else{if(mouse.id=="ne-resize"){q.X=aXY.X;q.Y=bXY.Y;p.X=Math.min(canvas.W,bXY.X+(p.X-oXY.X));p.Y=Math.max(0,aXY.Y+(p.Y-oXY.Y));if(q.Y<p.Y){var u=bXY;bXY={X:bXY.X-g.X,Y:aXY.Y-g.Y};aXY={X:aXY.X,Y:u.Y};B("se-resize");}else{if(q.X>p.X){var u=bXY;bXY={X:aXY.X,Y:bXY.Y};aXY={X:u.X-g.X,Y:aXY.Y-g.Y};B("nw-resize");}}}else{if(mouse.id=="e-resize"){q.X=aXY.X;q.Y=aXY.Y;p.X=Math.min(canvas.W,bXY.X+(p.X-oXY.X));p.Y=bXY.Y;if(q.X>p.X){var u=bXY;bXY={X:aXY.X,Y:bXY.Y};aXY={X:u.X-g.X,Y:aXY.Y};B("w-resize");}}else{if(mouse.id=="se-resize"){q.X=aXY.X;q.Y=aXY.Y;p.X=Math.min(canvas.W,bXY.X+(p.X-oXY.X));p.Y=Math.min(canvas.H,bXY.Y+(p.Y-oXY.Y));if(q.Y>p.Y){var u=bXY;bXY={X:bXY.X,Y:aXY.Y};aXY={X:aXY.X,Y:u.Y-g.Y};B("ne-resize");}else{if(q.X>p.X){var u=bXY;bXY={X:aXY.X,Y:bXY.Y};aXY={X:u.X-g.X,Y:aXY.Y};B("sw-resize");}}}else{if(mouse.id=="s-resize"){q.X=aXY.X;q.Y=aXY.Y;p.X=bXY.X;p.Y=Math.min(canvas.H,bXY.Y+(p.Y-oXY.Y));if(q.Y>p.Y){var u=bXY;bXY={X:bXY.X,Y:aXY.Y};aXY={X:aXY.X,Y:u.Y-g.Y};B("n-resize");}}else{if(mouse.id=="sw-resize"){q.X=bXY.X;q.Y=aXY.Y;p.X=Math.max(0,aXY.X+(p.X-oXY.X));p.Y=Math.min(canvas.H,bXY.Y+(p.Y-oXY.Y));if(q.Y>p.Y){var u=bXY;bXY={X:bXY.X,Y:aXY.Y};aXY={X:aXY.X-g.X,Y:u.Y-g.Y};B("nw-resize");}else{if(q.X<p.X){var u=bXY;bXY={X:aXY.X-g.X,Y:bXY.Y-g.Y};aXY={X:u.X,Y:aXY.Y};B("se-resize");}}}else{if(mouse.id=="w-resize"){q.X=bXY.X;q.Y=aXY.Y;p.X=Math.max(0,aXY.X+(p.X-oXY.X));p.Y=bXY.Y;if(q.X<p.X){var u=bXY;bXY={X:aXY.X-g.X,Y:bXY.Y};aXY={X:u.X,Y:aXY.Y};B("e-resize");}}else{if(mouse.id=="nw-resize"){q.X=bXY.X;q.Y=bXY.Y;p.X=Math.max(0,aXY.X+(p.X-oXY.X));p.Y=Math.max(0,aXY.Y+(p.Y-oXY.Y));if(q.Y<p.Y){var u=bXY;bXY={X:bXY.X-g.X,Y:aXY.Y-g.Y};aXY={X:aXY.X,Y:u.Y};B("sw-resize");}else{if(q.X<p.X){var u=bXY;bXY={X:aXY.X-g.X,Y:bXY.Y};aXY={X:u.X,Y:aXY.Y};B("ne-resize");}}}else{if(mouse.id=="move"){var h=bXY.X-aXY.X,s=bXY.Y-aXY.Y;var l=Math.max(0,aXY.X+(p.X-oXY.X)),f=Math.max(0,aXY.Y+(p.Y-oXY.Y));var k=l-Math.max(0,l+h-canvas.W),c=f-Math.max(0,f+s-canvas.H);q.X=k;q.Y=c;p.X=h+k;p.Y=s+c;}else{p.X=Math.min(canvas.W,Math.max(0,p.X));p.Y=Math.min(canvas.H,Math.max(0,p.Y));}}}}}}}}}}if(vars.constrain=="true"){crop.constrain(q,p);}if(j=="down"){transXY={X:p.X-oXY.X,Y:p.Y-oXY.Y};}if(q.X-p.X>0){var z=parseInt(q.X);q.X=parseInt(p.X);p.X=parseInt(z);}if(q.Y-p.Y>0){var z=parseInt(q.Y);q.Y=parseInt(p.Y);p.Y=parseInt(z);}};transform.xy=function(a,b){b=b?b:0;return({X:Math.max(0+b,Math.min(canvas.W-b,a.X)),Y:Math.max(0+b,Math.min(canvas.H-b,a.Y))});};style=function(n,m,l,g,f){switch(vars[l]){case"solid":n[m]="rgba("+vars[l+"CO"].join(",")+")";break;case"gradient":var j=vars[l+"GD"],k=n.createLinearGradient(g.X,g.Y,f.X,f.Y);for(var h in j){k.addColorStop(j[h][0],"rgba("+j[h][1].join(",")+")");}n[m]=k;break;case"pattern":if(!vars[l+"PT~"]){gui_pattern.cache(l);}n[m]=vars[l+"PT~"];break;}};(function(){function c(h,l,k){var j=h.X-cXY.X,g=h.Y-cXY.Y,n=Math.max(1,100-vars["flow_"+l]);function m(p,o,s){var q=s/n;if(s>0){for(;q>0;q--){k(p*q,o*q);}}else{for(;q<0;q++){k(p*q,o*q);}}}if(Math.abs(j)>Math.abs(g)){m(n,n*(g/j),j);}else{m(n*(j/g),n,g);}}function f(g){var j=$2D("ctx_temp"),h=vars.type=="shape"?vars.shape:vars.type;j.globalCompositeOperation=canvas.mode;if(vars["movement_"+h]=="anchored"){j.clearRect(0,0,canvas.W,canvas.H);}if(g=="down"&&marquee.on){j.save();j.beginPath();marquee.draw(j);j.clip();marquee.on=0;window.clearInterval(marqueeID);}return j;}function b(h){var g=document.getElementById("ctx_temp").getContext("2d");co.copy("ctx_temp","ctx_box");g.clearRect(0,0,canvas.W,canvas.H);canvas.history_set();if(marquee.ghost){marquee.run();h.restore();}a=false;}var a=false;draw={shape:function(j,h,g){var k=f(g);if(vars["movement_"+vars.shape]=="freedraw"){oXY=h;}if(Math.abs(j.X-h.X)>0&&Math.abs(j.Y-h.Y)>0){a=true;k.beginPath();co[vars.shape](j,h,k);k.lineJoin=vars.lineJoin;k.lineWidth=vars["stroke_"+vars.shape];style(k,"fillStyle","fill",j,h);style(k,"strokeStyle","stroke",j,h);k.fill();k.stroke();}if(g=="up"&&a){b(k);}},text:function(j,h,g){var k=f(g);if(g=="down"||g=="move"){k.beginPath();if(k.setFont){k.setFont(vars.fontSize+"px Liberation Sans");}k.font=vars.fontSize+"px Liberation Sans, sans-serif";k.lineWidth=vars.stroke_text;style(k,"strokeStyle","stroke",j,h);style(k,"fillStyle","fill",j,h);k.fillText(vars.textMessage,h.X,h.Y);k.strokeText(vars.textMessage,h.X,h.Y);}if(g=="up"){b(k);}},pencil:function(j,h,g){var p=f(g),o=$("ctx_brush"),l=vars.diameter_pencil,k=l*2;function n(m,q){p.drawImage(o,0,0,k,k,h.X-l-m,h.Y-l-q,k,k);}if(g=="down"){n(0,0);}else{if(g=="move"){c(h,"pencil",n);}}if(g=="up"){b(p);}},brush:function(j,h,g){var p=f(g),o=$("ctx_brush"),l=vars.diameter_brush,k=l*2;function n(m,q){p.drawImage(o,0,0,k,k,h.X-l-m,h.Y-l-q,k,k);}if(g=="down"){n(0,0);}else{if(g=="move"){c(h,"brush",n);}}if(g=="up"){b(p);}},calligraphy:function(q,p,k){var o=f(k),l=$("ctx_stamp"),h=co.stamp.r,g=vars.diameter_calligraphy/100,j=g*2;function n(m,s){o.drawImage(l,0,0,h.W,h.H,p.X-((h.W*g)/2)-m,p.Y-((h.H*g)/2)-s,h.W*g,h.H*g);}if(k=="down"){n(0,0);}else{if(k=="move"){c(p,"calligraphy",n);}}if(k=="up"){b(o);}},stamp:function(q,p,k){var o=f(k),l=$("ctx_stamp"),h=co.stamp.r,g=vars.diameter_stamp,j=g*2;function n(m,u){var t=Math.random(),s=Math.max(vars.rand_max/100,Math.min(vars.rand_min/100,t));o.drawImage(l,0,0,h.W,h.H,p.X-((h.W*s)/2)-m,p.Y-((h.H*s)/2)-u,h.W*s,h.H*s);}if(k=="down"){n(0,0);}else{if(k=="move"){c(p,"stamp",n);}}if(k=="up"){b(o);}},eraser:function(j,h,g){if(g=="down"){co.copy("ctx_box","ctx_temp");co.del("ctx_box");}var o=f(g),l=vars.diameter_eraser,k=l*2;function n(m,p){o.drawImage($("ctx_brush"),0,0,k,k,h.X-l-m,h.Y-l-p,k,k);}if(g=="down"){o.globalCompositeOperation="destination-out";n(0,0);}else{o.globalCompositeOperation="destination-out";c(h,"eraser",n);}o.globalCompositeOperation="source-over";if(g=="up"){b(o);}},fill:function(j,h,g){var l=f(g),k=vars.fill;if(k=="gradient"){l.beginPath();l.lineWidth=0.5;l.lineCap="round";l.moveTo(j.X,j.Y);l.lineTo(h.X,h.Y);l.strokeStyle="rgba(127,127,127,1)";l.stroke();l.drawImage(path["point"],0,0,7,7,j.X-4,j.Y-4,7,7);l.drawImage(path["node_select"],0,0,7,7,h.X-4,h.Y-4,7,7);if(g=="up"){co.del("ctx_temp");style(l,"fillStyle","fill",j,h);l.rect(0,0,canvas.W,canvas.H);l.fill();b(l);}}else{if(g=="down"){style(l,"fillStyle","fill",j,h);l.rect(0,0,canvas.W,canvas.H);l.fill();b(l);}}}};stamp={current:function(h){var g=stamp.fileNumber;stamp.fileNumber=h.id.substr(5);if($("stamp"+g)){stamp.preview(g);$("stamp"+g).className="";}$("stamp"+stamp.fileNumber).className="cur";vars.cache(1);},uri:function(g){return"media/glyph/"+vars.stamp+"/"+(stamp.fileNumber-1)+"-"+g+".png";},preview:function(h,g){if($("stamp"+h)&&stamp.src[h].src){function k(m){return(m<34?(34-m)/2:0);}function j(m){l={W:(34/m)*l.W,H:(34/m)*l.H};}var p=$2D("stamp"+h),n=stamp.src[h],l={W:n.width,H:n.height};if(l.W>=l.H){j(l.W);}else{if(l.H>l.W){j(l.H);}}p.clearRect(0,0,34,34);p.drawImage(n,k(l.W),k(l.H),l.W,l.H);if(h==stamp.fileNumber){p.globalCompositeOperation="source-in";p.rect(0,0,34,34);co.style[vars[vars.id]]({"X":0,"Y":0},{"X":34,"Y":34},p,"fill",vars.id);p.globalCompositeOperation="source-over";if(!g||g=="up"){co.glyph(stamp.uri("live"));}}}},reset:function(){var l=gui.Y,k=l.r.stamp;if(!stamp.fileNumber){stamp.fileNumber=1;}var h=parseInt(stamp.fileNumber),g=stamp.r[vars.stamp],j=k.n()-k.display,m=(h/g<=0.5)?-2:2;l.prev.stamp=null;l.cur.stamp=Math.max(1,Math.min(j,Math.floor(((h+m)/g)*j)));l.id="stamp";l.stamp();l.kontrol_update(l.id);gui.X.range("rand");},r:{"Default":38,"Cutegirl":56,"Victoria":40,"Work_Tech":54,"Skin":32,"Butterflies":27,"Flowers":28,"Footprints":18,"Leafs":50,"Light":15},src:[]};(function(){var g,h={};draw.spirograph=function(S,P,q){var M=f(q);if(q=="move"){h=P;}else{if(q=="up"){clearTimeout(g);b(M);}else{if(q=="down"){h=P;var l=vars.inner_radius_spirograph,p=vars.outer_radius_spirograph,J=vars.diameter_spirograph,K=vars.speed_spirograph,I=vars.resolution_spirograph,G=0.5,B=vars.type_spirograph,z=0,u=vars["stroke"+gui_swatch.L2S[vars["stroke"]]];switch(vars["stroke"]){case"pattern":M.strokeStyle=vars["stroke"+"PT~"];break;case"gradient":var t=function(j,R){var m=j+R;return(m>255)?255:m;},O=vars["stroke"+"GD"],L,k,H=[];for(var T in O){k=O[T][1];if(L){var v=512/(O.length-1);for(var s=0;s<=v;s++){var o=(s/v),n=1-o,F=[k[0]+(t(k[0],L[0])-k[0])*L[3]/255,k[1]+(t(k[1],L[1])-k[1])*L[3]/255,k[2]+(t(k[2],L[2])-k[2])*L[3]/255,Math.min(k[3]*255+L[3]*255,255)];H.push(k.join(","));}}L=k;}break;default:M.strokeStyle="rgba("+u.join(",")+")";break;}g=setInterval(function(){var U,m,V=h.X,R=h.Y;M.lineWidth=G;for(var W=0;W<K;W++){if(B=="Hypotrochoid"){x=(l-p)*Math.cos(z)+J*Math.cos((l/p-1)*z)+(V+(h.X-V)*(W/K));y=(l-p)*Math.sin(z)-J*Math.sin((l/p-1)*z)+(R+(h.Y-R)*(W/K));}else{x=(l+p)*Math.cos(z)-J*Math.cos((l/p+1)*z)+(V+(h.X-V)*(W/K));y=(l+p)*Math.sin(z)-J*Math.sin((l/p+1)*z)+(R+(h.Y-R)*(W/K));}if(!isNaN(U)){M.beginPath();M.moveTo(U,m);M.lineTo(x,y);if(vars["stroke"]=="gradient"){var j=(((z*Math.abs(1-l/p)/Math.PI/2)%1)*512)>>0;M.strokeStyle="rgba("+H[j]+")";}M.stroke();}z+=I*Math.PI/180*2;U=x;m=y;}V=h.X;R=h.Y;},5);}}}};})();})();Resources={"Brushes":{"Butterflies":{"email":"bulletproof.cupidx@gmail.com","url":"http://dead-brushes.deviantart.com/art/ps7-butterfly-brushes-61623697","name":"dead-brushes"},"Doodles":{"email":"punksafetypin@gmail.com","url":"http://punksafetypin.deviantart.com/art/Brush-Set-21-Boney-Doodles-57365483","name":"punksafetypin"},"Flowers":{"email":"ir@hawksmont.com","url":"http://hawksmont.com/","name":"hawksmont"},"Footprints":{"email":"jonas@rognemedia.no","url":"http://chain.deviantart.com/art/Footprint-brushes-60108797","name":"chain"},"Leafs":{"email":"ir@hawksmont.com","url":"http://hawksmont.com/","name":"hawksmont"},"Retro":{"email":"vivekdhage@gmail.com","url":"http://vwake.deviantart.com/art/Retr0-Brushes-1689219","name":"vwake"},"Simple Smudges":{"email":"p.szczepanski@gmail.com","url":"http://env1ro.deviantart.com/art/SimpleSmudges-1-Brushes-Pack-52089760","name":"env1ro"},"Tizzape":{"email":"services@dirt2.com","url":"http://keepwaiting.deviantart.com/art/Tizzape-Tape-Brushes-29459997","name":"keepwaiting"},"Typogrunge":{"email":"","url":"http://scully7491.deviantart.com/art/Typographic-Grunge-Brushes-30565921","name":"scully7491"},"Water Colors":{"email":"p.szczepanski@gmail.com","url":"http://env1ro.deviantart.com/art/WaterColor-Reloaded-98294189","name":"env1ro"}},"PT":{"Ava7":{"email":"domains.hr@gmail.com","url":"http://patterns.ava7.com/","name":"Ava7"},"DinPattern":{"email":"http://www.dinpattern.com/pages/contact.php","url":"http://www.dinpattern.com/","name":"DinPattern"},"Gaudi":{"email":"http://www.donbarnett.com/mail/index.php3","url":"http://www.donbarnett.com/tilesets/set3.htm","name":"Don Barnett"},"Headlock":{"email":"dns@jpmax.net","url":"http://www.headlock.ws/patterns.html","name":"Headlock"},"HG - Patterns":{"email":"hybridgenesis@gmail.com","url":"http://www.hybrid-genesis.com/freebies.html","name":"Hybrid Genesis"},"HGX - Patterns":{"email":"hybridgenesis@gmail.com","url":"http://www.hybrid-genesis.com/hgx_intro.html","name":"Hybrid Genesis"},"Squidfingers":{"email":"Travis@squidfingers.com","url":"http://www.squidfingers.com/patterns/","name":"Travis"}},"GD":{"Web v2.0":{"email":"","url":"http://gimp-tutorials.net/30-Ultimate-Web-20%20Layer-Styles-for%20-Gimp","name":"Navdeep & Navin"},"Web v2.1":{"email":"","url":"http://gimp-tutorials.net/130-UltimateWeb20-Gradients-for-Gimp","name":"Navdeep & Navin"}},"CO":{"Oxygen":{"email":"","url":"http://techbase.kde.org/Development/Guidelines/CIG/Colors","name":"KDE"},"Cranes":{"email":"","url":"http://Carol.gimp.org/gimp2/resources/default/palettes.html","name":"Carol"},"Grays":{"email":"","url":"http://Carol.gimp.org/gimp2/resources/default/palettes.html","name":"Carol"},"Named Colors":{"email":"","url":"http://Carol.gimp.org/gimp2/resources/default/palettes.html","name":"Carol"},"Pastels":{"email":"","url":"http://Carol.gimp.org/gimp2/resources/default/palettes.html","name":"Carol"},"Reds and Purples":{"email":"","url":"http://Carol.gimp.org/gimp2/resources/default/palettes.html","name":"Carol"},"Web":{"email":"","url":"http://Carol.gimp.org/gimp2/resources/default/palettes.html","name":"Carol"},"Fruity":{"email":"mud@visc.us","url":"http://mudcu.be/","name":"MUD"}}};Q={};Q.GD={};Q.GD["Nature"]=[[[0,[86,3,0,1]],[0.11,[153,0,0,1]],[0.36,[205,112,19,1]],[0.7,[219,181,82,1]],[1,[115,94,41,1]]],[[0,[0,0,0,1]],[1,[153,0,0,1]]],[[0,[41,68,99,1]],[0.57,[254,221,144,1]],[1,[41,68,99,1]]],[[0,[39,73,105,1]],[0.27,[98,122,155,1]],[0.61,[156,171,204,1]],[1,[215,220,254,1]]],[[0,[40,66,82,1]],[0.09,[206,213,254,1]],[0.28,[41,68,99,1]],[0.39,[65,79,92,1]],[0.57,[119,151,215,1]],[0.68,[70,103,145,1]],[0.81,[89,122,157,1]],[0.91,[41,68,99,1]],[1,[2,33,54,1]]],[[0,[87,42,0,1]],[0.2,[69,46,2,1]],[0.66,[190,160,88,1]],[1,[142,121,64,1]]],[[0,[177,128,152,1]],[0.36,[95,52,71,1]],[0.36,[99,58,75,1]],[1,[248,210,236,1]]],[[0,[139,9,3,1]],[1,[254,221,144,1]]],[[0,[139,9,3,1]],[1,[234,85,78,1]]],[[0,[16,40,65,1]],[1,[89,122,157,1]]],[[0,[168,183,240,1]],[0.32,[214,163,126,1]],[1,[120,124,148,1]]],[[0,[254,248,188,1]],[1,[254,228,170,1]]],[[0,[52,7,1,1]],[1,[177,128,152,1]]],[[0,[95,52,71,1]],[0.5,[254,246,185,1]],[1,[95,52,71,1]]],[[0,[136,113,86,1]],[1,[229,205,152,1]]],[[0,[205,135,85,1]],[1,[89,38,12,1]]],[[0,[83,58,7,1]],[1,[254,241,185,1]]],[[0,[33,43,52,1]],[1,[198,167,127,1]]],[[0,[2,33,54,1]],[0.11,[57,23,36,1]],[0.24,[95,52,71,1]],[0.6,[40,66,82,1]],[1,[2,33,54,1]]],[[0,[142,121,64,1]],[1,[41,68,99,1]]]];Q.GD["Web v2.0"]=[[[0,[16,16,16,1]],[1,[124,125,124,1]]],[[0,[43,43,43,1]],[0.51,[1,1,1,1]],[0.51,[61,61,61,1]],[1,[77,77,77,1]]],[[0,[128,224,248,1]],[1,[205,248,255,1]]],[[0,[65,151,238,1]],[1,[121,187,255,1]]],[[0,[66,145,219,1]],[0.13,[75,184,240,1]],[0.62,[58,134,197,1]],[0.62,[99,154,200,1]],[1,[205,219,232,1]]],[[0,[191,110,78,1]],[0.29,[118,34,1,1]],[0.54,[118,34,1,1]],[0.54,[141,53,18,1]],[1,[240,183,160,1]]],[[0,[109,0,25,1]],[1,[168,3,41,1]]],[[0,[255,116,0,1]],[1,[255,116,0,1]]],[[0,[254,191,5,1]],[1,[255,214,93,1]]],[[0,[202,38,0,1]],[0.18,[255,102,0,1]],[0.18,[255,101,0,1]],[0.59,[246,41,12,1]],[0.59,[233,116,96,1]],[1,[241,186,176,1]]],[[0,[225,233,160,1]],[1,[234,239,181,1]]],[[0,[171,220,40,1]],[1,[182,224,38,1]]],[[0,[63,76,107,1]],[1,[96,107,136,1]]],[[0,[98,145,192,1]],[1,[204,230,249,1]]],[[0,[128,171,203,1]],[1,[206,224,236,1]]],[[0,[215,236,251,1]],[0.29,[138,195,235,1]],[0.54,[138,195,235,1]],[0.54,[171,211,238,1]],[1,[234,241,246,1]]],[[0,[125,227,31,1]],[0.25,[160,240,38,1]],[1,[199,254,48,1]]],[[0,[125,227,31,1]],[1,[166,242,39,1]]],[[0,[255,123,215,1]],[0.18,[253,137,215,1]],[0.54,[253,137,215,1]],[0.54,[251,167,225,1]],[1,[251,231,251,1]]],[[0,[251,224,151,1]],[0.27,[248,182,3,1]],[0.56,[248,182,3,1]],[0.56,[252,205,79,1]],[1,[252,234,185,1]]],[[0,[255,126,2,1]],[0.51,[255,124,0,1]],[0.51,[255,167,61,1]],[1,[255,160,61,1]]],[[0,[169,73,164,1]],[1,[229,112,231,1]]],[[0,[216,49,162,1]],[0.51,[169,0,119,1]],[0.51,[193,70,161,1]],[1,[193,65,164,1]]],[[0,[198,232,250,1]],[1,[235,247,253,1]]],[[0,[209,20,20,1]],[1,[254,27,1,1]]],[[0,[234,58,42,1]],[0.18,[216,41,21,1]],[0.54,[246,41,12,1]],[0.54,[238,85,67,1]],[1,[254,88,55,1]]],[[0,[209,211,96,1]],[1,[229,230,149,1]]],[[0,[255,228,0,1]],[0.57,[255,136,0,1]],[1,[230,109,29,1]]],[[0,[241,244,246,1]],[0.51,[216,223,227,1]],[0.51,[229,235,238,1]],[1,[246,248,249,1]]],[[0,[252,181,54,1]],[1,[239,228,91,1]]]];Q.GD["Web v2.1"]=[[[0,[76,76,76,1]],[0.25,[102,102,102,1]],[0.5,[44,44,44,1]],[0.5,[0,0,0,1]],[0.76,[43,43,43,1]],[1,[19,19,19,1]]],[[0,[135,224,253,1]],[1,[5,171,224,1]]],[[0,[240,249,255,1]],[1,[161,219,255,1]]],[[0,[122,188,255,1]],[1,[64,150,238,1]]],[[0,[0,183,234,1]],[1,[0,158,195,1]]],[[0,[136,191,232,1]],[1,[112,176,224,1]]],[[0,[254,255,255,1]],[1,[160,216,239,1]]],[[0,[37,141,200,1]],[1,[37,141,200,1]]],[[0,[64,150,238,1]],[1,[64,150,238,1]]],[[0,[184,225,252,1]],[0.25,[144,186,228,1]],[0.5,[144,191,240,1]],[0.5,[107,168,229,1]],[1,[189,243,253,1]]],[[0,[59,103,158,1]],[0.5,[43,136,217,1]],[0.5,[32,124,202,1]],[1,[125,185,232,1]]],[[0,[109,179,242,1]],[0.5,[84,163,238,1]],[0.5,[54,144,240,1]],[1,[30,105,222,1]]],[[0,[235,241,246,1]],[0.5,[171,211,238,1]],[0.5,[137,195,235,1]],[1,[213,235,251,1]]],[[0,[228,245,252,1]],[0.5,[191,232,249,1]],[0.5,[159,216,239,1]],[1,[42,176,237,1]]],[[0,[206,219,233,1]],[0.5,[97,153,199,1]],[0.5,[58,132,195,1]],[0.71,[75,184,240,1]],[1,[38,85,139,1]]],[[0,[167,199,220,1]],[1,[133,178,211,1]]],[[0,[63,76,107,1]],[1,[63,76,107,1]]],[[0,[208,228,247,1]],[0.5,[10,119,213,1]],[1,[135,188,234,1]]],[[0,[225,255,255,1]],[0.12,[225,255,255,1]],[0.12,[253,255,255,1]],[0.54,[200,238,251,1]],[1,[177,216,245,1]]],[[0,[179,220,237,1]],[0.5,[41,184,229,1]],[1,[188,224,238,1]]],[[0,[213,206,166,1]],[1,[183,173,112,1]]],[[0,[240,183,161,1]],[0.5,[140,51,16,1]],[0.5,[117,34,1,1]],[1,[191,110,78,1]]],[[0,[169,3,41,1]],[1,[109,0,25,1]]],[[0,[254,252,234,1]],[1,[241,218,54,1]]],[[0,[180,221,180,1]],[0.33,[82,177,82,1]],[0.67,[0,138,0,1]],[1,[0,36,0,1]]],[[0,[205,235,142,1]],[1,[165,201,86,1]]],[[0,[201,222,150,1]],[1,[57,130,53,1]]],[[0,[248,255,232,1]],[1,[183,223,45,1]]],[[0,[169,219,128,1]],[1,[150,197,111,1]]],[[0,[180,227,145,1]],[0.5,[97,196,25,1]],[1,[180,227,145,1]]],[[0,[41,154,11,1]],[1,[41,154,11,1]]],[[0,[143,200,0,1]],[1,[143,200,0,1]]],[[0,[0,110,46,1]],[1,[0,110,46,1]]],[[0,[107,186,112,1]],[1,[107,186,112,1]]],[[0,[205,235,139,1]],[1,[205,235,139,1]]],[[0,[143,196,0,1]],[1,[143,196,0,1]]],[[0,[182,224,38,1]],[1,[171,220,40,1]]],[[0,[157,213,58,1]],[0.5,[161,213,79,1]],[0.5,[128,194,23,1]],[1,[124,188,10,1]]],[[0,[230,240,163,1]],[0.5,[210,230,56,1]],[0.5,[195,216,37,1]],[1,[219,240,67,1]]],[[0,[191,210,85,1]],[0.5,[142,185,42,1]],[0.5,[114,170,0,1]],[1,[158,203,45,1]]],[[0,[180,223,91,1]],[1,[180,223,91,1]]],[[0,[238,238,238,1]],[1,[204,204,204,1]]],[[0,[206,220,231,1]],[1,[89,106,114,1]]],[[0,[96,108,136,1]],[1,[63,76,107,1]]],[[0,[176,212,227,1]],[1,[136,186,207,1]]],[[0,[242,245,246,1]],[1,[200,215,220,1]]],[[0,[216,224,222,1]],[0.33,[153,175,171,1]],[0.67,[130,157,152,1]],[1,[14,14,14,1]]],[[0,[181,189,200,1]],[1,[40,52,59,1]]],[[0,[184,198,223,1]],[1,[109,136,183,1]]],[[0,[207,231,250,1]],[1,[99,147,193,1]]],[[0,[210,223,237,1]],[0.51,[190,208,234,1]],[0.51,[166,192,227,1]],[0.75,[186,208,239,1]],[1,[121,155,200,1]]],[[0,[238,238,238,1]],[1,[238,238,238,1]]],[[0,[226,226,226,1]],[0.5,[219,219,219,1]],[0.5,[209,209,209,1]],[1,[254,254,254,1]]],[[0,[242,246,248,1]],[0.5,[216,225,231,1]],[0.5,[181,198,208,1]],[1,[224,239,249,1]]],[[0,[212,228,239,1]],[1,[134,174,204,1]]],[[0,[245,246,246,1]],[0.49,[184,186,198,1]],[1,[245,246,246,1]]],[[0,[243,226,199,1]],[0.5,[193,158,103,1]],[0.5,[182,141,76,1]],[1,[233,212,179,1]]],[[0,[249,252,247,1]],[1,[245,249,240,1]]],[[0,[195,217,255,1]],[1,[152,176,217,1]]],[[0,[210,255,82,1]],[1,[145,232,66,1]]],[[0,[254,254,253,1]],[1,[174,191,118,1]]],[[0,[228,239,192,1]],[1,[171,189,115,1]]],[[0,[164,179,87,1]],[1,[117,137,12,1]]],[[0,[98,125,77,1]],[1,[31,59,8,1]]],[[0,[115,136,10,1]],[1,[115,136,10,1]]],[[0,[255,175,75,1]],[1,[255,146,10,1]]],[[0,[250,198,149,1]],[1,[239,141,49,1]]],[[0,[255,197,120,1]],[1,[251,157,35,1]]],[[0,[249,198,103,1]],[1,[247,150,33,1]]],[[0,[252,234,187,1]],[0.5,[252,205,77,1]],[0.5,[248,181,0,1]],[1,[251,223,147,1]]],[[0,[255,168,76,1]],[1,[255,123,13,1]]],[[0,[255,103,15,1]],[1,[255,103,15,1]]],[[0,[255,116,0,1]],[1,[255,116,0,1]]],[[0,[255,183,107,1]],[0.5,[255,167,61,1]],[0.5,[255,124,0,1]],[1,[255,127,4,1]]],[[0,[255,93,177,1]],[1,[239,1,124,1]]],[[0,[251,131,250,1]],[1,[233,60,236,1]]],[[0,[229,112,231,1]],[1,[168,73,163,1]]],[[0,[203,96,179,1]],[0.5,[173,18,131,1]],[1,[222,71,172,1]]],[[0,[255,0,132,1]],[1,[255,0,132,1]]],[[0,[252,236,252,1]],[0.5,[251,166,225,1]],[0.5,[253,137,215,1]],[1,[255,124,216,1]]],[[0,[203,96,179,1]],[0.5,[193,70,161,1]],[0.5,[168,0,119,1]],[1,[219,54,164,1]]],[[0,[235,233,249,1]],[0.5,[216,208,239,1]],[0.5,[206,199,236,1]],[1,[193,191,234,1]]],[[0,[137,137,186,1]],[1,[137,137,186,1]]],[[0,[254,187,187,1]],[1,[255,92,92,1]]],[[0,[242,130,91,1]],[0.5,[229,91,43,1]],[1,[240,113,70,1]]],[[0,[255,48,25,1]],[1,[207,4,4,1]]],[[0,[255,26,0,1]],[1,[255,26,0,1]]],[[0,[204,0,0,1]],[1,[204,0,0,1]]],[[0,[248,80,50,1]],[0.5,[241,111,92,1]],[0.5,[246,41,12,1]],[1,[231,56,39,1]]],[[0,[254,204,177,1]],[0.5,[241,116,50,1]],[0.5,[234,85,7,1]],[1,[251,149,94,1]]],[[0,[239,197,202,1]],[0.5,[210,75,90,1]],[0.5,[186,39,55,1]],[1,[241,142,153,1]]],[[0,[243,197,189,1]],[0.5,[232,108,87,1]],[0.5,[234,40,3,1]],[0.75,[255,102,0,1]],[1,[199,34,0,1]]],[[0,[183,222,237,1]],[0.5,[113,206,239,1]],[0.5,[33,180,226,1]],[1,[183,222,237,1]]],[[0,[224,243,250,1]],[0.5,[216,240,252,1]],[0.5,[184,226,246,1]],[1,[182,223,253,1]]],[[0,[254,255,232,1]],[1,[214,219,191,1]]],[[0,[252,255,244,1]],[1,[233,233,206,1]]],[[0,[252,255,244,1]],[1,[179,190,173,1]]],[[0,[229,230,150,1]],[1,[209,211,96,1]]],[[0,[234,239,181,1]],[1,[225,233,160,1]]],[[0,[69,72,77,1]],[1,[0,0,0,1]]],[[0,[125,126,125,1]],[1,[14,14,14,1]]],[[0,[149,149,149,1]],[0.5,[1,1,1,1]],[0.76,[78,78,78,1]],[1,[27,27,27,1]]],[[0,[174,188,191,1]],[0.5,[110,119,116,1]],[0.5,[10,14,10,1]],[1,[10,8,9,1]]],[[0,[197,222,234,1]],[1,[6,109,171,1]]],[[0,[247,251,252,1]],[1,[173,217,228,1]]],[[0,[214,249,255,1]],[1,[158,232,250,1]]],[[0,[233,246,253,1]],[1,[211,238,251,1]]],[[0,[99,182,219,1]],[1,[48,157,207,1]]],[[0,[44,83,158,1]],[1,[44,83,158,1]]],[[0,[169,228,247,1]],[1,[15,180,231,1]]],[[0,[178,225,255,1]],[1,[102,182,252,1]]],[[0,[79,133,187,1]],[1,[79,133,187,1]]],[[0,[147,206,222,1]],[1,[73,165,191,1]]],[[0,[222,239,255,1]],[1,[152,190,222,1]]],[[0,[73,192,240,1]],[1,[44,175,227,1]]],[[0,[254,255,255,1]],[1,[210,235,249,1]]],[[0,[167,207,223,1]],[1,[35,83,138,1]]],[[0,[73,155,234,1]],[1,[32,124,229,1]]],[[0,[53,106,160,1]],[1,[53,106,160,1]]],[[0,[255,255,255,1]],[1,[237,237,237,1]]],[[0,[242,249,254,1]],[1,[214,240,253,1]]],[[0,[255,255,255,1]],[1,[229,229,229,1]]],[[0,[255,255,255,1]],[0.5,[241,241,241,1]],[0.5,[225,225,225,1]],[1,[246,246,246,1]]],[[0,[255,255,255,1]],[0.5,[243,243,243,1]],[0.5,[237,237,237,1]],[1,[255,255,255,1]]],[[0,[246,248,249,1]],[0.5,[229,235,238,1]],[0.5,[215,222,227,1]],[1,[245,247,249,1]]],[[0,[246,230,180,1]],[1,[237,144,23,1]]],[[0,[234,185,45,1]],[1,[199,152,16,1]]],[[0,[255,214,94,1]],[1,[254,191,4,1]]],[[0,[241,231,103,1]],[1,[254,182,69,1]]],[[0,[255,255,136,1]],[1,[255,255,136,1]]],[[0,[254,191,1,1]],[1,[254,191,1,1]]]];Q.CO={};Q.CO["Fruity"]=[[252,233,79,1],[237,212,0,1],[196,160,0,1],[138,226,52,1],[115,210,22,1],[78,154,6,1],[78,154,6,1],[252,175,62,1],[245,121,0,1],[206,92,0,1],[114,159,207,1],[52,101,164,1],[32,74,135,1],[32,74,135,1],[233,185,110,1],[193,125,17,1],[143,89,2,1],[173,127,168,1],[117,80,123,1],[92,53,102,1],[92,53,102,1],[164,0,0,1],[204,0,0,1],[239,41,41,1],[248,46,0,1],[255,142,3,1],[255,213,3,1],[189,248,0,1]];Q.CO["Oxygen"]=[[56,37,9,1],[87,64,30,1],[117,81,26,1],[143,107,50,1],[179,146,93,1],[222,188,133,1],[156,15,15,1],[191,3,3,1],[226,8,0,1],[232,87,82,1],[240,134,130,1],[249,204,202,1],[156,15,86,1],[191,3,97,1],[226,0,113,1],[232,82,144,1],[240,130,176,1],[249,202,222,1],[106,0,86,1],[133,2,108,1],[160,39,134,1],[177,79,154,1],[193,115,176,1],[232,183,215,1],[29,1,85,1],[52,23,110,1],[70,40,134,1],[100,74,155,1],[142,121,165,1],[195,180,218,1],[0,49,110,1],[0,67,138,1],[0,87,174,1],[44,114,199,1],[97,147,207,1],[164,192,228,1],[0,72,77,1],[0,96,102,1],[0,120,128,1],[0,167,179,1],[0,196,204,1],[168,221,224,1],[0,8,63,1],[0,115,77,1],[0,153,102,1],[0,179,119,1],[0,204,136,1],[153,220,198,1],[0,110,41,1],[0,137,44,1],[55,164,44,1],[119,183,83,1],[177,210,143,1],[216,232,194,1],[227,173,0,1],[243,195,0,1],[255,221,0,1],[255,235,85,1],[255,242,153,1],[255,246,200,1],[172,67,17,1],[207,73,19,1],[235,115,49,1],[242,155,104,1],[242,187,136,1],[255,217,176,1],[46,52,54,1],[85,87,83,1],[136,138,133,1],[186,189,182,1],[211,215,207,1],[238,238,236,1],[77,38,0,1],[128,63,0,1],[191,94,0,1],[255,126,0,1],[255,191,128,1],[255,223,191,1],[89,0,0,1],[140,0,0,1],[191,0,0,1],[255,0,0,1],[255,128,128,1],[255,191,191,1],[115,0,85,1],[163,0,123,1],[204,0,154,1],[255,0,191,1],[255,128,223,1],[255,191,240,1],[44,0,89,1],[64,0,128,1],[90,0,179,1],[128,0,255,1],[192,128,255,1],[223,191,255,1],[0,0,128,1],[0,0,191,1],[0,0,255,1],[0,102,255,1],[128,179,255,1],[191,217,255,1],[0,77,0,1],[0,140,0,1],[0,191,0,1],[0,255,0,1],[128,255,128,1],[191,255,191,1],[99,128,0,1],[139,179,0,1],[191,245,0,1],[229,255,0,1],[240,255,128,1],[248,255,191,1],[255,170,0,1],[255,191,0,1],[255,213,0,1],[255,255,0,1],[255,255,153,1],[255,255,191,1],[50,50,50,1],[85,85,85,1],[136,136,136,1],[187,187,187,1],[221,221,221,1],[238,238,238,1]];Q.CO["Cranes"]=[[8,8,8,1],[192,176,144,1],[192,164,128,1],[80,72,68,1],[112,140,88,1],[104,132,96,1],[92,104,84,1],[24,8,12,1],[96,108,92,1],[128,104,76,1],[44,28,24,1],[156,140,116,1],[156,148,116,1],[68,68,60,1],[212,196,148,1],[144,136,108,1],[160,148,128,1],[216,220,216,1],[44,28,40,1],[68,12,16,1],[12,8,32,1],[56,8,48,1],[48,8,40,1],[44,20,40,1],[104,104,92,1],[52,28,48,1],[156,176,124,1],[124,160,96,1],[44,40,24,1],[168,168,172,1],[196,188,168,1],[8,28,20,1],[160,60,60,1],[180,144,100,1],[192,144,112,1],[132,40,60,1],[48,8,24,1],[156,176,144,1],[80,84,64,1],[136,148,136,1],[120,160,116,1],[44,20,24,1],[128,84,80,1],[128,20,56,1],[168,68,76,1],[64,56,44,1],[56,40,40,1],[156,172,164,1],[100,92,72,1],[124,116,88,1],[32,8,28,1],[176,180,180,1],[156,44,68,1],[172,176,156,1],[176,168,144,1],[188,8,88,1],[148,8,52,1],[20,48,52,1],[68,60,68,1],[216,204,160,1],[140,160,112,1],[112,116,88,1],[152,160,164,1],[116,156,104,1],[192,192,184,1],[80,84,72,1],[56,24,24,1],[24,36,40,1],[48,56,52,1],[92,84,64,1],[180,160,120,1],[112,100,76,1],[156,120,88,1],[96,96,84,1],[148,160,152,1],[192,200,144,1],[68,56,56,1],[100,48,96,1],[108,144,100,1],[188,180,160,1],[60,48,68,1],[80,48,52,1],[188,56,72,1],[196,176,128,1],[220,180,164,1],[132,116,100,1],[68,36,52,1],[168,132,100,1],[180,168,132,1],[148,156,140,1],[120,128,108,1],[108,12,48,1],[108,80,68,1],[44,40,56,1],[140,124,104,1],[24,28,20,1],[204,172,120,1],[164,156,132,1],[116,104,96,1],[144,152,148,1],[84,92,72,1],[120,148,100,1],[120,112,108,1],[60,64,56,1],[204,176,140,1],[212,140,128,1],[80,56,64,1],[152,140,108,1],[72,72,76,1],[20,12,48,1],[140,152,128,1],[208,100,88,1],[8,36,48,1],[80,104,68,1],[44,40,8,1],[76,60,84,1],[56,40,24,1],[112,52,64,1],[212,124,112,1],[152,72,76,1],[212,124,128,1],[88,88,96,1],[16,68,8,1],[36,8,40,1],[128,168,112,1],[208,212,196,1],[216,208,176,1],[76,68,56,1],[40,44,28,1],[32,20,80,1],[136,64,68,1],[60,76,64,1],[200,104,96,1],[92,84,80,1],[164,148,116,1],[116,108,84,1],[148,128,100,1],[80,80,84,1],[136,140,128,1],[88,16,76,1],[124,12,8,1],[100,96,104,1],[132,52,36,1],[56,28,40,1],[196,96,88,1],[64,84,44,1],[164,188,132,1],[204,196,168,1],[216,220,208,1],[136,172,100,1],[148,188,124,1],[52,72,32,1],[108,108,116,1],[136,172,132,1],[60,60,64,1],[108,92,92,1],[216,156,144,1],[104,96,84,1],[172,180,172,1],[140,108,88,1],[160,164,156,1],[148,132,108,1],[128,140,120,1],[40,84,56,1],[132,56,108,1],[96,32,56,1],[164,88,84,1],[96,104,72,1],[172,192,152,1],[192,196,172,1],[208,108,100,1],[68,84,72,1],[140,128,96,1],[224,228,224,1],[128,128,132,1],[76,96,56,1],[88,76,100,1],[72,12,52,1],[56,44,56,1],[68,48,68,1],[60,20,64,1],[44,12,56,1],[84,68,76,1],[44,8,8,1],[148,136,100,1],[148,180,108,1],[184,52,20,1],[0,0,0,1],[40,0,0,1],[0,56,92,1],[0,0,4,1],[0,0,0,1],[60,56,56,1],[56,20,40,1],[192,28,36,1],[72,80,60,1],[72,92,68,1],[88,100,76,1],[88,116,72,1],[0,0,0,1],[56,40,56,1],[72,76,68,1],[128,48,52,1],[168,36,60,1],[76,96,76,1],[80,108,80,1],[128,120,108,1],[184,72,80,1],[104,128,84,1],[136,132,108,1],[148,140,116,1],[112,152,92,1],[208,184,132,1],[104,116,100,1],[132,128,116,1],[136,120,88,1],[0,0,0,1],[116,124,120,1],[136,152,152,1],[144,156,160,1],[156,168,176,1],[184,184,176,1],[152,172,184,1],[184,188,188,1],[196,200,196,1],[212,212,208,1],[148,164,172,1],[84,96,84,1],[96,8,20,1],[100,116,80,1],[96,120,92,1],[164,176,184,1],[204,188,152,1],[128,128,100,1],[44,40,40,1],[204,204,188,1],[92,128,80,1],[100,140,88,1],[56,48,44,1],[128,148,112,1],[36,28,40,1],[196,160,112,1],[124,116,96,1],[104,104,84,1],[132,140,140,1],[140,132,116,1],[204,208,200,1],[196,80,84,1],[116,112,96,1],[88,116,84,1],[64,44,56,1],[44,24,8,1],[196,116,116,1],[180,148,116,1],[136,176,116,1],[148,140,124,1]];Q.CO["Grays"]=[[0,0,0,1],[7,7,7,1],[15,15,15,1],[23,23,23,1],[31,31,31,1],[39,39,39,1],[47,47,47,1],[55,55,55,1],[63,63,63,1],[71,71,71,1],[79,79,79,1],[87,87,87,1],[95,95,95,1],[103,103,103,1],[111,111,111,1],[119,119,119,1],[127,127,127,1],[135,135,135,1],[143,143,143,1],[151,151,151,1],[159,159,159,1],[167,167,167,1],[175,175,175,1],[183,183,183,1],[191,191,191,1],[199,199,199,1],[207,207,207,1],[215,215,215,1],[223,223,223,1],[231,231,231,1],[239,239,239,1],[247,247,247,1]];Q.CO["Named Colors"]=[[255,250,250,1],[248,248,255,1],[245,245,245,1],[220,220,220,1],[255,250,240,1],[253,245,230,1],[250,240,230,1],[250,235,215,1],[255,239,213,1],[255,235,205,1],[255,228,196,1],[255,218,185,1],[255,222,173,1],[255,228,181,1],[255,248,220,1],[255,255,240,1],[255,250,205,1],[255,245,238,1],[240,255,240,1],[245,255,250,1],[240,255,255,1],[240,248,255,1],[230,230,250,1],[255,240,245,1],[255,228,225,1],[255,255,255,1],[0,0,0,1],[47,79,79,1],[105,105,105,1],[112,128,144,1],[119,136,153,1],[190,190,190,1],[211,211,211,1],[25,25,112,1],[0,0,128,1],[100,149,237,1],[72,61,139,1],[106,90,205,1],[123,104,238,1],[132,112,255,1],[0,0,205,1],[65,105,225,1],[0,0,255,1],[30,144,255,1],[0,191,255,1],[135,206,235,1],[135,206,250,1],[70,130,180,1],[176,196,222,1],[173,216,230,1],[176,224,230,1],[175,238,238,1],[0,206,209,1],[72,209,204,1],[64,224,208,1],[0,255,255,1],[224,255,255,1],[95,158,160,1],[102,205,170,1],[127,255,212,1],[0,100,0,1],[85,107,47,1],[143,188,143,1],[46,139,87,1],[60,179,113,1],[32,178,170,1],[152,251,152,1],[0,255,127,1],[124,252,0,1],[0,255,0,1],[127,255,0,1],[0,250,154,1],[173,255,47,1],[50,205,50,1],[154,205,50,1],[34,139,34,1],[107,142,35,1],[189,183,107,1],[240,230,140,1],[238,232,170,1],[250,250,210,1],[255,255,224,1],[255,255,0,1],[255,215,0,1],[238,221,130,1],[218,165,32,1],[184,134,11,1],[188,143,143,1],[205,92,92,1],[139,69,19,1],[160,82,45,1],[205,133,63,1],[222,184,135,1],[245,245,220,1],[245,222,179,1],[244,164,96,1],[210,180,140,1],[210,105,30,1],[178,34,34,1],[165,42,42,1],[233,150,122,1],[250,128,114,1],[255,160,122,1],[255,165,0,1],[255,140,0,1],[255,127,80,1],[240,128,128,1],[255,99,71,1],[255,69,0,1],[255,0,0,1],[255,105,180,1],[255,20,147,1],[255,192,203,1],[255,182,193,1],[219,112,147,1],[176,48,96,1],[199,21,133,1],[208,32,144,1],[255,0,255,1],[238,130,238,1],[221,160,221,1],[218,112,214,1],[186,85,211,1],[153,50,204,1],[148,0,211,1],[138,43,226,1],[160,32,240,1],[147,112,219,1],[216,191,216,1],[255,250,250,1],[238,233,233,1],[205,201,201,1],[139,137,137,1],[255,245,238,1],[238,229,222,1],[205,197,191,1],[139,134,130,1],[255,239,219,1],[238,223,204,1],[205,192,176,1],[139,131,120,1],[255,228,196,1],[238,213,183,1],[205,183,158,1],[139,125,107,1],[255,218,185,1],[238,203,173,1],[205,175,149,1],[139,119,101,1],[255,222,173,1],[238,207,161,1],[205,179,139,1],[139,121,94,1],[255,250,205,1],[238,233,191,1],[205,201,165,1],[139,137,112,1],[255,248,220,1],[238,232,205,1],[205,200,177,1],[139,136,120,1],[255,255,240,1],[238,238,224,1],[205,205,193,1],[139,139,131,1],[240,255,240,1],[224,238,224,1],[193,205,193,1],[131,139,131,1],[255,240,245,1],[238,224,229,1],[205,193,197,1],[139,131,134,1],[255,228,225,1],[238,213,210,1],[205,183,181,1],[139,125,123,1],[240,255,255,1],[224,238,238,1],[193,205,205,1],[131,139,139,1],[131,111,255,1],[122,103,238,1],[105,89,205,1],[71,60,139,1],[72,118,255,1],[67,110,238,1],[58,95,205,1],[39,64,139,1],[0,0,255,1],[0,0,238,1],[0,0,205,1],[0,0,139,1],[30,144,255,1],[28,134,238,1],[24,116,205,1],[16,78,139,1],[99,184,255,1],[92,172,238,1],[79,148,205,1],[54,100,139,1],[0,191,255,1],[0,178,238,1],[0,154,205,1],[0,104,139,1],[135,206,255,1],[126,192,238,1],[108,166,205,1],[74,112,139,1],[176,226,255,1],[164,211,238,1],[141,182,205,1],[96,123,139,1],[198,226,255,1],[185,211,238,1],[159,182,205,1],[108,123,139,1],[202,225,255,1],[188,210,238,1],[162,181,205,1],[110,123,139,1],[191,239,255,1],[178,223,238,1],[154,192,205,1],[104,131,139,1],[224,255,255,1],[209,238,238,1],[180,205,205,1],[122,139,139,1],[187,255,255,1],[174,238,238,1],[150,205,205,1],[102,139,139,1],[152,245,255,1],[142,229,238,1],[122,197,205,1],[83,134,139,1],[0,245,255,1],[0,229,238,1],[0,197,205,1],[0,134,139,1],[0,255,255,1],[0,238,238,1],[0,205,205,1],[0,139,139,1],[151,255,255,1],[141,238,238,1],[121,205,205,1],[82,139,139,1],[127,255,212,1],[118,238,198,1],[102,205,170,1],[69,139,116,1],[193,255,193,1],[180,238,180,1],[155,205,155,1],[105,139,105,1],[84,255,159,1],[78,238,148,1],[67,205,128,1],[46,139,87,1],[154,255,154,1],[144,238,144,1],[124,205,124,1],[84,139,84,1],[0,255,127,1],[0,238,118,1],[0,205,102,1],[0,139,69,1],[0,255,0,1],[0,238,0,1],[0,205,0,1],[0,139,0,1],[127,255,0,1],[118,238,0,1],[102,205,0,1],[69,139,0,1],[192,255,62,1],[179,238,58,1],[154,205,50,1],[105,139,34,1],[202,255,112,1],[188,238,104,1],[162,205,90,1],[110,139,61,1],[255,246,143,1],[238,230,133,1],[205,198,115,1],[139,134,78,1],[255,236,139,1],[238,220,130,1],[205,190,112,1],[139,129,76,1],[255,255,224,1],[238,238,209,1],[205,205,180,1],[139,139,122,1],[255,255,0,1],[238,238,0,1],[205,205,0,1],[139,139,0,1],[255,215,0,1],[238,201,0,1],[205,173,0,1],[139,117,0,1],[255,193,37,1],[238,180,34,1],[205,155,29,1],[139,105,20,1],[255,185,15,1],[238,173,14,1],[205,149,12,1],[139,101,8,1],[255,193,193,1],[238,180,180,1],[205,155,155,1],[139,105,105,1],[255,106,106,1],[238,99,99,1],[205,85,85,1],[139,58,58,1],[255,130,71,1],[238,121,66,1],[205,104,57,1],[139,71,38,1],[255,211,155,1],[238,197,145,1],[205,170,125,1],[139,115,85,1],[255,231,186,1],[238,216,174,1],[205,186,150,1],[139,126,102,1],[255,165,79,1],[238,154,73,1],[205,133,63,1],[139,90,43,1],[255,127,36,1],[238,118,33,1],[205,102,29,1],[139,69,19,1],[255,48,48,1],[238,44,44,1],[205,38,38,1],[139,26,26,1],[255,64,64,1],[238,59,59,1],[205,51,51,1],[139,35,35,1],[255,140,105,1],[238,130,98,1],[205,112,84,1],[139,76,57,1],[255,160,122,1],[238,149,114,1],[205,129,98,1],[139,87,66,1],[255,165,0,1],[238,154,0,1],[205,133,0,1],[139,90,0,1],[255,127,0,1],[238,118,0,1],[205,102,0,1],[139,69,0,1],[255,114,86,1],[238,106,80,1],[205,91,69,1],[139,62,47,1],[255,99,71,1],[238,92,66,1],[205,79,57,1],[139,54,38,1],[255,69,0,1],[238,64,0,1],[205,55,0,1],[139,37,0,1],[255,0,0,1],[238,0,0,1],[205,0,0,1],[139,0,0,1],[255,20,147,1],[238,18,137,1],[205,16,118,1],[139,10,80,1],[255,110,180,1],[238,106,167,1],[205,96,144,1],[139,58,98,1],[255,181,197,1],[238,169,184,1],[205,145,158,1],[139,99,108,1],[255,174,185,1],[238,162,173,1],[205,140,149,1],[139,95,101,1],[255,130,171,1],[238,121,159,1],[205,104,137,1],[139,71,93,1],[255,52,179,1],[238,48,167,1],[205,41,144,1],[139,28,98,1],[255,62,150,1],[238,58,140,1],[205,50,120,1],[139,34,82,1],[255,0,255,1],[238,0,238,1],[205,0,205,1],[139,0,139,1],[255,131,250,1],[238,122,233,1],[205,105,201,1],[139,71,137,1],[255,187,255,1],[238,174,238,1],[205,150,205,1],[139,102,139,1],[224,102,255,1],[209,95,238,1],[180,82,205,1],[122,55,139,1],[191,62,255,1],[178,58,238,1],[154,50,205,1],[104,34,139,1],[155,48,255,1],[145,44,238,1],[125,38,205,1],[85,26,139,1],[171,130,255,1],[159,121,238,1],[137,104,205,1],[93,71,139,1],[255,225,255,1],[238,210,238,1],[205,181,205,1],[139,123,139,1],[169,169,169,1],[169,169,169,1],[0,0,139,1],[0,139,139,1],[139,0,139,1],[139,0,0,1],[144,238,144,1]];Q.CO["Pastels"]=[[226,145,145,1],[153,221,146,1],[147,216,185,1],[148,196,211,1],[148,154,206,1],[179,148,204,1],[204,150,177,1],[204,164,153,1],[223,229,146,1],[255,165,96,1],[107,255,99,1],[101,255,204,1],[101,196,255,1],[101,107,255,1],[173,101,255,1],[255,101,244,1],[255,101,132,1],[255,101,101,1]];Q.CO["Reds And Purples"]=[[205,92,92,1],[178,34,34,1],[165,42,42,1],[233,150,122,1],[250,128,114,1],[255,160,122,1],[255,127,80,1],[240,128,128,1],[255,99,71,1],[255,69,0,1],[255,0,0,1],[255,105,180,1],[255,20,147,1],[255,192,203,1],[255,182,193,1],[219,112,147,1],[176,48,96,1],[199,21,133,1],[208,32,144,1],[255,0,255,1],[238,130,238,1],[221,160,221,1],[218,112,214,1],[186,85,211,1],[153,50,204,1],[148,0,211,1],[138,43,226,1],[160,32,240,1],[147,112,219,1],[216,191,216,1]];Q.CO["Web"]=[[255,255,255,1],[255,255,204,1],[255,255,153,1],[255,255,102,1],[255,255,51,1],[255,255,0,1],[255,204,255,1],[255,204,204,1],[255,204,153,1],[255,204,102,1],[255,204,51,1],[255,204,0,1],[255,153,255,1],[255,153,204,1],[255,153,153,1],[255,153,102,1],[255,153,51,1],[255,153,0,1],[255,102,255,1],[255,102,204,1],[255,102,153,1],[255,102,102,1],[255,102,51,1],[255,102,0,1],[255,51,255,1],[255,51,204,1],[255,51,153,1],[255,51,102,1],[255,51,51,1],[255,51,0,1],[255,0,255,1],[255,0,204,1],[255,0,153,1],[255,0,102,1],[255,0,51,1],[255,0,0,1],[204,255,255,1],[204,255,204,1],[204,255,153,1],[204,255,102,1],[204,255,51,1],[204,255,0,1],[204,204,255,1],[204,204,204,1],[204,204,153,1],[204,204,102,1],[204,204,51,1],[204,204,0,1],[204,153,255,1],[204,153,204,1],[204,153,153,1],[204,153,102,1],[204,153,51,1],[204,153,0,1],[204,102,255,1],[204,102,204,1],[204,102,153,1],[204,102,102,1],[204,102,51,1],[204,102,0,1],[204,51,255,1],[204,51,204,1],[204,51,153,1],[204,51,102,1],[204,51,51,1],[204,51,0,1],[204,0,255,1],[204,0,204,1],[204,0,153,1],[204,0,102,1],[204,0,51,1],[204,0,0,1],[153,255,255,1],[153,255,204,1],[153,255,153,1],[153,255,102,1],[153,255,51,1],[153,255,0,1],[153,204,255,1],[153,204,204,1],[153,204,153,1],[153,204,102,1],[153,204,51,1],[153,204,0,1],[153,153,255,1],[153,153,204,1],[153,153,153,1],[153,153,102,1],[153,153,51,1],[153,153,0,1],[153,102,255,1],[153,102,204,1],[153,102,153,1],[153,102,102,1],[153,102,51,1],[153,102,0,1],[153,51,255,1],[153,51,204,1],[153,51,153,1],[153,51,102,1],[153,51,51,1],[153,51,0,1],[153,0,255,1],[153,0,204,1],[153,0,153,1],[153,0,102,1],[153,0,51,1],[153,0,0,1],[102,255,255,1],[102,255,204,1],[102,255,153,1],[102,255,102,1],[102,255,51,1],[102,255,0,1],[102,204,255,1],[102,204,204,1],[102,204,153,1],[102,204,102,1],[102,204,51,1],[102,204,0,1],[102,153,255,1],[102,153,204,1],[102,153,153,1],[102,153,102,1],[102,153,51,1],[102,153,0,1],[102,102,255,1],[102,102,204,1],[102,102,153,1],[102,102,102,1],[102,102,51,1],[102,102,0,1],[102,51,255,1],[102,51,204,1],[102,51,153,1],[102,51,102,1],[102,51,51,1],[102,51,0,1],[102,0,255,1],[102,0,204,1],[102,0,153,1],[102,0,102,1],[102,0,51,1],[102,0,0,1],[51,255,255,1],[51,255,204,1],[51,255,153,1],[51,255,102,1],[51,255,51,1],[51,255,0,1],[51,204,255,1],[51,204,204,1],[51,204,153,1],[51,204,102,1],[51,204,51,1],[51,204,0,1],[51,153,255,1],[51,153,204,1],[51,153,153,1],[51,153,102,1],[51,153,51,1],[51,153,0,1],[51,102,255,1],[51,102,204,1],[51,102,153,1],[51,102,102,1],[51,102,51,1],[51,102,0,1],[51,51,255,1],[51,51,204,1],[51,51,153,1],[51,51,102,1],[51,51,51,1],[51,51,0,1],[51,0,255,1],[51,0,204,1],[51,0,153,1],[51,0,102,1],[51,0,51,1],[51,0,0,1],[0,255,255,1],[0,255,204,1],[0,255,153,1],[0,255,102,1],[0,255,51,1],[0,255,0,1],[0,204,255,1],[0,204,204,1],[0,204,153,1],[0,204,102,1],[0,204,51,1],[0,204,0,1],[0,153,255,1],[0,153,204,1],[0,153,153,1],[0,153,102,1],[0,153,51,1],[0,153,0,1],[0,102,255,1],[0,102,204,1],[0,102,153,1],[0,102,102,1],[0,102,51,1],[0,102,0,1],[0,51,255,1],[0,51,204,1],[0,51,153,1],[0,51,102,1],[0,51,51,1],[0,51,0,1],[0,0,255,1],[0,0,204,1],[0,0,153,1],[0,0,102,1],[0,0,51,1],[0,0,0,1]];Q.PT={};Q.PT["DinPattern"]=new Array(38);Q.PT["Gaudi"]=new Array(31);Q.PT["Headlock"]=new Array(141);Q.PT["Squidfingers"]=new Array(158);vars.CO=Q.CO["Oxygen"];vars.GD=Q.GD["Web v2.0"];vars.PT=Q.PT["Squidfingers"];canvas={"history_n":25,"history_mk":function(){var c="";canvas.history_r={"n":0,"r":{0:0},"data":{0:[canvas.W,canvas.H]},"a":0,"z":0};for(var a=0;a<=canvas.history_n;a++){c+='<canvas id="history_'+a+'" width="'+canvas.W+'" height="'+canvas.H+'">'+"</canvas>";}$("cHistory").innerHTML=c;$2D("history_0").drawImage($("ctx_box"),0,0,canvas.W,canvas.H);var b=gui.Y;$C("MM","history")[0].innerHTML='<div class="z"></div>'+b.kontrol("hi");$S("hiKontrol").display="none";b.cur[b.id]=0;b.hi(1);},"history_set":function(q,t,m){if($("history_0")){var g=gui.Y,f=canvas.history_r;if(isNaN(q)){var k=f.z;var l=f[f.n+1];f.r[f.n+1]=(f.n%canvas.history_n)+1;f.z=++f.n;f.r[f.a=Math.max(0,f.n-canvas.history_n)]=0;if(m){f.data[f.n]=[canvas.W,canvas.H,m[0],m[1],];}else{f.data[f.n]=[canvas.W,canvas.H,vars.type,vars.typeImg,q];}if(f.r[f.n+1]){for(var h=f.n+1;h<=k;h++){f.data[h]=[];}}var p="history_"+f.r[f.n],n="ctx_box";$(p).width=canvas.W;$(p).height=canvas.H;}else{var p="ctx_box",n="history_"+f.r[f.n];canvas.W=f.data[f.n][0];canvas.H=f.data[f.n][1];$("ctx_box").width=canvas.W;$("ctx_box").height=canvas.H;crop.resize();}var j=$2D(p);co.del(j);j.drawImage($(n),0,0,canvas.W,canvas.H);if(n=="ctx_box"){j.drawImage($("ctx_temp"),0,0,canvas.W,canvas.H);}if(!t){g.cur[g.id]=f.z-5;}g.hi(1);gui.Y.kontrol_update("hi");}},"close":function(){$S("canvas").display="none";$("history").innerHTML="";},"resize":function(a,b){a=Math.max(90,a);b=Math.max(60,b);$C("TM","canvas")[0].style.width=a+"px";$C("MM","canvas")[0].style.width=a+"px";$C("BM","canvas")[0].style.width=a+"px";$C("ML","canvas")[0].style.height=b+"px";$C("MM","canvas")[0].style.height=b+"px";$C("MR","canvas")[0].style.height=b+"px";$S("cBound").width=a+"px";$S("cBound").height=b+"px";},"mode_sw":function(c){var a={"paint":"source-over","light":"lighter"},b=$C("cur",$(c).parentNode);if(b[0]){b[0].className="";}$(c).className="cur";vars.mode=$(c).innerHTML;vars.cache(1);$2D("ctx_temp").globalCompositeOperation=canvas.mode=a[$(c).innerHTML];},"mode":"source-over"};var preventDefault=true;var init={"canvas":function(j,m,l){gui_swatch.id="CO";function n(a){return(Math.floor(Math.random()*a));}$("ctx_box").width=canvas.W=j;$("ctx_box").height=canvas.H=m;crop.apply({X:0,Y:0},{X:j,Y:m});if(isNaN(vars.winW)||isNaN(vars.winH)){vars.winW=parseInt(canvas.W);vars.winH=parseInt(canvas.H);}if(l){var k=new Image();k.src=l;k.onload=function(){var a=$2D("ctx_box");co.del(a);a.drawImage(k,0,0,canvas.W,canvas.H);};}else{var g={X:0,Y:0},f={X:j,Y:m},o=$2D("ctx_box");o.rect(0,0,j,m);co.gradient(g,f,o,vars.GD[n(vars.GD.length)],"fill",1);}},"content":function(){if(vars.winMax==1){win_size.max();}else{if(!isNaN(vars.winW)){win_size.fu({W:zero(vars.winW),H:zero(vars.winH)},win_size.construct({}));}else{canvas.resize(640,480);}}init.canvas(640,480);gui.options();gui_tools.imageMap();gui_palette.update("stroke");gui_palette.update("fill");gui_palette.zindex(vars.id);crop.ratio_mk();gui_color.mk();gui_gradient.mk();gui_pattern.mk();gui_swatch.mk();gui_filter.mk();win.feed();gui_tools.imageCurrent(vars.tool);canvas.mode_sw(vars.mode=vars.mode?vars.mode:"paint");canvas.history_mk();init.events();},"events":function(){var f=$("cBound");f.oncontextmenu=function(g){if({"zoom":1,"path":1,"shape":1,"marquee":1}[vars.type]){return false;}};f.ondblclick=function(g){if(vars.type=="text"){noMove();}};f.onmousemove=function(h){if(stop){if({"marquee":1,"text":1,"crop":1}[vars.type]){mouse.cursor(h,this);}if(vars.type=="picker"){var g=XY(h);g.X-=abPos(this).X;g.Y-=abPos(this).Y;g.X=Math.max(0,Math.min((canvas.W)?canvas.W:vars.winW-1,g.X));g.Y=Math.max(0,Math.min((canvas.H)?canvas.H:vars.winH-1,g.Y));picker.core(g,"","move");}}};f.onmousedown=function(h){if(vars.type=="crop"){co.core(h,crop.core);}else{if(vars.type=="fill"){co.core(h,draw.fill);}else{if(vars.type=="marquee"){co.core(h,marquee.core);}else{if(vars.type=="picker"){var g=XY(h);g.X-=abPos(this).X;g.Y-=abPos(this).Y;g.X=Math.max(0,Math.min(canvas.W-1,g.X));g.Y=Math.max(0,Math.min(canvas.H-1,g.Y));picker.core(g,g,"down",h);}else{if(vars.type=="shape"){co.core(h,draw.shape);}else{if(vars.type=="text"){co.core(h,draw.text);}else{if({"calligraphy":1,"stamp":1}[vars.type]){if(stamp.loaded){co.core(h,draw[vars.type]);}else{noMove();}}else{if(vars.type=="spirograph"){co.core(h,draw.spirograph);}else{if({"brush":1,"pencil":1,"eraser":1}[vars.type]){co.core(h,draw[vars.type]);}else{return noMove();}}}}}}}}}return false;};f.onmouseout=function(h){if(stop){if(vars.type=="picker"){var g=XY(h);g.X-=abPos(this).X;g.Y-=abPos(this).Y;g.X=Math.max(0,Math.min((canvas.W)?canvas.W:vars.winW-1,g.X));g.Y=Math.max(0,Math.min((canvas.H)?canvas.H:vars.winH-1,g.Y));picker.core(g);}}};var f={"stamp":$C("MM","options"),"hi":$C("MM","history"),"CO":$C("CO","swatch"),"GD":$C("GD","swatch"),"PT":$C("PT","swatch")};function b(g){Event.add(f[g][0],{el:"DOMMouseScroll",e:"onmousewheel"},function(h){gui.Y.id=g;gui.Y.wheel(h);h.preventDefault();});}for(var c in f){b(c);}var f=$C("gui",document.body);for(var c=0;c<f.length;c++){if(f[c].onmousedown){continue;}Event.add(f[c],{el:"mousedown",e:"onmousedown"},function(g){core.fu(this.id,g,{fu:core.win,Y1:19,z:true});});}var a=$("canvas");Event.add(a,{el:"dragover",e:"ondragover"},function(g){g.stopPropagation();g.preventDefault();});Event.add(a,{el:"dragenter",e:"ondragenter"},function(g){g.stopPropagation();g.preventDefault();});Event.add(a,{el:"drop",e:"ondrop"},function(h){h.preventDefault();var k=h.dataTransfer.files[0];var j=k.type;if(j.indexOf("image")==-1){return;}var g=new FileReader();g.onload=function(m){console.info("reader onload call");var l=new Image();l.src=m.target.result;l.onload=function(){drawImage(this);};};g.onerror=function(m){var l=m.target.error.code;if(l==2){alert("MUST RUN in HTTP");}else{alert("error code: "+l);}};g.readAsDataURL(k);console.info("reader data success");});},"images":function(){var a="media/gui/";op_8x8=new Image();op_8x8.src=a+"op_8x8.gif";path={point:new Image(),node_select:new Image()};path.point.src=a+"point.png";path.node_select.src=a+"node_select.png";},"swatch":function(){var a=N.rand;init.images();if(typeof ScreenMetrics=="function"){$.metrics=ScreenMetrics();}function b(f,h){var h=vars.PT.length;var g;if(vars["PT*"]=="Squidfingers"){g=Math.random()>0.5?"82":"105";}else{g=a(h);}src=gui_pattern.dir+vars["PT*"]+"/"+(gui_swatch.n[f+"PT"]=g)+"-live.jpg";gui_pattern.o[f].src=src;vars[f+"PT"].src=src;gui_swatch.n[f+"PT"]=h-gui_swatch.n[f+"PT"];}function c(g){var j=vars[g].length,f=a(j),h=a(j);vars["fill"+g]=vars[g][f];gui_swatch.n["fill"+g]=f+1;vars["stroke"+g]=vars[g][h];gui_swatch.n["stroke"+g]=h+1;}vars.CO=Q.CO[vars["CO*"]];vars.GD=Q.GD[vars["GD*"]];vars.PT=Q.PT[vars["PT*"]];c("CO");c("GD");b("fill");b("stroke");gui_pattern.o.fill.onload=function(){if(gui_pattern.o.stroke.loaded){init.content();}gui_pattern.o.fill.loaded=1;};gui_pattern.o.stroke.onload=function(){if(gui_pattern.o.fill.loaded){init.content();}gui_pattern.o.stroke.loaded=1;};}};var defaultWidth=640,defaultHeight=480;var setCanvasSize=function(f,b){var g=document.getElementById("canvas");var c=b/f,a=defaultHeight/defaultWidth;if(c>=a&&b>=defaultHeight){b=defaultHeight;f=b/c;}if(c<=a&&f>=defaultWidth){f=defaultWidth;b=f*c;}canvas.W=f;canvas.H=b;win_size.fu2({W:f,H:b},win_size.construct({}));};var drawImage=function(a){setTimeout(function(){setCanvasSize(a.width,a.height);var b=$2D("ctx_box");co.del(b);b.drawImage(a,0,0,canvas.W,canvas.H);canvas.history_mk();},0);};var ants=[];var ants_n=0;window.onresize=win.feed;window.currentBlob=null;window.currentPort=null;window.preview=function(){var a=$("ctx_box").toDataURL("image/png");w=window.open("previewonlocal.html");w.onload=function(){var b=w.document.getElementById("img");b.src=a;};};window.saveDrawing=function(){var c=$("ctx_box").toDataURL("image/png");var b="imageData="+c;var a=new XMLHttpRequest();a.open("POST","saveimage.php",true);a.setRequestHeader("Content-Type","application/upload");a.onreadystatechange=function(){if(a.readyState==4){var f=$("fileinfo");f.innerHTML=a.responseText;if(f.innerHTML.trim().length>0){$("shareicon").style.backgroundImage="url(media/gui/share.png)";}else{}}};a.send(c);};window.share=function(){if(fileinfo.innerHTML.trim().length>0){url=$("fileinfo").innerHTML;w=window.open("shareimage.html");w.onload=function(){var a=w.document.getElementById("img");a.src=url;};}};window.testsaveDrawing=function(a){if($(a)){window.open($(a).toDataURL());}};window.onload=function(){if(document.location.hash=="#snapshot"){document.body.style.background="transparent";window.saveDrawing=function(a){if(!window.currentPort){window.href=$("ctx_box").toDataURL();}var b=$("ctx_box").toDataURL();window.currentPort.postMessage("send","*");window.currentPort.postMessage(b,"*");return false;};window.onmessage=function(b){if(b.origin.indexOf("chrome-extension:")==-1){if(b.origin!="http://mugtug.com"){if(b.origin!="https://mugtugdarkroom.appspot.com"){if(b.origin!="https://mugtugsketchpad.appspot.com"){return;}}}}if(b.source!=window.self){b.source.postMessage("recv","*");}var f=b.data;if(typeof(f)=="object"&&f.type){if(window.currentBlob){webkitURL.revokeObjectURL(window.currentBlob);}window.currentBlob=webkitURL.createObjectURL(f);f=window.currentBlob;window.currentPort=b.source;}if(f.indexOf(":")>-1){var c=document.createElement("img");c.onload=function(){var g=c.naturalWidth;var a=c.naturalHeight;win_size.fu({W:g,H:a},win_size.construct({}));canvas.resize(g,a);init.canvas(g,a,f);};c.src=f;}};if(window.parent&&window.parent!=window.self){setTimeout(function(){if(window.parent.postMessage){window.parent.postMessage("ack","*");}},300);}}setTimeout(function(){dtx2D=document.createElement("canvas");ctx2D=dtx2D.getContext("2d");},100);setTimeout(init.swatch,250);setTimeout(function(){data2pattern(ants,["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAMklEQVQYlYXOtw0AMAzEQO6/NN04QAlW+cdCAALmOzsftGjAHGRUX9DhDSbcNmMJuocXA4afYTYwTaEAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAMklEQVQYlYXPsQ0AMAjEQO+/tFOkIALxQaI6FwDgu334YAUL3iCgQ/tNJFQr2L4hoeoBA4afYdiStBMAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAMklEQVQYlWP4DwUMDAwoGC6OTxIqh1sSQwEWSYQCHJIQBXgk/2PIoruJAZ/k/////wMAA4afYVpnmEkAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAALUlEQVQYlWP4jwYYGBhQMT7J////IxRgk4QrwCUJlcMtiaEAh4PxSkIU4PMqAAOGn2Gql3FAAAAAAElFTkSuQmCC"]);},200);};Color={};Color.HEX_STRING=function(b){var a=b.toString(16),c=a.length;while(c<6){a="0"+a;c++;}return a;};Color.RGB_HSV=function(c){var g=c.R/255,f=c.G/255,b=c.B/255,q,k,j;var l=Math.min(g,f,b),n=Math.max(g,f,b),a=n-l;j=n;if(a==0){q=0;k=0;}else{k=a/n;var p=(((n-g)/6)+(a/2))/a;var h=(((n-f)/6)+(a/2))/a;var m=(((n-b)/6)+(a/2))/a;if(g==n){q=m-h;}else{if(f==n){q=(1/3)+p-m;}else{if(b==n){q=(2/3)+h-p;}}}if(q<0){q+=1;}if(q>1){q-=1;}}return{H:q*360,S:k*100,V:j*100};};Color.RGB_HSV=function(g){var f=g.R/255,c=g.G/255,b=g.B/255,q,k,j;var l=Math.min(f,c,b),n=Math.max(f,c,b),a=n-l;j=n;if(a==0){q=0;k=0;}else{k=a/n;var p=(((n-f)/6)+(a/2))/a;var h=(((n-c)/6)+(a/2))/a;var m=(((n-b)/6)+(a/2))/a;if(f==n){q=m-h;}else{if(c==n){q=(1/3)+p-m;}else{if(b==n){q=(2/3)+h-p;}}}if(q<0){q+=1;}if(q>1){q-=1;}}return{H:q*360,S:k*100,V:j*100};};Color.HSV_RGB=function(h){var c=h.H/360,b=h.S/100,a=h.V/100,g,f,j;if(b==0){g=f=j=Math.round(a*255);}else{if(c>=1){c=0;}c=6*c;D=c-Math.floor(c);A=Math.round(255*a*(1-b));j=Math.round(255*a*(1-(b*D)));C=Math.round(255*a*(1-(b*(1-D))));a=Math.round(255*a);switch(Math.floor(c)){case 0:g=a;f=C;j=A;break;case 1:g=j;f=a;j=A;break;case 2:g=A;f=a;j=C;break;case 3:g=A;f=j;j=a;break;case 4:g=C;f=A;j=a;break;case 5:g=a;f=A;j=j;break;}}return{R:g,G:f,B:j};};gui_filter={mk:function(){if(!gui_filter.filterOpCF){gui_filter.l1l111llll();}var c=[],a=0;for(var b in gui_filter.r){c[a++]=b;}var f="";f=gui.menu.build("fi",c)+'<div id="fi" class=squares></div>'+gui.Y.kontrol("fi",65)+' <div style="background: #555; height: 1px; margin: 100px 0 2px; "></div>'+'<div id="filter_placeholder"><div>';$C("MM","filter")[0].innerHTML="<div class=z>"+f+"</div>";gui_filter.reset();},current:function(c){var a=gui_filter.fileNumber;gui_filter.fileNumber=c.id.substr(2);if($("fi"+a)){gui_filter.preview(a);$("fi"+a).className="";}$("fi"+gui_filter.fileNumber).className="cur";vars.cache(1);},uri:function(a){return"media/glyph/"+vars.filter+"/"+(filter.fileNumber-1)+"-"+a+".png";},preview:function(b,a){if($("fi"+b)&&gui_filter.src[b].src){function g(c){return(c<34?(34-c)/2:0);}function f(c){h={W:(34/c)*h.W,H:(34/c)*h.H};}var k=$2D("fi"+b),j=gui_filter.src[b],h={W:j.width,H:j.height};if(h.W>=h.H){f(h.W);}else{if(h.H>h.W){f(h.H);}}k.clearRect(0,0,34,34);k.drawImage(j,g(h.W),g(h.H),h.W,h.H);}},reset:function(){var h=gui.Y;r=h.r.fi;if(!gui_filter.fileNumber){gui_filter.fileNumber=1;}var f=parseInt(gui_filter.fileNumber),c=gui_filter.r[vars.fi],g=r.n()-r.display,j=(f/c<=0.5)?-1:2;h.prev.fi=null;h.cur.fi=Math.max(1,Math.min(g,Math.floor(((f+j)/c)*g)));h.id="fi";h.fi();h.kontrol_update(h.id);},buildfilterOp:function(n,m){vars["imgid"]=m;var l=gui_filter.filterNameDic[n][m];var a=gui_filter.filterOpCF[l],h="";for(var g in a.vars){if(!vars[g]){var j=a.vars[g];vars[g]=j;}}for(var g in a.build){g=a.build[g];var c=g.indexOf("_")!=-1?g.substr(0,g.indexOf("_")):g;var k=c.replace("_"," ").toLowerCase();var f=(g=="br")?"<br>":gui[cF[g].type].build(k,g,cF[g].val,"h");h+=f;}h+='<input type=button style="float:left; margin-left: 20px" value="ok" onclick="gui_filter.filterok();return false;">'+'<input type=button style="float:right; margin-right: 30px" value="cancel" onclick="gui_filter.filtercancel();return false;">';var c=$("filter_placeholder").innerHTML=h;$C("TML","filter")[0].innerHTML="filter  -  "+l;gui_filter.resize(a.size);if(a.build.length==0||a.run){hooker.fi();}},resize:function(h){function g(j){j.style.height=h+"px";}var f=$("filter"),b=$C("ML",f)[0],a=$C("MM",f)[0],c=$C("MR",f)[0];g(b);g(c);g(a);$S("filter").height=(h+40)+"px";win.r["filter"][3]=h+40;},filterok:function(){var b=$2D("ctx_temp");co.copy("ctx_temp","ctx_box");b.clearRect(0,0,canvas.W,canvas.H);var a=$C("TML","filter")[0].innerHTML.split("-");var c="filter";if(a&&a[1]){c=a[1].trim();}canvas.history_set("NaN","",[c,"Filter"]);if(marquee.ghost){marquee.run();b.restore();}moved=false;},filtercancel:function(){var a=$2D("ctx_filter");a.clearRect(0,0,canvas.W,canvas.H);$2D("ctx_temp").clearRect(0,0,canvas.W,canvas.H);},src:[],r:{"blur":6,"color":8,"edge":2,"transform":10,"stylize":7},filterNameDic:{blur:{"1":"basicblur","2":"gaussblur","3":"highpass","4":"lensblur","5":"glow","6":"unsharp"},color:{"1":"adjustHSB","2":"adjustRGB","3":"contrast","4":"exposure","5":"gain","6":"gamma","7":"invert","8":"gray"},edge:{"1":"detectEdge","2":"laplace"},transform:{"1":"mosaic","2":"sphere","3":"diffuse","4":"displace","5":"kaleido","6":"marble","7":"pinch","8":"polar","9":"circle","10":"twirl"},stylize:{"1":"addnoise","2":"contour","3":"dissolve","4":"emboss","5":"sparkle","6":"threshold","7":"grayout"}},"l1l111llll":function(){cF["Block_mosaic"]={type:"X",val:[0,100,100]},cF["x-Radius_basicblur"]={type:"X",val:[0,30,100]},cF["y-Radius_basicblur"]={type:"X",val:[0,30,100]},cF["Itertations_basicblur"]={type:"X",val:[0,10]},cF["Premultiply_basicblur"]={type:"check",val:["Premultiply_basicblur","true","false"]},cF["Radius_gaussblur"]={type:"X",val:[0,40,40]},cF["Premultiply_gaussblur"]={type:"check",val:["Premultiply_gaussblur","true","false"]},cF["Radius_highpass"]={type:"X",val:[0,100,100]},cF["Radius_glow"]={type:"X",val:[0,100,100]},cF["Amount_glow"]={type:"X",val:[0,100,100]},cF["Radius_unsharp"]={type:"X",val:[0,100,100]},cF["Amount_unsharp"]={type:"X",val:[0,100,100]},cF["Threshold_unsharp"]={type:"X",val:[0,255,100]},cF["Radius_lensblur"]={type:"X",val:[0,50,50]},cF["Sides_lensblur"]={type:"X",val:[3,12,12]},cF["Bloom_lensblur"]={type:"X",val:[1,8]},cF["Bloom-Threshold_lensblur"]={type:"X",val:[0,255]},cF["R_adjustRGB"]={type:"X",val:[-1,2,1,"float",1]},cF["G_adjustRGB"]={type:"X",val:[-1,2,1,"float",1]},cF["B_adjustRGB"]={type:"X",val:[-1,2,1,"float",1]},cF["H_adjustHSB"]={type:"X",val:[-1,2,1,"float",1]},cF["S_adjustHSB"]={type:"X",val:[-1,2,1,"float",1]},cF["B_adjustHSB"]={type:"X",val:[-1,2,1,"float",1]},cF["Bright_contrast"]={type:"X",val:[0,2,2,"float"]};cF["Contrast_contrast"]={type:"X",val:[0,2,2,"float"]},cF["scale_exposure"]={type:"X",val:[0,5,5,"float"]},cF["gain_gain"]={type:"X",val:[0,1,1,"float"]},cF["bias_gain"]={type:"X",val:[0,1,1,"float"]},cF["R_gamma"]={type:"X",val:[0,3,3,"float"]},cF["G_gamma"]={type:"X",val:[0,3,3,"float"]},cF["B_gamma"]={type:"X",val:[0,3,3,"float"]},cF["r1_dog"]={type:"X",val:[-1,1]},cF["r2_dog"]={type:"X",val:[-1,1]},cF["normal_dog"]={type:"check",val:["normal_dog","true","false"]},cF["invert_dog"]={type:"check",val:["invert_dog","true","false"]},cF["blocksize_mosaic"]={type:"X",val:[1,100,100]},cF["amount_addnoise"]={type:"X",val:[0,100,100]},cF["density_addnoise"]={type:"X",val:[0,100,100]},cF["mono_addnoise"]={type:"check",val:["mono_addnoise","true","false"]},cF["level_contour"]={type:"X",val:[0,30,30]},cF["Offset_contour"]={type:"X",val:[0,100,100]},cF["scale_contour"]={type:"X",val:[0,1,1,"float"]},cF["density_dissolve"]={type:"X",val:[0,100,100]},cF["softness_dissolve"]={type:"X",val:[0,100,100]},cF["angle_emboss"]={type:"X",val:[0,360,360]},cF["intensity_emboss"]={type:"X",val:[0,90,90]},cF["height_emboss"]={type:"X",val:[0,100,100]},cF["texture_emboss"]={type:"check",val:["texture_emboss","true","false"]},cF["rays_sparkle"]={type:"X",val:[0,300,300]},cF["radius_sparkle"]={type:"X",val:[0,300,300]},cF["amount_sparkle"]={type:"X",val:[0,100,100]},cF["centre-X_sparkle"]={type:"X",val:[0,100,100]},cF["centre-Y_sparkle"]={type:"X",val:[0,100,100]},cF["random_sparkle"]={type:"X",val:[0,100,100]},cF["lower_threshold"]={type:"X",val:[0,255,255]},cF["upper_threshold"]={type:"X",val:[0,255,255]},cF["centre-X_rays"]={type:"X",val:[0,100,100]},cF["centre-Y_rays"]={type:"X",val:[0,100,100]},cF["angle_rays"]={type:"X",val:[0,360,360]},cF["distance_rays"]={type:"X",val:[0,200,200]},cF["rotation_rays"]={type:"X",val:[0,360,360]},cF["zoom_rays"]={type:"X",val:[0,2,2,"float"]},cF["opacity_rays"]={type:"X",val:[0,100,100]},cF["strength_rays"]={type:"X",val:[0,5,5,"float"]},cF["threshold_rays"]={type:"X",val:[0,100,100]},cF["rays-only_rays"]={type:"check",val:["rays-only_rays","true","false"]},cF["centre-X_circle"]={type:"X",val:[0,100,100]},cF["centre-Y_circle"]={type:"X",val:[0,100,100]},cF["radius_circle"]={type:"X",val:[0,100,100]},cF["height_circle"]={type:"X",val:[0,400,400]},cF["angle_circle"]={type:"X",val:[0,360,360]},cF["spread_circle"]={type:"X",val:[0,3600,3600]},cF["edge_circle"]={type:"radio",val:["edge_circle","none","clamp","wrap"]},cF["scale_diffuse"]={type:"X",val:[1,100,100]},cF["edge_diffuse"]={type:"radio",val:["edge_diffuse","none","clamp","wrap"]},cF["amount_displace"]={type:"X",val:[0,1,1,"float"]},cF["edge_displace"]={type:"radio",val:["edge_displace","none","clamp","wrap"]},cF["centre-X_kaleido"]={type:"X",val:[0,100,100]},cF["centre-Y_kaleido"]={type:"X",val:[0,100,100]},cF["angle1_kaleido"]={type:"X",val:[0,720,720,"",360]},cF["angle2_kaleido"]={type:"X",val:[0,720,720,"",360]},cF["radius_kaleido"]={type:"X",val:[0,100,100]},cF["side_kaleido"]={type:"X",val:[1,27,27]},cF["edge_kaleido"]={type:"radio",val:["edge_kaleido","none","clamp","wrap"]},cF["x-scale_marble"]={type:"X",val:[1,100,100]},cF["y-scale_marble"]={type:"X",val:[1,100,100]},cF["turbul_marble"]={type:"X",val:[1,15,15]},cF["edge_marble"]={type:"radio",val:["edge_marble","none","clamp","wrap"]},cF["centre-X_pinch"]={type:"X",val:[0,100,100]},cF["centre-Y_pinch"]={type:"X",val:[0,100,100]},cF["radius_pinch"]={type:"X",val:[1,400,400]},cF["angle_pinch"]={type:"X",val:[0,1440,1440,"",720]},cF["amount_pinch"]={type:"X",val:[0,2,2,"float",1]},cF["edge_pinch"]={type:"radio",val:["edge_pinch","none","clamp","wrap"]},cF["centre-X_polar"]={type:"X",val:[0,100,100]},cF["centre-Y_polar"]={type:"X",val:[0,100,100]},cF["type_polar"]={type:"radio",val:["type_polar","polar2rect","rect2polar"]},cF["angel-X_shear"]={type:"X",val:[0,360,360,"",180]},cF["angel-Y_shear"]={type:"X",val:[0,360,360,"",180]},cF["edge_shear"]={type:"radio",val:["edge_shear","none","clamp","wrap"]},cF["centre-X_sphere"]={type:"X",val:[0,100,100]},cF["centre-Y_sphere"]={type:"X",val:[0,100,100]},cF["radius_sphere"]={type:"X",val:[1,400,400]},cF["refra_sphere"]={type:"X",val:[1,3,3,"float"]},cF["edge_sphere"]={type:"radio",val:["edge_sphere","none","clamp","wrap"]},cF["centre-X_twirl"]={type:"X",val:[0,100,100]},cF["centre-Y_twirl"]={type:"X",val:[0,100,100]},cF["radius_twirl"]={type:"X",val:[1,400,400]},cF["angle_twirl"]={type:"X",val:[0,1440,1440,"",720]},cF["edge_twirl"]={type:"radio",val:["edge_twirl","none","clamp","wrap"]},gui_filter.filterOpCF={"basicblur":{build:["x-Radius_basicblur","y-Radius_basicblur","Itertations_basicblur","Premultiply_basicblur","br"],vars:{"x-Radius_basicblur":0,"y-Radius_basicblur":0,"Itertations_basicblur":2,"Premultiply_basicblur":"true"},size:320},"gaussblur":{build:["Radius_gaussblur","Premultiply_gaussblur","br"],vars:{"Radius_gaussblur":5,"Premultiply_gaussblur":"true"},size:240},"highpass":{build:["Radius_highpass","br"],vars:{"Radius_highpass":100},size:220},"glow":{build:["Radius_glow","Amount_glow","br"],vars:{"Radius_glow":0,"Amount_glow":5},size:260},"unsharp":{build:["Radius_unsharp","Amount_unsharp","Threshold_unsharp","br"],vars:{"Radius_unsharp":0,"Amount_unsharp":5,"Threshold_unsharp":4},size:300},"lensblur":{build:["Radius_lensblur","Sides_lensblur","Bloom_lensblur","Bloom-Threshold_lensblur","br"],vars:{"Radius_lensblur":3,"Sides_lensblur":2,"Bloom_lensblur":2,"Bloom-Threshold_lensblur":255},size:340},"adjustRGB":{build:["R_adjustRGB","G_adjustRGB","B_adjustRGB","br"],vars:{"R_adjustRGB":1,"G_adjustRGB":1,"B_adjustRGB":1},size:300},"adjustHSB":{build:["H_adjustHSB","S_adjustHSB","B_adjustHSB","br"],vars:{"H_adjustHSB":1,"S_adjustHSB":1,"B_adjustHSB":1},size:300},"contrast":{build:["Bright_contrast","Contrast_contrast","br"],vars:{"Bright_contrast":1,"Contrast_contrast":1},size:260},"exposure":{build:["scale_exposure","br"],vars:{"scale_exposure":2},size:220},"gain":{build:["gain_gain","bias_gain","br"],vars:{"gain_gain":0.5,"bias_gain":0.5},size:260},"gamma":{build:["R_gamma","G_gamma","B_gamma","br"],vars:{"R_gamma":1,"G_gamma":1,"B_gamma":1},size:300},"invert":{build:[],vars:{},size:180},"gray":{build:[],vars:{},size:180},"grayout":{build:[],vars:{},size:180},"detectEdge":{build:[],vars:{},size:180},"laplace":{build:[],vars:{},size:180},"mosaic":{build:["blocksize_mosaic","br"],vars:{"blocksize_mosaic":1},size:220},"addnoise":{build:["amount_addnoise","density_addnoise","mono_addnoise","br"],vars:{"amount_addnoise":30,"density_addnoise":30,"mono_addnoise":"false"},size:290},contour:{build:["level_contour","Offset_contour","scale_contour","br"],vars:{"level_contour":5,"Offset_contour":0,"scale_contour":1},size:300},dissolve:{build:["density_dissolve","softness_dissolve","br"],vars:{"density_dissolve":100,"softness_dissolve":1},size:260},emboss:{build:["angle_emboss","intensity_emboss","height_emboss","texture_emboss","br"],vars:{"angle_emboss":270,"intensity_emboss":90,"height_emboss":100,"texture_emboss":"false"},size:330},sparkle:{build:["centre-X_sparkle","centre-Y_sparkle","rays_sparkle","radius_sparkle","amount_sparkle","random_sparkle","br"],vars:{"rays_sparkle":50,"radius_sparkle":25,"amount_sparkle":50,"centre-X_sparkle":50,"centre-Y_sparkle":50,"random_sparkle":50},size:420},threshold:{build:["lower_threshold","upper_threshold","br"],vars:{"lower_threshold":0,"upper_threshold":255},size:260},circle:{build:["centre-X_circle","centre-Y_circle","radius_circle","height_circle","angle_circle","spread_circle","edge_circle","br"],vars:{"centre-X_circle":50,"centre-Y_circle":50,"radius_circle":0,"height_circle":50,"angle_circle":180,"spread_circle":180,"edge_circle":"clamp"},size:490},diffuse:{build:["scale_diffuse","edge_diffuse","br"],vars:{"scale_diffuse":1,"edge_diffuse":"clamp"},size:290},displace:{build:["amount_displace","edge_displace","br"],vars:{"amount_displace":1,"edge_displace":"none"},size:290},kaleido:{build:["centre-X_kaleido","centre-Y_kaleido","angle1_kaleido","angle2_kaleido","radius_kaleido","side_kaleido","edge_kaleido","br"],vars:{"centre-X_kaleido":50,"centre-Y_kaleido":50,"angle1_kaleido":360,"angle2_kaleido":360,"radius_kaleido":0,"side_kaleido":4,"edge_kaleido":"clamp"},size:490},marble:{build:["x-scale_marble","y-scale_marble","turbul_marble","edge_marble","br"],vars:{"x-scale_marble":1,"y-scale_marble":1,"turbul_marble":1,"edge_marble":"clamp"},size:370},pinch:{build:["centre-X_pinch","centre-Y_pinch","radius_pinch","angle_pinch","amount_pinch","edge_pinch","br"],vars:{"centre-X_pinch":50,"centre-Y_pinch":50,"radius_pinch":100,"angle_pinch":720,"amount_pinch":1,"edge_pinch":"clamp"},size:450},polar:{build:["centre-X_polar","centre-Y_polar","type_polar","br"],vars:{"centre-X_polar":50,"centre-Y_polar":50,"type_polar":"rect2polar"},size:320},sphere:{build:["centre-X_sphere","centre-Y_sphere","radius_sphere","refra_sphere","edge_sphere","br"],vars:{"centre-X_sphere":50,"centre-Y_sphere":50,"radius_sphere":100,"refra_sphere":1.5,"edge_sphere":"clamp"},size:410},twirl:{build:["centre-X_twirl","centre-Y_twirl","radius_twirl","angle_twirl","edge_twirl","br"],vars:{"centre-X_twirl":50,"centre-Y_twirl":50,"angle_twirl":720,"radius_twirl":100,"edge_twirl":"clamp"},size:410}};}},function(){function c(j,h,g,f){this.x=j;this.y=h;this.w=g;this.h=f;}function b(f){var g=$2D("ctx_filter");co.copy("ctx_box","ctx_filter");g.globalCompositeOperation=canvas.mode;if(marquee.on){g.save();g.beginPath();marquee.draw(g);g.clip();marquee.on=0;window.clearInterval(marqueeID);}return g;}function a(g){var f=$2D("ctx_filter");if(g=="ok"){co.copy("ctx_filter","ctx_box");f.clearRect(0,0,canvas.W,canvas.H);$2D("ctx_temp").clearRect(0,0,canvas.W,canvas.H);canvas.history_set();return;}co.copy("ctx_filter","ctx_temp");f.clearRect(0,0,canvas.W,canvas.H);if(marquee.ghost){marquee.run();$2D("ctx_temp").restore();}moved=false;}hooker={"change":function(){var k=gui_filter.filterNameDic[vars["fi"]][vars["imgid"]];var h=gui_filter.filterOpCF[k]["vars"];var g={};var j="";for(var f in h){g[f]=vars[f];j+='"'+f+""+'":'+g[f];}},"fi":function(f){var l=b(f);var k=gui_filter.filterNameDic[vars["fi"]][vars["imgid"]];var j=gui_filter.filterOpCF[k]["vars"];var h={};for(var g in j){h[g.substr(0,g.indexOf("_"+k)).replace("-","")]=vars[g];}l1l1l1l1l1[k].fi(h,$("ctx_filter"));a();}};l1l1l1l1l1={"basicblur":{"xRadius":0,"yRadius":0,"Itertations":2,"Premultiply":"true","fi":function(f,t,n){var q=t.width,k=t.height;var m=t.getContext("2d");for(var g in f){this[g]=f[g];}var o=m.getImageData(0,0,q,k);var l=new Date().getTime();var j=l111l11lll.lll1l111l1(o.data);j=this.ll111111l1(f,q,k,j);l111l11lll.delll1l111l1(j,o.data);m.putImageData(o,0,0);},ll111111l1:function(m,f,l,k){var j=new Array(k.length);if(this["Premultiply"]=="true"){l111l11lll.l1ll1lllll(k,0,k.length);}for(var g=0;g<this.Itertations;g++){this.ll1l1l11ll(k,j,f,l,this.xRadius);this.ll1l1l11ll(j,k,l,f,this.yRadius);}this.ll11l11lll(k,j,f,l,this.xRadius);this.ll11l11lll(j,k,l,f,this.yRadius);if(this.Premultiply=="true"){l111l11lll.unl1ll1lllll(k,0,k.length);}return k;},ll1l1l11ll:function(u,t,p,G,v){var s=p-1;var v=parseInt(v);var q=2*v+1;var o=[256*q];for(var F=0;F<256*q;F++){o[F]=parseInt(F/q);}var l=0;for(var k=0;k<G;k++){var K=k;var m=0,f=0,g=0,j=0;for(var F=-v;F<=v;F++){var J=u[(l+parseInt(l111l11lll.l11l1llll1(F,0,p-1)))];m+=(J>>24&255);f+=(J>>16&255);g+=(J>>8&255);j+=(J&255);}for(var n=0;n<p;n++){t[K]=(o[m]<<24|o[f]<<16|o[g]<<8|o[j]);var B=n+v+1;if(B>s){B=s;}var z=n-v;if(z<0){z=0;}var I=u[(l+B)];var H=u[(l+z)];m+=(I>>24&255)-(H>>24&255);f+=((I&16711680)-(H&16711680)>>16);g+=((I&65280)-(H&65280)>>8);j+=(I&255)-(H&255);K+=G;}l+=p;}},ll11l11lll:function(J,H,o,F,p){p-=parseInt(p);var I=1/(1+2*p);var G=0;for(var m=0;m<F;m++){var B=m;H[B]=J[0];B+=F;for(var n=1;n<o-1;n++){var v=G+n;var u=J[v-1];var s=J[v];var K=J[v+1];var P=u>>24&255;var z=u>>16&255;var g=u>>8&255;var l=u&255;var M=s>>24&255;var t=s>>16&255;var R=s>>8&255;var k=s&255;var L=K>>24&255;var q=K>>16&255;var O=K>>8&255;var j=K&255;P=parseInt((M+(P+L)*p)*I);z=parseInt((t+(z+q)*p)*I);g=parseInt((R+(g+O)*p)*I);l=parseInt((k+(l+j)*p)*I);H[B]=(P<<24|z<<16|g<<8|l);B+=F;}H[B]=J[o-1];G+=o;}return H;}},"l111ll11l1":0,"l1ll1ll11l":1,"l11111l1l1":2,"lll1ll1ll1":1,"l111l11ll1":1,"ll111l1111":1,"lll11l1lll":{l1lll1111l:function(f){var n=f*2+1;var m=new Array(n);var l=f/3;var k=2*l*l;var j=6.283186*l;var h=Math.sqrt(j);var g=2*f;var t=0,q=0;for(var s=-f;s<=f;s++){var p=s*s;if(p>g){m[q]=0;}else{m[q]=Math.exp(-p/k)/h;}t+=m[q];q++;}for(var o=0;o<n;o++){m[o]/=t;}return m;},l11l1l1ll1:function(t,q,o,K,U,n,m,F,B){var v=t.length;var u=parseInt(v/2);for(var I=0;I<U;I++){var s=I,p=I*K;for(var J=0;J<K;J++){var P=0,V=0,X=0,Z=0;var O=u;for(var G=-u;G<=u;G++){var W=t[O+G];if(W!=0){var z=J+G;if(z<0){if(B==l1l1l1l1l1.l1ll1ll11l){z=0;}else{if(B==l1l1l1l1l1.l11111l1l1){z=(J+K)%K;}}}else{if(z>=K){if(B==l1l1l1l1l1.l1ll1ll11l){z=K-1;}else{if(B==l1l1l1l1l1.l11111l1l1){z=(J+K)%K;}}}}var M=q[p+z];var l=M>>24&255;var T=M>>16&255;var Y=M>>8&255;var k=M&255;if(m){var j=l/255;T=Math.round(T*j);Y=Math.round(Y*j);k=Math.round(k*j);}Z+=W*l;P+=W*T;V+=W*Y;X+=W*k;}}if((F)&&(Z!=0)&&(Z=255)){var W=255/Z;P*=W;V*=W;X*=W;}var S=n?lllll111l1.l1111l1111(parseInt(Z+0.5)):255;var H=lllll111l1.l1111l1111(parseInt(P+0.5));var L=lllll111l1.l1111l1111(parseInt(V+0.5));var R=lllll111l1.l1111l1111(parseInt(X+0.5));o[s]=(S<<24|H<<16|L<<8|R);s+=U;}}return o;}},gaussblur:{"Radius":2,"Premultiply":"true","fi":function(f,u,k){var v=new Date().getTime();for(var g in f){this[g]=f[g];}var n=u.width,j=u.height;var t=u.getContext("2d");var l=t.getImageData(0,0,n,j);var q=l111l11lll.lll1l111l1(l.data);var o=new Array(q.length);if(this.Radius>0){var m=l1l1l1l1l1.lll11l1lll.l1lll1111l(this.Radius);o=l1l1l1l1l1.lll11l1lll.l11l1l1ll1(m,q,o,n,j,l1l1l1l1l1.lll1ll1ll1,l1l1l1l1l1.lll1ll1ll1&&l1l1l1l1l1.l111l11ll1,false,l1l1l1l1l1.l1ll1ll11l);q=l1l1l1l1l1.lll11l1lll.l11l1l1ll1(m,o,q,j,n,l1l1l1l1l1.lll1ll1ll1,false,l1l1l1l1l1.lll1ll1ll1&&l1l1l1l1l1.l111l11ll1,l1l1l1l1l1.l1ll1ll11l);}l111l11lll.delll1l111l1(q,l.data);t.putImageData(l,0,0);}},glow:{"Radius":0,"Amount":0,"fi":function(H,G,O){var n=new Date().getTime();for(var L in H){this[L]=H[L];}var u=G.width,M=G.height;var m=G.getContext("2d");var g=m.getImageData(0,0,u,M);var l=l111l11lll.lll1l111l1(g.data);var F=new Array(l.length);if(this.Radius>0){var B=l1l1l1l1l1.lll11l1lll.l1lll1111l(this.Radius);F=l1l1l1l1l1.lll11l1lll.l11l1l1ll1(B,l,F,u,M,l1l1l1l1l1.lll1ll1ll1,l1l1l1l1l1.lll1ll1ll1&&l1l1l1l1l1.l111l11ll1,false,l1l1l1l1l1.l1ll1ll11l);l=l1l1l1l1l1.lll11l1lll.l11l1l1ll1(B,F,l,M,u,l1l1l1l1l1.lll1ll1ll1,false,l1l1l1l1l1.lll1ll1ll1&&l1l1l1l1l1.l111l11ll1,l1l1l1l1l1.l1ll1ll11l);}F=l111l11lll.lll1l111l1(g.data);var I=4*this.Amount/100;var z=0;for(var o=0;o<M;o++){for(var t=0;t<u;t++){var v=F[z];var K=v>>16&255;var f=v>>8&255;var k=v&255;var q=l[z];var J=q>>16&255;var P=q>>8&255;var j=q&255;K=lllll111l1.l1111l1111(parseInt(K+I*J));f=lllll111l1.l1111l1111(parseInt(f+I*P));k=lllll111l1.l1111l1111(parseInt(k+I*j));l[z]=(v&4278190080|K<<16|f<<8|k);z++;}}l111l11lll.delll1l111l1(l,g.data);m.putImageData(g,0,0);}},"unsharp":{"Radius":2,"Amount":5,"Threshold":4,"fi":function(t,q,K){var l=new Date().getTime();for(var B in t){this[B]=t[B];}var o=q.width,G=q.height;var O=q.getContext("2d");var g=O.getImageData(0,0,o,G);var M=l111l11lll.lll1l111l1(g.data);var L=new Array(M.length);if(this.Radius>0){var J=l1l1l1l1l1.lll11l1lll.l1lll1111l(this.Radius);L=l1l1l1l1l1.lll11l1lll.l11l1l1ll1(J,M,L,o,G,l1l1l1l1l1.lll1ll1ll1,l1l1l1l1l1.lll1ll1ll1&&l1l1l1l1l1.l111l11ll1,false,l1l1l1l1l1.l1ll1ll11l);M=l1l1l1l1l1.lll11l1lll.l11l1l1ll1(J,L,M,G,o,l1l1l1l1l1.lll1ll1ll1,false,l1l1l1l1l1.lll1ll1ll1&&l1l1l1l1l1.l111l11ll1,l1l1l1l1l1.l1ll1ll11l);}L=l111l11lll.lll1l111l1(g.data);var I=0;var u=4*this.Amount/100;for(var m=0;m<G;m++){for(var n=0;n<o;n++){var H=L[I];var z=H>>16&255;var f=H>>8&255;var k=H&255;var F=M[I];var v=F>>16&255;var P=F>>8&255;var j=F&255;if(Math.abs(z-v)>=this.Threshold){z=lllll111l1.l1111l1111(parseInt((u+1)*(z-v)+v));}if(Math.abs(f-P)>=this.Threshold){f=lllll111l1.l1111l1111(parseInt((u+1)*(f-P)+P));}if(Math.abs(k-j)>=this.Threshold){k=lllll111l1.l1111l1111(parseInt((u+1)*(k-j)+j));}M[I]=(H&4278190080|z<<16|f<<8|k);I++;}}l111l11lll.delll1l111l1(M,g.data);O.putImageData(g,0,0);}},"highpass":{"Radius":2,"fi":function(q,o,L){var z=new Date().getTime();for(var B in q){this[B]=q[B];}var n=o.width,H=o.height;var v=o.getContext("2d");var g=v.getImageData(0,0,n,H);var t=l111l11lll.lll1l111l1(g.data);var M=new Array(t.length);if(this.Radius>0){var K=l1l1l1l1l1.lll11l1lll.l1lll1111l(this.Radius);M=l1l1l1l1l1.lll11l1lll.l11l1l1ll1(K,t,M,n,H,l1l1l1l1l1.lll1ll1ll1,l1l1l1l1l1.lll1ll1ll1&&l1l1l1l1l1.l111l11ll1,false,l1l1l1l1l1.l1ll1ll11l);t=l1l1l1l1l1.lll11l1lll.l11l1l1ll1(K,M,t,H,n,l1l1l1l1l1.lll1ll1ll1,false,l1l1l1l1l1.lll1ll1ll1&&l1l1l1l1l1.l111l11ll1,l1l1l1l1l1.l1ll1ll11l);}M=l111l11lll.lll1l111l1(g.data);var J=0;for(var l=0;l<H;l++){for(var m=0;m<n;m++){var I=M[J];var F=I>>16&255;var f=I>>8&255;var k=I&255;var G=t[J];var u=G>>16&255;var O=G>>8&255;var j=G&255;F=parseInt((F+255-u)/2);f=parseInt((f+255-O)/2);k=parseInt((k+255-j)/2);t[J]=(I&4278190080|F<<16|f<<8|k);J++;}}l111l11lll.delll1l111l1(t,g.data);v.putImageData(g,0,0);}},"lensblur":{"Radius":10,"Sides":5,"Bloom":2,"BloomThreshold":255,"angle":0,"fi":function(an,al,aB){var J=new Date().getTime();var ac=al.width,ab=al.height;var aa=al.getContext("2d");for(var av in an){this[av]=an[av];}var ak=aa.getImageData(0,0,ac,ab);var Z=l111l11lll.lll1l111l1(ak.data);var Y=new Array(Z.length);var ax=1,L=1;var X=0,V=0;var T=Math.ceil(this.Radius);var S=128,R=128;var aI=ac+T*2;var aH=ab+T*2;S=T<32?Math.min(128,ac+2*T):Math.min(256,ac+2*T);R=T<32?Math.min(128,ab+2*T):Math.min(256,ab+2*T);while(ax<R){ax*=2;X++;}while(L<S){L*=2;V++;}var aj=L,aw=ax;S=aj;R=aw;l11111lll1.init(Math.max(X,V));var aF=new Array(aj*aw);var ao=new Array(2);ao[0]=new Array(aj*aw);ao[1]=new Array(aj*aw);var M=new Array(2);M[0]=new Array(aj*aw);M[1]=new Array(aj*aw);var F=new Array(2);F[0]=new Array(aj*aw);F[1]=new Array(aj*aw);var aD=Math.PI/this.Sides;var aC=1/Math.cos(aD);var K=this.Radius*this.Radius;var aA=this.angle/180*Math.PI;var I=0,av=0;for(var ag=0;ag<aw;ag++){for(var ai=0;ai<aj;ai++){var q=ai-aj/2,n=ag-aw/2;var am=q*q+n*n;var az=am<K?1:0;if(az!=0){am=Math.sqrt(am);if(this.Sides!=0){var aG=Math.atan2(n,q)+aA;aG=l111l11lll.llll1lll1l(aG,aD*2)-aD;az=Math.cos(aG)*aC;}else{az=1;}az=az*am<this.Radius?1:0;}I+=az;ao[0][av]=az;ao[1][av]=0;av++;}}av=0;for(var ag=0;ag<aw;ag++){for(var ai=0;ai<aj;ai++){ao[0][av]=ao[0][av]/I;av++;}}var H=l11111lll1.lll1lllll1(ao[0],ao[1],aj,aw,true);ao[0]=H[0];ao[1]=H[1];for(var G=-T;G<ab;G+=R-2*T){for(var B=-T;B<ac;B+=S-2*T){var at=B;var aq=G;var au=S;var l=R;var W=0,U=0;if(at<0){au+=at;W-=at;at=0;}if(aq<0){l+=aq;U-=aq;aq=0;}if(at+au>ac){au=ac-at;}if(aq+l>ab){l=ab-aq;}aF=l111l11lll.l1l11ll1l1(at,aq,au,l,aF,U*aj+W,aj,Z,ac,ab);av=0;for(var ag=0;ag<aw;ag++){var z=ag+G;var ar=0;if(z<0){ar=U;}else{if(z>ab){ar=U+l-1;}else{ar=ag;}}ar*=aj;for(var ai=0;ai<aj;ai++){var v=ai+B;var ap=0;if(v<0){ap=W;}else{if(v>ac){ap=W+au-1;}else{ap=ai;}}ap+=ar;F[0][av]=aF[ap]>>24&255;var am=aF[ap]>>16&255;var ay=aF[ap]>>8&255;var aE=aF[ap]&255;if(am>this.BloomThreshold){am*=this.Bloom;}if(ay>this.BloomThreshold){ay*=this.Bloom;}if(aE>this.BloomThreshold){aE*=this.Bloom;}F[1][av]=am;M[0][av]=ay;M[1][av]=aE;av++;ap++;}}H=l11111lll1.lll1lllll1(F[0],F[1],L,ax,true);F[0]=H[0];F[1]=H[1];H=l11111lll1.lll1lllll1(M[0],M[1],L,ax,true);M[0]=H[0];M[1]=H[1];av=0;for(var ag=0;ag<aw;ag++){for(var ai=0;ai<aj;ai++){var ah=F[0][av];var ad=F[1][av];var af=ao[0][av];var u=ao[1][av];F[0][av]=(ah*af-ad*u);F[1][av]=(ah*u+ad*af);ah=M[0][av];ad=M[1][av];M[0][av]=(ah*af-ad*u);M[1][av]=(ah*u+ad*af);av++;}}H=l11111lll1.lll1lllll1(F[0],F[1],L,ax,false);F[0]=H[0];F[1]=H[1];H=l11111lll1.lll1lllll1(M[0],M[1],L,ax,false);M[0]=H[0];M[1]=H[1];var t=aj>>1;var o=aw>>1;var m=0;for(var ag=0;ag<aj;ag++){var O=ag^t;var P=O*L;for(var ai=0;ai<aj;ai++){var ae=P+(ai^o);var aG=parseInt(F[0][ae]);var am=parseInt(F[1][ae]);var ay=parseInt(M[0][ae]);var aE=parseInt(M[1][ae]);if(am>255){am=255;}if(ay>255){ay=255;}if(aE>255){aE=255;}aF[m++]=aG<<24|am<<16|ay<<8|aE;}}at=B+T;aq=G+T;au=S-2*T;l=R-2*T;if(at+au>ac){au=ac-at;}if(aq+l>ab){l=ab-aq;}l111l11lll.ll1l1ll11l(at,aq,au,l,aF,T*aj+T,aj,Z,ac,ab);}}l111l11lll.delll1l111l1(Z,ak.data);aa.putImageData(ak,0,0);}},"adjustHSB":{"H_value":0,"S_value":0,"B_value":0,"fi":function(f,z,k){var t=z.width,j=z.height;var l=new Date().getTime();for(var g in f){this[g+"_value"]=Math.round((f[g]-1)*100)/100;}var v=z.getContext("2d");var m=v.getImageData(0,0,t,j);var u=l111l11lll.lll1l111l1(m.data);var q=new Array(t);for(var n=0;n<j;n++){q=l111l11lll.l1l11ll1l1(0,n,t,1,q,0,t,u,t,j);for(var o=0;o<t;o++){q[o]=this.ll1ll1111l(o,n,q[o]);}u=l111l11lll.ll1l1ll11l(0,n,t,1,q,0,t,u,t,j);}l111l11lll.delll1l111l1(u,m.data);v.putImageData(m,0,0);},ll1ll1111l:function(m,l,k){var j=k&4278190080;var o=(k>>16)&255;var n=(k>>8)&255;var f=k&255;var h=l111l11lll.l1lllll111(o,n,f,h);h[0]+=this.H_value;while(h[0]<0){h[0]+=Math.PI*2;}h[1]+=this.S_value;if(h[1]<0){h[1]=0;}else{if(h[1]>1){h[1]=1;}}h[2]+=this.B_value;if(h[2]<0){h[2]=0;}else{if(h[2]>1){h[2]=1;}}k=l111l11lll.l111ll11ll(h[0],h[1],h[2]);return j|(k&16777215);}},"adjustRGB":{"R_value":0,"G_value":0,"B_value":0,"fi":function(f,z,n){var v=z.width,j=z.height;for(var g in f){this[g]=f[g];}var q=z.getContext("2d");var o=q.getImageData(0,0,v,j);var m=new Date().getTime();for(var g in f){this[g+"_value"]=Math.round((f[g])*100)/100;}var l=l111l11lll.lll1l111l1(o.data);var k=new Array(v);for(var t=0;t<j;t++){k=l111l11lll.l1l11ll1l1(0,t,v,1,k,0,v,l,v,j);for(var u=0;u<v;u++){k[u]=this.l11ll1lll1pixel(k[u]);}l=l111l11lll.ll1l1ll11l(0,t,v,1,k,0,v,l,v,j);}l111l11lll.delll1l111l1(l,o.data);q.putImageData(o,0,0);},l11ll1lll1pixel:function(l){var h=l&4278190080;var k=l>>16&255;var j=l>>8&255;var f=l&255;k=lllll111l1.l1111l1111(Math.round(k*this.R_value));j=lllll111l1.l1111l1111(Math.round(j*this.G_value));f=lllll111l1.l1111l1111(Math.round(f*this.B_value));return h|k<<16|j<<8|f;}},"contrast":{"Bright":1,"Contrast":1,"rlll11lllll":[],"glll11lllll":[],"blll11lllll":[],"fi":function(f,z,o){var v=z.width,n=z.height;var m=new Date().getTime();for(var l in f){this[l]=Math.round(f[l]*100)/100;}this.rlll11lllll=this.glll11lllll=this.blll11lllll=this.l1l1llllll();var k=z.getContext("2d");var q=k.getImageData(0,0,v,n);var j=l111l11lll.lll1l111l1(q.data);var g=new Array(v);for(var t=0;t<n;t++){g=l111l11lll.l1l11ll1l1(0,t,v,1,g,0,v,j,v,n);for(var u=0;u<v;u++){g[u]=this.l11lll1111(u,t,g[u]);}j=l111l11lll.ll1l1ll11l(0,t,v,1,g,0,v,j,v,n);}l111l11lll.delll1l111l1(j,q.data);k.putImageData(q,0,0);},l11lll1111:function(h,n,k){var j=k&4278190080;var m=k>>16&255;var l=k>>8&255;var f=k&255;m=this.rlll11lllll[m];l=this.glll11lllll[l];f=this.blll11lllll[f];return j|m<<16|l<<8|f;},l1111l1lll:function(g){g*=this.Bright;g=(g-0.5)*this.Contrast+0.5;return g;},l1l1llllll:function(){var g=new Array(256);for(var f=0;f<256;f++){g[f]=lllll111l1.l1111l1111(Math.round(255*this.l1111l1lll(f/255)));}return g;}},"exposure":{"scale":2,"rlll11lllll":[],"glll11lllll":[],"blll11lllll":[],"fi":function(f,z,o){var v=z.width,m=z.height;var n=new Date().getTime();for(var k in f){this[k]=Math.round(f[k]*100)/100;}this.rlll11lllll=this.glll11lllll=this.blll11lllll=this.l1l1llllll();var l=z.getContext("2d");var q=l.getImageData(0,0,v,m);var j=l111l11lll.lll1l111l1(q.data);var g=new Array(v);for(var t=0;t<m;t++){g=l111l11lll.l1l11ll1l1(0,t,v,1,g,0,v,j,v,m);for(var u=0;u<v;u++){g[u]=this.l11lll1111(u,t,g[u]);}j=l111l11lll.ll1l1ll11l(0,t,v,1,g,0,v,j,v,m);}l111l11lll.delll1l111l1(j,q.data);l.putImageData(q,0,0);},l11lll1111:function(h,n,k){var j=k&4278190080;var m=k>>16&255;var l=k>>8&255;var f=k&255;m=this.rlll11lllll[m];l=this.glll11lllll[l];f=this.blll11lllll[f];return j|m<<16|l<<8|f;},l1111l1lll:function(g){return 1-Math.exp(-g*this.scale);},l1l1llllll:function(){var g=new Array(256);for(var f=0;f<256;f++){g[f]=lllll111l1.l1111l1111(Math.round(255*this.l1111l1lll(f/255)));}return g;}},gain:{"gain":2,"bias":0.5,"rlll11lllll":[],"glll11lllll":[],"blll11lllll":[],"fi":function(f,z,o){var v=z.width,n=z.height;var l=new Date().getTime();for(var m in f){this[m]=Math.round(f[m]*100)/100;}this.rlll11lllll=this.glll11lllll=this.blll11lllll=this.l1l1llllll();var k=z.getContext("2d");var q=k.getImageData(0,0,v,n);var j=l111l11lll.lll1l111l1(q.data);var g=new Array(v);for(var t=0;t<n;t++){g=l111l11lll.l1l11ll1l1(0,t,v,1,g,0,v,j,v,n);for(var u=0;u<v;u++){g[u]=this.l11lll1111(u,t,g[u]);}j=l111l11lll.ll1l1ll11l(0,t,v,1,g,0,v,j,v,n);}l111l11lll.delll1l111l1(j,q.data);k.putImageData(q,0,0);},l11lll1111:function(j,n,h){var k=h&4278190080;var m=h>>16&255;var l=h>>8&255;var f=h&255;m=this.rlll11lllll[m];l=this.glll11lllll[l];f=this.blll11lllll[f];return k|m<<16|l<<8|f;},l1111l1lll:function(g){g=l111l11lll.l11111l1ll(g,this.gain);g=l111l11lll.lll11l111l(g,this.bias);return g;},l1l1llllll:function(){var g=new Array(256);for(var f=0;f<256;f++){g[f]=lllll111l1.l1111l1111(Math.round(255*this.l1111l1lll(f/255)));}return g;}},gamma:{"R":1,"G":1,"B":1,"rlll11lllll":[],"glll11lllll":[],"blll11lllll":[],"fi":function(g,z,m){var t=z.width,l=z.height;var f=new Date().getTime();for(var k in g){this[k]=Math.round(g[k]*100)/100;}this.rlll11lllll=this.l1l1llllll(this.R);this.glll11lllll=this.l1l1llllll(this.G);this.blll11lllll=this.l1l1llllll(this.B);var v=z.getContext("2d");var n=v.getImageData(0,0,t,l);var u=l111l11lll.lll1l111l1(n.data);var j=new Array(t);for(var o=0;o<l;o++){j=l111l11lll.l1l11ll1l1(0,o,t,1,j,0,t,u,t,l);for(var q=0;q<t;q++){j[q]=this.l11lll1111(q,o,j[q]);}u=l111l11lll.ll1l1ll11l(0,o,t,1,j,0,t,u,t,l);}l111l11lll.delll1l111l1(u,n.data);v.putImageData(n,0,0);},l11lll1111:function(h,n,m){var j=m&4278190080;var l=m>>16&255;var k=m>>8&255;var f=m&255;l=this.rlll11lllll[l];k=this.glll11lllll[k];f=this.blll11lllll[f];return j|l<<16|k<<8|f;},l1l1llllll:function(j){var h=new Array(256);for(var g=0;g<256;g++){var f=parseInt(255*Math.pow(g/255,1/j)+0.5);if(f>255){f=255;}h[g]=f;}return h;}},invert:{"fi":function(g,z,l){var q=z.width,k=z.height;for(var j in g){this[j]=g[j];}var f=z.getContext("2d");var m=f.getImageData(0,0,q,k);var v=new Date().getTime();var u=l111l11lll.lll1l111l1(m.data);var t=new Array(q);for(var n=0;n<k;n++){t=l111l11lll.l1l11ll1l1(0,n,q,1,t,0,q,u,q,k);for(var o=0;o<q;o++){t[o]=this.l11ll1lll1pixel(t[o]);}u=l111l11lll.ll1l1ll11l(0,n,q,1,t,0,q,u,q,k);}l111l11lll.delll1l111l1(u,m.data);f.putImageData(m,0,0);},l11ll1lll1pixel:function(g){var f=g&4278190080;return f|(g^4294967295)&16777215;}},"gray":{"fi":function(f,z,k){var u=z.width,j=z.height;for(var g in f){this[g]=f[g];}var v=z.getContext("2d");var l=v.getImageData(0,0,u,j);var t=new Date().getTime();var q=l111l11lll.lll1l111l1(l.data);var n=new Array(u);for(var m=0;m<j;m++){n=l111l11lll.l1l11ll1l1(0,m,u,1,n,0,u,q,u,j);for(var o=0;o<u;o++){n[o]=this.l11ll1lll1pixel(n[o]);}q=l111l11lll.ll1l1ll11l(0,m,u,1,n,0,u,q,u,j);}l111l11lll.delll1l111l1(q,l.data);v.putImageData(l,0,0);},"l11ll1lll1pixel":function(h){var j=h&4278190080;var l=h>>16&255;var k=h>>8&255;var f=h&255;h=l*77+k*151+f*28>>8;return j|h<<16|h<<8|h;}},"grayout":{"fi":function(f,z,m){var u=z.width,j=z.height;for(var g in f){this[g]=f[g];}var l=z.getContext("2d");var n=l.getImageData(0,0,u,j);var k=new Date().getTime();var v=l111l11lll.lll1l111l1(n.data);var t=new Array(u);for(var o=0;o<j;o++){t=l111l11lll.l1l11ll1l1(0,o,u,1,t,0,u,v,u,j);for(var q=0;q<u;q++){t[q]=this.l11ll1lll1pixel(t[q]);}v=l111l11lll.ll1l1ll11l(0,o,u,1,t,0,u,v,u,j);}l111l11lll.delll1l111l1(v,n.data);l.putImageData(n,0,0);},"l11ll1lll1pixel":function(h){var j=h&4278190080;var l=h>>16&255;var k=h>>8&255;var f=h&255;l=(l+255)/2;k=(k+255)/2;f=(f+255)/2;return j|l<<16|k<<8|f;}},"detectEdge":{"fi":function(l,j,n){var f=j.width,g=j.height;var o=j.getContext("2d");var k=o.getImageData(0,0,f,g);var m=l111l11lll.lll1l111l1(k.data);m=this.l1ll1l1l1l(f,g,m);l111l11lll.delll1l111l1(m,k.data);o.putImageData(k,0,0);},ll11l1l1l1:[-1,-2,-1,0,0,0,1,2,1],ll1l1l1l1l:[-1,0,1,-2,0,2,-1,0,1],"l1ll1l1l1l":function(q,S,R){var O=0;var L=new Array(q*S);for(var o=0;o<S;o++){for(var p=0;p<q;p++){var u=0,F=0,M=0,z=0,J=0,f=0,m=0,t=0,I=0;var P=R[o*q+p]&4278190080;for(var n=-1;n<=1;n++){var j=o+n;var K=0;if((0<=j)&&(j<S)){K=j*q;}else{K=o*q;}var H=3*(n+1)+1;for(var l=-1;l<=1;l++){var k=p+l;if((0>k)||(k>=q)){k=p;}var G=R[(K+k)];var B=this.ll11l1l1l1[(H+l)];var s=this.ll1l1l1l1l[H+l];u=(G&16711680)>>16;F=(G&65280)>>8;M=G&255;z+=parseInt(B*u);J+=parseInt(B*F);f+=parseInt(B*M);m+=parseInt(s*u);t+=parseInt(s*F);I+=parseInt(s*M);}}u=parseInt(Math.sqrt(z*z+m*m)/1.8);F=parseInt(Math.sqrt(J*J+t*t)/1.8);M=parseInt(Math.sqrt(f*f+I*I)/1.8);u=lllll111l1.l1111l1111(u);F=lllll111l1.l1111l1111(F);M=lllll111l1.l1111l1111(M);L[(O++)]=(P|u<<16|F<<8|M);}}return L;}},"dof":{},"laplace":{"fi":function(q,n,R){var k=n.width,J=n.height;var M=n.getContext("2d");var f=M.getImageData(0,0,k,J);var K=l111l11lll.lll1l111l1(f.data);var I=new Array(k);var P=new Array(k);var O=new Array(k);var L=new Array(k);P=l111l11lll.l1l11ll1l1(0,0,k,1,P,0,k,K,k,J);O=l111l11lll.l1l11ll1l1(0,0,k,1,O,0,k,K,k,J);this.br(P);this.br(O);for(var g=0;g<J;g++){if(g<J-1){L=l111l11lll.l1l11ll1l1(0,g+1,k,1,L,0,k,K,k,J);this.br(L);}I[0]=I[k-1]=-16777216;for(var j=1;j<k-1;j++){var G=O[j-1];var F=P[j];var v=L[j];var u=O[j+1];var B=O[j];var H=Math.max(Math.max(G,F),Math.max(v,u));var z=Math.min(Math.min(G,F),Math.min(v,u));var S=Math.round(0.5*Math.max((H-B),(B-z)));var o=((P[j-1]+P[j]+P[j+1]+O[j-1]-(8*O[j])+O[j+1]+L[j-1]+L[j]+L[j+1])>0)?S:(128+S);I[j]=o;}K=l111l11lll.ll1l1ll11l(0,g,k,1,I,0,k,K,k,J);var m=P;P=O;O=L;L=m;}P=l111l11lll.l1l11ll1l1(0,0,k,1,P,0,k,K,k,J);O=l111l11lll.l1l11ll1l1(0,0,k,1,O,0,k,K,k,J);for(var g=0;g<J;g++){if(g<J-1){L=l111l11lll.l1l11ll1l1(0,g+1,k,1,L,0,k,K,k,J);}I[0]=I[k-1]=-16777216;for(var j=1;j<k-1;j++){var o=4278190080|O[j];o=(((o<=128)&&((P[j-1]>128)||(P[j]>128)||(P[j+1]>128)||(O[j-1]>128)||(O[j+1]>128)||(L[j-1]>128)||(L[j]>128)||(L[j+1]>128)))?((o>=128)?(o-128):o):0);I[j]=4278190080|(o<<16)|(o<<8)|o;}K=l111l11lll.ll1l1ll11l(0,g,k,1,I,0,k,K,k,J);var m=P;P=O;O=L;L=m;}l111l11lll.delll1l111l1(K,f.data);M.putImageData(f,0,0);},"br":function(f){for(var h=0;h<f.length;h++){var g=f[h];var j=lllll111l1.disass(g);f[h]=parseInt((j[1]+j[2]+j[3])/3);}return f;}},"mosaic":{"blocksize":1,"fi":function(B,v,O){var P=new Date().getTime();for(var F in B){this[F]=B[F];}var M=v.width,L=v.height;var K=v.getContext("2d");var f=K.getImageData(0,0,M,L);var m=l111l11lll.lll1l111l1(f.data);var l=new Array(this.blocksize*this.blocksize);for(var n=0;n<L;n+=this.blocksize){for(var o=0;o<M;o+=this.blocksize){var q=Math.min(this.blocksize,M-o);var H=Math.min(this.blocksize,L-n);var u=q*H;l=l111l11lll.l1l11ll1l1(o,n,q,H,l,0,q,m,M,L);var z=0,J=0,R=0;var F=0;for(var G=0;G<H;G++){for(var I=0;I<q;I++){var k=l[F];z+=(k>>16&255);J+=(k>>8&255);R+=(k&255);F++;}}var j=z/u<<16|J/u<<8|R/u;F=0;for(var G=0;G<H;G++){for(var I=0;I<q;I++){l[F]=(l[F]&4278190080|j);F++;}}l111l11lll.ll1l1ll11l(o,n,q,H,l,0,q,m,M,L);}}l111l11lll.delll1l111l1(m,f.data);K.putImageData(f,0,0);}},"addnoise":{"amount":30,"density":30,"distribute":"lll11l1lll","mono":"false","fi":function(j,z,n){this.randomNum=Math.random();var u=z.width,m=z.height;var k=new Date().getTime();for(var l in j){this[l]=j[l];}var g=z.getContext("2d");var o=g.getImageData(0,0,u,m);var f=l111l11lll.lll1l111l1(o.data);var v=new Array(u);for(var q=0;q<m;q++){v=l111l11lll.l1l11ll1l1(0,q,u,1,v,0,u,f,u,m);for(var t=0;t<u;t++){v[t]=this.l1lll1l1l1(v[t],t,q);}f=l111l11lll.ll1l1ll11l(0,q,u,1,v,0,u,f,u,m);}l111l11lll.delll1l111l1(f,o.data);g.putImageData(o,0,0);},"l1lll1l1l1":function(k,h,p){if(Math.random()<=this.density/100){var j=k&4278190080;var m=k>>16&255;var l=k>>8&255;var f=k&255;if(this.mono=="true"){var o=parseInt((2*Math.random()-1)*this.amount);m=lllll111l1.l1111l1111(m+o);l=lllll111l1.l1111l1111(l+o);f=lllll111l1.l1111l1111(f+o);}else{m=this.lllllllll1(m);l=this.lllllllll1(l);f=this.lllllllll1(f);}return j|m<<16|l<<8|f;}else{return k;}},"lllllllll1":function(f){f+=parseInt((2*Math.random()-1)*this.amount);if(f<0){f=0;}else{if(f>255){f=255;}}return f;}},contour:{level:5,Offset:0,scale:1,contourColor:-16777216,fi:function(f,q,l){for(var j in f){this[j]=f[j];}var n=q.width,k=q.height;var o=q.getContext("2d");var m=o.getImageData(0,0,n,k);var g=l111l11lll.lll1l111l1(m.data);g=this.l1l1lll111(n,k,g);l111l11lll.delll1l111l1(g,m.data);o.putImageData(m,0,0);},l1l1lll111:function(m,l,k){var j=0;var h=new Array(m*l);var J=new Array(256);var I=parseInt(this.Offset*256/this.level);var F=new Array(3);F[0]=new Array(m);F[1]=new Array(m);F[2]=new Array(m);for(var K=0;K<256;K++){J[K]=lllll111l1.l1111l1111(parseInt(255*Math.floor(this.level*(K+I)/256)/(this.level-1)-I));}for(var q=0;q<m;q++){F[1][q]=lllll111l1.l111l1l1ll(k[q]);}for(var p=0;p<l;p++){var s=(p>0)&&(p<l-1);var G=j+m;if(p<l-1){for(var q=0;q<m;q++){F[2][q]=lllll111l1.l111l1l1ll(k[G++]);}}for(var q=0;q<m;q++){var M=(q>0)&&(q<m-1);var u=q-1;var L=q+1;var z=0;if(s&&M){var n=F[0][u];var g=F[0][q];var f=F[1][u];var P=F[1][q];var O=J[n];var o=J[g];var H=J[f];var R=J[P];if(O!=o||O!=H||o!=R||H!=R){z=lllll111l1.l1111l1111(parseInt(this.scale*(Math.abs(n-g)+Math.abs(n-f)+Math.abs(g-P)+Math.abs(f-P))));}}if(z!=0){h[j]=lllll111l1.ll1ll1l1l1(k[j],this.contourColor,lllll111l1.l111111l11,z);}else{h[j]=k[j];}j++;}var B=new Array(256);B=F[0];F[0]=F[1];F[1]=F[2];F[2]=B;}return h;}},dissolve:{density:0.8,softness:0.3,maxDensity:1,minDensity:0,fi:function(f,z,k){var v=z.width,j=z.height;var u=new Date().getTime();for(var g in f){this[g]=Math.round((f[g]/100)*100)/100;}var k=(1-this.density)*(1+this.softness);this.minDensity=k-this.softness;this.maxDensity=k;var t=z.getContext("2d");var m=t.getImageData(0,0,v,j);var o=l111l11lll.lll1l111l1(m.data);var l=new Array(v);for(var n=0;n<j;n++){l=l111l11lll.l1l11ll1l1(0,n,v,1,l,0,v,o,v,j);for(var q=0;q<v;q++){l[q]=this.dissolvePixel(q,n,l[q]);}o=l111l11lll.ll1l1ll11l(0,n,v,1,l,0,v,o,v,j);}l111l11lll.delll1l111l1(o,m.data);t.putImageData(m,0,0);},dissolvePixel:function(g,m,k){var h=k>>24&255;var j=Math.random();var l=l111l11lll.lllllll11l(this.minDensity,this.maxDensity,j);return parseInt(h*l)<<24|k&16777215;}},emboss:{angle:270*Math.PI/180,intensity:30*Math.PI/180,height:3,texture:"false",l1l1ll111l:255.9,fi:function(f,q,m){for(var g in f){this[g]=f[g];}if(f["angle"]){this.angle=f["angle"]*Math.PI/180;}if(f["intensity"]){this.intensity=f["intensity"]*Math.PI/180;}if(f["height"]){this.height=f["height"]*3/100;}var o=q.width,j=q.height;var l=q.getContext("2d");var n=l.getImageData(0,0,o,j);var k=l111l11lll.lll1l111l1(n.data);k=this.ll1ll1lll1(o,j,k);l111l11lll.delll1l111l1(k,n.data);l.putImageData(n,0,0);},ll1ll1lll1:function(L,K,I){var H=0;var G=new Array(L*K);var F=L;var q=K;var p=new Array(F*q);for(var O=0;O<I.length;O++){p[O]=lllll111l1.l111l1l1ll(I[O]);}var V,U,T,u,t,s,M,v,o;var n,m;u=parseInt(Math.cos(this.angle)*Math.cos(this.intensity)*this.l1l1ll111l);t=parseInt(Math.sin(this.angle)*Math.cos(this.intensity)*this.l1l1ll111l);s=parseInt(Math.sin(this.intensity)*this.l1l1ll111l);T=parseInt(6*255/this.height);M=T*T;v=T*s;m=s;var l=0;for(var z=0;z<K;z++,l+=F){var j=l;var h=j+F;var f=h+F;for(var B=0;B<L;B++,j++,h++,f++){if(z!=0&&z<K-2&&B!=0&&B<L-2){V=p[j-1]+p[h-1]+p[f-1]-p[j+1]-p[h+1]-p[f+1];U=p[f-1]+p[f]+p[f+1]-p[j-1]-p[j]-p[j+1];if(V==0&&U==0){n=m;}else{if((o=V*u+U*t+v)<0){n=0;}else{n=parseInt(o/Math.sqrt(V*V+U*U+M));}}}else{n=m;}if(this.texture=="true"){var k=I[H];var S=k&4278190080;var J=(k>>16)&255;var P=(k>>8)&255;var R=k&255;J=(J*n)>>8;P=(P*n)>>8;R=(R*n)>>8;G[H++]=S|(J<<16)|(P<<8)|R;}else{G[H++]=4278190080|(n<<16)|(n<<8)|n;}}}return G;}},sparkle:{rays:50,radius:25,"centreX":50,"centreY":50,"random":50,amount:100,color:4294967295,rayLengths:new Array(),fi:function(f,z,l){var u=z.width,j=z.height;var q=new Date().getTime();for(var g in f){this[g]=f[g];}this.centreX=this.centreX*u/100;this.centreY=this.centreY*j/100;this.rayLengths=new Array(this.rays);for(var g=0;g<this.rays;g++){this.rayLengths[g]=(this.radius+this.random/100*this.radius*l111l11lll.lllllll1l1());}var n=z.getContext("2d");var m=n.getImageData(0,0,u,j);var k=l111l11lll.lll1l111l1(m.data);var v=new Array(u);for(var o=0;o<j;o++){v=l111l11lll.l1l11ll1l1(0,o,u,1,v,0,u,k,u,j);for(var t=0;t<u;t++){v[t]=this.ll1111ll11(t,o,v[t]);}k=l111l11lll.ll1l1ll11l(0,o,u,1,v,0,u,k,u,j);}l111l11lll.delll1l111l1(k,m.data);n.putImageData(m,0,0);},ll1111ll11:function(p,n,s){var u=p-this.centreX;var t=n-this.centreY;var h=u*u+t*t;var q=Math.atan2(t,u);var m=(q+Math.PI)/(2*Math.PI)*this.rays;var j=parseInt(m);var l=m-j;if(this.radius!=0){var o=l111l11lll.l11l1lll11(l,this.rayLengths[(j%this.rays)],this.rayLengths[((j+1)%this.rays)]);var k=o*o/(h+0.001);k=Math.pow(k,(100-this.amount)/50);l-=0.5;l=1-l*l;l*=k;}l=l111l11lll.l11l1llll1(l,0,1);return l111l11lll.llllllllll(l,s,this.color);}},threshold:{lower:0,upper:255,ftcolor:4294967295,bgcolor:4278190080,fi:function(f,z,l){var v=z.width,j=z.height;var t=new Date().getTime();for(var g in f){this[g]=f[g];}var o=z.getContext("2d");var n=o.getImageData(0,0,v,j);var m=l111l11lll.lll1l111l1(n.data);var k=new Array(v);for(var q=0;q<j;q++){k=l111l11lll.l1l11ll1l1(0,q,v,1,k,0,v,m,v,j);for(var u=0;u<v;u++){k[u]=this.llllllll11(u,q,k[u]);}m=l111l11lll.ll1l1ll11l(0,q,v,1,k,0,v,m,v,j);}l111l11lll.delll1l111l1(m,n.data);o.putImageData(n,0,0);},llllllll11:function(g,l,j){var h=lllll111l1.l111l1l1ll(j);var k=l111l11lll.lllllll11l(this.lower,this.upper,h);return j&4278190080|l111l11lll.llllllllll(k,this.bgcolor,this.ftcolor)&16777215;}},lllll1lll1ZERO:0,lllll1lll1CLAMP:1,lllll1lll1WRAP:2,lllll1lll1RGB_CLAMP:3,lllll1lll1NEAREST_NEIGHBOUR:0,lllll1lll1BILINEAR:1,lllll1lll1edgeAction:3,lllll1lll1:{ll1l11l11l:{"none":0,"clamp":1,"wrap":2,"l11ll1lll1clamp":3},ll1lllll11:function(k,f,m,g,l,j){if((f<0)||(f>=g)||(m<0)||(m>=l)){switch(j){case l1l1l1l1l1.lllll1lll1ZERO:default:return 0;case l1l1l1l1l1.lllll1lll1WRAP:return k[(l111l11lll.llll1lll1l(m,l)*g)+l111l11lll.llll1lll1l(f,g)];case l1l1l1l1l1.lllll1lll1CLAMP:return k[(l111l11lll.l11l1llll1(m,0,l-1)*g)+l111l11lll.l11l1llll1(f,0,g-1)];case l1l1l1l1l1.lllll1lll1RGB_CLAMP:return k[(l111l11lll.l11l1llll1(m,0,l-1)*g)+l111l11lll.l11l1llll1(f,0,g-1)]&16777215;}}return k[m*g+f];}},circle:{radius:0,centreX:50,centreY:50,height:100,angle:0,rawSpace:[],transSpace:[],spread:180,edgeAction:0,fi:function(J,G,T){var q=G.width,M=G.height;var v=new Date().getTime();for(var L in J){this[L]=J[L];}this.centreX=this.centreX*q/100;this.centreY=this.centreY*M/100;this.spread=this.spread*Math.PI/180;this.angle=this.angle*Math.PI/180;this.rawSpace=new c(0,0,q,M);this.transSpace=new c(0,0,q,M);this.edgeAction=l1l1l1l1l1.lllll1lll1.ll1l11l11l[this.edge];var t=G.getContext("2d");var f=t.getImageData(0,0,q,M);var o=l111l11lll.lll1l111l1(f.data);var l=new Array(o.length);if(this.lll1l1llll==l1l1l1l1l1.lllll1lll1NEAREST_NEIGHBOUR){}var j=q;var H=M;var F=q-1;var B=M-1;var z=this.rawSpace.w;var u=this.transSpace.h;var n,X;var W=0;var U=new Array(z);n=this.transSpace.x;X=this.transSpace.y;var K=new Array(2);for(var k=0;k<u;k++){for(var m=0;m<z;m++){this.lll111ll11(n+m,X+k,K,q,M);var S=parseInt(Math.floor(K[0]));var R=parseInt(Math.floor(K[1]));var P=K[0]-S;var O=K[1]-R;var V,g,I,Y;if(S>=0&&S<F&&R>=0&&R<B){var L=j*R+S;V=o[L];g=o[L+1];I=o[L+j];Y=o[L+j+1];}else{V=l1l1l1l1l1.lllll1lll1.ll1lllll11(o,S,R,j,H,this.edgeAction);g=l1l1l1l1l1.lllll1lll1.ll1lllll11(o,S+1,R,j,H,this.edgeAction);I=l1l1l1l1l1.lllll1lll1.ll1lllll11(o,S,R+1,j,H,this.edgeAction);Y=l1l1l1l1l1.lllll1lll1.ll1lllll11(o,S+1,R+1,j,H,this.edgeAction);}U[m]=l111l11lll.ll1llll11l(P,O,V,g,I,Y);}l=l111l11lll.ll1l1ll11l(0,k,this.transSpace.w,1,U,0,q,l,q,M);}l111l11lll.delll1l111l1(l,f.data);t.putImageData(f,0,0);},lll111ll11:function(m,l,j,n,k){var p=m-this.centreX;var o=l-this.centreY;var g=Math.atan2(-o,-p)+this.angle;var f=Math.sqrt(p*p+o*o);g=l111l11lll.llll1lll1l(g,2*Math.PI);j[0]=(n*g/(this.spread+0.0001));j[1]=(k*(1-(f-this.radius)/(this.height+0.001)));}},diffuse:{scale:1,edgeAction:1,rs:[],ts:[],sinlllll11lll:[],coslllll11lll:[],fi:function(J,H,V){var G=H.width,R=H.height;var M=new Date().getTime();for(var O in J){this[O]=J[O];}this.sinlllll11lll=new Array(256);this.coslllll11lll=new Array(256);for(var O=0;O<256;O++){var K=Math.PI*2*O/256;this.sinlllll11lll[O]=this.scale*Math.sin(K);this.coslllll11lll[O]=this.scale*Math.cos(K);}this.rs=new c(0,0,G,R);this.ts=new c(0,0,G,R);this.edgeAction=l1l1l1l1l1.lllll1lll1.ll1l11l11l[this.edge];var X=H.getContext("2d");var l=X.getImageData(0,0,G,R);var W=l111l11lll.lll1l111l1(l.data);var U=new Array(W.length);if(this.lll1l1llll==l1l1l1l1l1.lllll1lll1NEAREST_NEIGHBOUR){}var T=G;var S=R;var P=G-1;var v=R-1;var u=this.rs.w;var t=this.ts.h;var o,n;var m=0;var k=new Array(u);o=this.ts.x;n=this.ts.y;var L=new Array(2);for(var B=0;B<t;B++){for(var F=0;F<u;F++){this.lll111ll11(o+F,n+B,L,G,R);var j=parseInt(Math.floor(L[0]));var g=parseInt(Math.floor(L[1]));var f=L[0]-j;var q=L[1]-g;var Y,z,I,Z;if(j>=0&&j<P&&g>=0&&g<v){var O=T*g+j;Y=W[O];z=W[O+1];I=W[O+T];Z=W[O+T+1];}else{Y=l1l1l1l1l1.lllll1lll1.ll1lllll11(W,j,g,T,S,this.edgeAction);z=l1l1l1l1l1.lllll1lll1.ll1lllll11(W,j+1,g,T,S,this.edgeAction);I=l1l1l1l1l1.lllll1lll1.ll1lllll11(W,j,g+1,T,S,this.edgeAction);Z=l1l1l1l1l1.lllll1lll1.ll1lllll11(W,j+1,g+1,T,S,this.edgeAction);}k[F]=l111l11lll.ll1llll11l(f,q,Y,z,I,Z);}U=l111l11lll.ll1l1ll11l(0,B,this.ts.w,1,k,0,G,U,G,R);}l111l11lll.delll1l111l1(U,l.data);X.putImageData(l,0,0);},lll111ll11:function(f,n,k,g,m){var l=parseInt(Math.random()*255);var j=Math.random();k[0]=(f+j*this.sinlllll11lll[l]);k[1]=(n+j*this.coslllll11lll[l]);}},displace:{amount:1,edgeAction:1,rs:[],ts:[],dw:0,dh:0,lll11ll111:[],ll1ll1llll:[],fi:function(W,R,aj){var L=R.width,ah=R.height;var H=new Date().getTime();var G=R.getContext("2d");var O=G.getImageData(0,0,L,ah);var F=l111l11lll.lll1l111l1(O.data);var B=new Array(F.length);for(var af in W){this[af]=W[af];}this.dw=L;this.dh=ah;var ac=new Array(this.dw*this.dh);l111l11lll.l1l11ll1l1(0,0,L,ah,ac,0,L,F,L,ah);this.lll11ll111=new Array(this.dw*this.dh);this.ll1ll1llll=new Array(this.dw*this.dh);var af=0;for(var I=0;I<this.dh;I++){for(var J=0;J<this.dw;J++){var ab=ac[af];var T=ab>>16&255;var ai=ab>>8&255;var ak=ab&255;ac[af]=parseInt((T+ai+ak)/8);af++;}}af=0;for(var I=0;I<this.dh;I++){var ag=(I+this.dh-1)%this.dh*this.dw;var ae=I*this.dw;var ad=(I+1)%this.dh*this.dw;for(var J=0;J<this.dw;J++){var z=(J+this.dw-1)%this.dw;var v=J;var u=(J+1)%this.dw;this.lll11ll111[af]=(ac[(z+ag)]+ac[(z+ae)]+ac[(z+ad)]-ac[(u+ag)]-ac[(u+ae)]-ac[(u+ad)]);this.ll1ll1llll[af]=(ac[(z+ad)]+ac[(v+ad)]+ac[(u+ad)]-ac[(z+ag)]-ac[(v+ag)]-ac[(u+ag)]);af++;}}this.rs=new c(0,0,L,ah);this.ts=new c(0,0,L,ah);this.edgeAction=l1l1l1l1l1.lllll1lll1.ll1l11l11l[this.edge];if(this.lll1l1llll==l1l1l1l1l1.lllll1lll1NEAREST_NEIGHBOUR){}var Z=L;var Y=ah;var X=L-1;var V=ah-1;var U=this.rs.w;var S=this.ts.h;var P,M;var q=0;var o=new Array(U);P=this.ts.x;M=this.ts.y;var K=new Array(2);for(var I=0;I<S;I++){for(var J=0;J<U;J++){this.lll111ll11(P+J,M+I,K,L,ah);var n=parseInt(Math.floor(K[0]));var m=parseInt(Math.floor(K[1]));var l=K[0]-n;var k=K[1]-m;var aa,f,j,t;if(n>=0&&n<X&&m>=0&&m<V){var af=Z*m+n;aa=F[af];f=F[af+1];j=F[af+Z];t=F[af+Z+1];}else{aa=l1l1l1l1l1.lllll1lll1.ll1lllll11(F,n,m,Z,Y,this.edgeAction);f=l1l1l1l1l1.lllll1lll1.ll1lllll11(F,n+1,m,Z,Y,this.edgeAction);j=l1l1l1l1l1.lllll1lll1.ll1lllll11(F,n,m+1,Z,Y,this.edgeAction);t=l1l1l1l1l1.lllll1lll1.ll1lllll11(F,n+1,m+1,Z,Y,this.edgeAction);}o[J]=l111l11lll.ll1llll11l(l,k,aa,f,j,t);}B=l111l11lll.ll1l1ll11l(0,I,this.ts.w,1,o,0,L,B,L,ah);}l111l11lll.delll1l111l1(B,O.data);G.putImageData(O,0,0);},lll111ll11:function(f,m,j,g,l){var k=m%this.dh*this.dw+f%this.dw;j[0]=(f+this.amount*this.lll11ll111[k]);j[1]=(m+this.amount*this.ll1ll1llll[k]);}},kaleido:{radius:0,centreX:50,centreY:50,height:100,angle1:0,angle2:0,rs:[],ts:[],side:4,edgeAction:0,fi:function(t,o,O){var n=o.width,F=o.height;var X=new Date().getTime();var W=o.getContext("2d");var j=W.getImageData(0,0,n,F);var V=l111l11lll.lll1l111l1(j.data);var S=new Array(V.length);for(var z in t){this[z]=t[z];}this.centreX=this.centreX*n/100;this.centreY=this.centreY*F/100;this.angle1=(this.angle1-360)*Math.PI/180;this.angle2=(this.angle2-360)*Math.PI/180;this.edgeAction=l1l1l1l1l1.lllll1lll1.ll1l11l11l[this.edge];this.rs=new c(0,0,n,F);this.ts=new c(0,0,n,F);var P=n;var L=F;var J=n-1;var H=F-1;var B=this.rs.w;var v=this.ts.h;var U,R;var M=0;var K=new Array(B);U=this.ts.x;R=this.ts.y;var u=new Array(2);for(var l=0;l<v;l++){for(var m=0;m<B;m++){this.lll111ll11(U+m,R+l,u,n,F);var I=parseInt(Math.floor(u[0]));var G=parseInt(Math.floor(u[1]));var g=u[0]-I;var f=u[1]-G;var T,k,q,Y;if(I>=0&&I<J&&G>=0&&G<H){var z=P*G+I;T=V[z];k=V[z+1];q=V[z+P];Y=V[z+P+1];}else{T=l1l1l1l1l1.lllll1lll1.ll1lllll11(V,I,G,P,L,this.edgeAction);k=l1l1l1l1l1.lllll1lll1.ll1lllll11(V,I+1,G,P,L,this.edgeAction);q=l1l1l1l1l1.lllll1lll1.ll1lllll11(V,I,G+1,P,L,this.edgeAction);Y=l1l1l1l1l1.lllll1lll1.ll1lllll11(V,I+1,G+1,P,L,this.edgeAction);}K[m]=l111l11lll.ll1llll11l(g,f,T,k,q,Y);}S=l111l11lll.ll1l1ll11l(0,l,this.ts.w,1,K,0,n,S,n,F);}l111l11lll.delll1l111l1(S,j.data);W.putImageData(j,0,0);},lll111ll11:function(o,n,k,p,l){var s=o-this.centreX;var q=n-this.centreY;var f=Math.sqrt(s*s+q*q);var j=Math.atan2(q,s)-this.angle1-this.angle2;j=l111l11lll.l11ll1111l(j/Math.PI*this.side*0.5);if(this.radius!=0){var m=Math.cos(j);var g=this.radius/m;f=g*l111l11lll.l11ll1111l(f/g);}j+=this.angle1;k[0]=this.centreX+f*Math.cos(j);k[1]=this.centreY+f*Math.sin(j);}},marble:{xscale:4,yscale:4,turbul:1,edgeAction:1,rs:[],ts:[],sinlllll11lll:[],coslllll11lll:[],fi:function(L,J,R){var I=J.width,P=J.height;var j=new Date().getTime();for(var O in L){this[O]=L[O];}this.sinlllll11lll=new Array(256);this.coslllll11lll=new Array(256);for(var O=0;O<256;O++){var f=Math.PI*2*O/256*this.turbul;this.sinlllll11lll[O]=-this.yscale*Math.sin(f);this.coslllll11lll[O]=this.yscale*Math.cos(f);}this.rs=new c(0,0,I,P);this.ts=new c(0,0,I,P);this.edgeAction=l1l1l1l1l1.lllll1lll1.ll1l11l11l[this.edge];var Z=J.getContext("2d");var n=Z.getImageData(0,0,I,P);var W=l111l11lll.lll1l111l1(n.data);var U=new Array(W.length);var T=I;var m=P;var l=I-1;var k=P-1;var g=this.rs.w;var Y=this.ts.h;var V,H;var G=0;var B=new Array(g);V=this.ts.x;H=this.ts.y;var M=new Array(2);for(var z=0;z<Y;z++){for(var F=0;F<g;F++){this.lll111ll11(V+F,H+z,M,I,P);var v=parseInt(Math.floor(M[0]));var u=parseInt(Math.floor(M[1]));var t=M[0]-v;var q=M[1]-u;var S,o,K,X;if(v>=0&&v<l&&u>=0&&u<k){var O=T*u+v;S=W[O];o=W[O+1];K=W[O+T];X=W[O+T+1];}else{S=l1l1l1l1l1.lllll1lll1.ll1lllll11(W,v,u,T,m,this.edgeAction);o=l1l1l1l1l1.lllll1lll1.ll1lllll11(W,v+1,u,T,m,this.edgeAction);K=l1l1l1l1l1.lllll1lll1.ll1lllll11(W,v,u+1,T,m,this.edgeAction);X=l1l1l1l1l1.lllll1lll1.ll1lllll11(W,v+1,u+1,T,m,this.edgeAction);}B[F]=l111l11lll.ll1llll11l(t,q,S,o,K,X);}U=l111l11lll.ll1l1ll11l(0,z,this.ts.w,1,B,0,I,U,I,P);}l111l11lll.delll1l111l1(U,n.data);Z.putImageData(n,0,0);},ll11ll1l1l:function(f,g){return lllll111l1.l1111l1111(parseInt(127*(1+l1l1ll11l1.ll11llll11(f/this.xscale,g/this.xscale))));},lll111ll11:function(f,m,j,g,k){var l=this.ll11ll1l1l(f,m);j[0]=(f+this.sinlllll11lll[l]);j[1]=(m+this.coslllll11lll[l]);}},pinch:{radius:0,radius2:0,centreX:50,centreY:50,amount:1,angle:720,rs:[],ts:[],side:4,edgeAction:0,fi:function(H,B,W){var z=B.width,U=B.height;var k=new Date().getTime();var g=B.getContext("2d");var f=g.getImageData(0,0,z,U);var u=l111l11lll.lll1l111l1(f.data);var q=new Array(u.length);for(var S in H){this[S]=H[S];}this.centreX=this.centreX*z/100;this.centreY=this.centreY*U/100;this.angle=(this.angle-720)*Math.PI/180;this.amount=this.amount-1;this.edgeAction=l1l1l1l1l1.lllll1lll1.ll1l11l11l[this.edge];if(this.radius==0){this.radius=Math.min(this.centreX,this.centreY);}this.radius2=this.radius*this.radius;this.rs=new c(0,0,z,U);this.ts=new c(0,0,z,U);this.edgeAction=l1l1l1l1l1.lllll1lll1.ll1l11l11l[this.edge];if(this.lll1l1llll==l1l1l1l1l1.lllll1lll1NEAREST_NEIGHBOUR){}var o=z;var n=U;var m=z-1;var l=U-1;var V=this.rs.w;var T=this.ts.h;var R,O;var M=0;var L=new Array(V);R=this.ts.x;O=this.ts.y;var P=new Array(2);for(var t=0;t<T;t++){for(var v=0;v<V;v++){this.lll111ll11(R+v,O+t,P,z,U);var K=parseInt(Math.floor(P[0]));var J=parseInt(Math.floor(P[1]));var I=P[0]-K;var G=P[1]-J;var X,j,F,Y;if(K>=0&&K<m&&J>=0&&J<l){var S=o*J+K;X=u[S];j=u[S+1];F=u[S+o];Y=u[S+o+1];}else{X=l1l1l1l1l1.lllll1lll1.ll1lllll11(u,K,J,o,n,this.edgeAction);j=l1l1l1l1l1.lllll1lll1.ll1lllll11(u,K+1,J,o,n,this.edgeAction);F=l1l1l1l1l1.lllll1lll1.ll1lllll11(u,K,J+1,o,n,this.edgeAction);Y=l1l1l1l1l1.lllll1lll1.ll1lllll11(u,K+1,J+1,o,n,this.edgeAction);}L[v]=l111l11lll.ll1llll11l(I,G,X,j,F,Y);}q=l111l11lll.ll1l1ll11l(0,t,this.ts.w,1,L,0,z,q,z,U);}l111l11lll.delll1l111l1(q,f.data);g.putImageData(f,0,0);},lll111ll11:function(n,l,f){var u=n-this.centreX;var p=l-this.centreY;var g=u*u+p*p;if((g>this.radius2)||(g==0)){f[0]=n;f[1]=l;}else{var j=Math.sqrt(g/this.radius2);var o=Math.pow(Math.sin(Math.PI*j/2),-this.amount);u*=o;p*=o;var h=1-j;var m=this.angle*h*h;var q=Math.sin(m);var k=Math.cos(m);f[0]=(this.centreX+k*u-q*p);f[1]=(this.centreY+q*u+k*p);}}},polar:{radius:0,centreX:50,centreY:50,type:"rect2polar",edgeAction:1,typedic:{"rect2polar":0,"polar2rect":1},rs:[],ts:[],typeAction:0,fi:function(I,G,T){var F=G.width,S=G.height;var O=new Date().getTime();var M=G.getContext("2d");var t=M.getImageData(0,0,F,S);var L=l111l11lll.lll1l111l1(t.data);var K=new Array(L.length);for(var R in I){this[R]=I[R];}this.centreX=this.centreX*F/100;this.centreY=this.centreY*S/100;this.radius=Math.max(this.centreX,this.centreY);this.typeAction=this.typedic[this.type];this.rs=new c(0,0,F,S);this.ts=new c(0,0,F,S);if(this.lll1l1llll==l1l1l1l1l1.lllll1lll1NEAREST_NEIGHBOUR){}var J=F;var u=S;var q=F-1;var o=S-1;var m=this.rs.w;var k=this.ts.h;var g,f;var Y=0;var W=new Array(m);g=this.ts.x;f=this.ts.y;var P=new Array(2);for(var z=0;z<k;z++){for(var B=0;B<m;B++){this.lll111ll11(g+B,f+z,P,F,S);var V=parseInt(Math.floor(P[0]));var n=parseInt(Math.floor(P[1]));var l=P[0]-V;var j=P[1]-n;var U,v,H,X;if(V>=0&&V<q&&n>=0&&n<o){var R=J*n+V;U=L[R];v=L[R+1];H=L[R+J];X=L[R+J+1];}else{U=l1l1l1l1l1.lllll1lll1.ll1lllll11(L,V,n,J,u,this.edgeAction);v=l1l1l1l1l1.lllll1lll1.ll1lllll11(L,V+1,n,J,u,this.edgeAction);H=l1l1l1l1l1.lllll1lll1.ll1lllll11(L,V,n+1,J,u,this.edgeAction);X=l1l1l1l1l1.lllll1lll1.ll1lllll11(L,V+1,n+1,J,u,this.edgeAction);}W[B]=l111l11lll.ll1llll11l(l,j,U,v,H,X);}K=l111l11lll.ll1l1ll11l(0,z,this.ts.w,1,W,0,F,K,F,S);}l111l11lll.delll1l111l1(K,t.data);M.putImageData(t,0,0);},sqr:function(f){return f*f;},lll111ll11:function(n,l,h,z,u){var s,v;var g,q,p;var f=0;switch(this.typeAction){case 0:s=0;if(n>=this.centreX){if(l>this.centreY){s=Math.PI-Math.atan((n-this.centreX)/(l-this.centreY));f=Math.sqrt(this.sqr(n-this.centreX)+this.sqr(l-this.centreY));}else{if(l<this.centreY){s=Math.atan((n-this.centreX)/(this.centreY-l));f=Math.sqrt(this.sqr(n-this.centreX)+this.sqr(this.centreY-l));}else{s=Math.PI/2;f=n-this.centreX;}}}else{if(n<this.centreX){if(l<this.centreY){s=Math.PI*2-Math.atan(((this.centreX-n))/((this.centreY-l)));f=Math.sqrt(this.sqr(this.centreX-n)+this.sqr(this.centreY-l));}else{if(l>this.centreY){s=Math.PI+Math.atan(((this.centreX-n))/((l-this.centreY)));f=Math.sqrt(this.sqr(this.centreX-n)+this.sqr(l-this.centreY));}else{s=1.5*Math.PI;f=this.centreX-n;}}}}if(n!=this.centreX){g=Math.abs(((l-this.centreY))/((n-this.centreX)));}else{g=0;}if(g<=(u/z)){if(n==this.centreX){q=0;p=this.centreY;}else{q=this.centreX;p=g*q;}}else{p=this.centreY;q=p/g;}h[0]=(z-1)-(z-1)/(Math.PI*2)*s;h[1]=u*f/this.radius;break;case 1:s=n/z*Math.PI*2;var o;if(s>=1.5*Math.PI){o=Math.PI*2-s;}else{if(s>=Math.PI){o=s-Math.PI;}else{if(s>=0.5*Math.PI){o=Math.PI-s;}else{o=s;}}}v=Math.tan(o);if(v!=0){g=1/v;}else{g=0;}if(g<=(u/z)){if(o==0){q=0;p=this.centreY;}else{q=this.centreX;p=g*q;}}else{p=this.centreY;q=p/g;}f=this.radius*(l/u);var k=-f*Math.sin(o);var j=f*Math.cos(o);if(s>=1.5*Math.PI){h[0]=this.centreX-k;h[1]=this.centreY-j;}else{if(s>=Math.PI){h[0]=this.centreX-k;h[1]=this.centreY+j;}else{if(s>=0.5*Math.PI){h[0]=this.centreX+k;h[1]=this.centreY+j;}else{h[0]=this.centreX+k;h[1]=this.centreY-j;}}}break;}}},sphere:{radius:100,centreX:50,centreY:50,refra:1.5,edgeAction:1,a:0,b:0,a1:0,b2:0,fi:function(L,J,W){var I=J.width,T=J.height;var B=new Date().getTime();var u=J.getContext("2d");var f=u.getImageData(0,0,I,T);var t=l111l11lll.lll1l111l1(f.data);var o=new Array(t.length);for(var R in L){this[R]=L[R];}this.a=this.b=this.radius;this.centreX=this.centreX*I/100;this.centreY=this.centreY*T/100;if(this.a==0){this.a=I/2;}if(this.b==0){this.b=T/2;}this.a2=this.a*this.a;this.b2=this.b*this.b;this.edgeAction=l1l1l1l1l1.lllll1lll1.ll1l11l11l[this.edge];this.rs=new c(0,0,I,T);this.ts=new c(0,0,I,T);var m=I;var k=T;var j=I-1;var H=T-1;var F=this.rs.w;var v=this.ts.h;var q,n;var l=0;var V=new Array(F);q=this.ts.x;n=this.ts.y;var P=new Array(2);for(var z=0;z<v;z++){for(var G=0;G<F;G++){this.lll111ll11(q+G,n+z,P,I,T);var U=parseInt(Math.floor(P[0]));var S=parseInt(Math.floor(P[1]));var O=P[0]-U;var M=P[1]-S;var X,g,K,Y;if(U>=0&&U<j&&S>=0&&S<H){var R=m*S+U;X=t[R];g=t[R+1];K=t[R+m];Y=t[R+m+1];}else{X=l1l1l1l1l1.lllll1lll1.ll1lllll11(t,U,S,m,k,this.edgeAction);g=l1l1l1l1l1.lllll1lll1.ll1lllll11(t,U+1,S,m,k,this.edgeAction);K=l1l1l1l1l1.lllll1lll1.ll1lllll11(t,U,S+1,m,k,this.edgeAction);Y=l1l1l1l1l1.lllll1lll1.ll1lllll11(t,U+1,S+1,m,k,this.edgeAction);}V[G]=l111l11lll.ll1llll11l(O,M,X,g,K,Y);}o=l111l11lll.ll1l1ll11l(0,z,this.ts.w,1,V,0,I,o,I,T);}l111l11lll.delll1l111l1(o,f.data);u.putImageData(f,0,0);},lll111ll11:function(u,t,o,v,p){var F=u-this.centreX;var B=t-this.centreY;var f=F*F;var s=B*B;if(s>=this.b2-this.b2*f/this.a2){o[0]=u;o[1]=t;}else{var m=1/this.refra;var q=Math.sqrt((1-f/this.a2-s/this.b2)*(this.a*this.b));var n=q*q;var l=Math.acos(F/Math.sqrt(f+n));var k=Math.PI/2-l;var j=Math.asin(Math.sin(k)*m);j=Math.PI/2-l-j;o[0]=(u-Math.tan(j)*q);var g=Math.acos(B/Math.sqrt(s+n));k=Math.PI/2-g;j=Math.asin(Math.sin(k)*m);j=Math.PI/2-g-j;o[1]=(t-Math.tan(j)*q);}}},twirl:{radius:100,radius2:0,centreX:50,centreY:50,angle:720,edgeAction:1,fi:function(I,G,U){var F=G.width,S=G.height;var T=new Date().getTime();var R=G.getContext("2d");var q=R.getImageData(0,0,F,S);var M=l111l11lll.lll1l111l1(q.data);var L=new Array(M.length);for(var P in I){this[P]=I[P];}this.centreX=this.centreX*F/100;this.centreY=this.centreY*S/100;if(this.radius==0){this.radius=Math.min(this.centreX,this.centreY);}this.radius2=this.radius*this.radius;this.angle=(this.angle-720)*Math.PI/180;this.edgeAction=l1l1l1l1l1.lllll1lll1.ll1l11l11l[this.edge];this.rs=new c(0,0,F,S);this.ts=new c(0,0,F,S);if(this.lll1l1llll==l1l1l1l1l1.lllll1lll1NEAREST_NEIGHBOUR){}var K=F;var J=S;var u=F-1;var t=S-1;var o=this.rs.w;var m=this.ts.h;var k,j;var g=0;var f=new Array(o);k=this.ts.x;j=this.ts.y;var O=new Array(2);for(var z=0;z<m;z++){for(var B=0;B<o;B++){this.lll111ll11(k+B,j+z,O,F,S);var Y=parseInt(Math.floor(O[0]));var W=parseInt(Math.floor(O[1]));var n=O[0]-Y;var l=O[1]-W;var V,v,H,X;if(Y>=0&&Y<u&&W>=0&&W<t){var P=K*W+Y;V=M[P];v=M[P+1];H=M[P+K];X=M[P+K+1];}else{V=l1l1l1l1l1.lllll1lll1.ll1lllll11(M,Y,W,K,J,this.edgeAction);v=l1l1l1l1l1.lllll1lll1.ll1lllll11(M,Y+1,W,K,J,this.edgeAction);H=l1l1l1l1l1.lllll1lll1.ll1lllll11(M,Y,W+1,K,J,this.edgeAction);X=l1l1l1l1l1.lllll1lll1.ll1lllll11(M,Y+1,W+1,K,J,this.edgeAction);}f[B]=l111l11lll.ll1llll11l(n,l,V,v,H,X);}L=l111l11lll.ll1l1ll11l(0,z,this.ts.w,1,f,0,F,L,F,S);}l111l11lll.delll1l111l1(L,q.data);R.putImageData(q,0,0);},lll111ll11:function(l,j,f,m,g){var p=l-this.centreX;var n=j-this.centreY;var o=p*p+n*n;if(o>this.radius2){f[0]=l;f[1]=j;}else{o=Math.sqrt(o);var k=Math.atan2(n,p)+this.angle*(this.radius-o)/this.radius;f[0]=this.centreX+o*Math.cos(k);f[1]=this.centreY+o*Math.sin(k);}}}};l1l1ll11l1={B:256,BM:255,N:4096,p:new Array(512+2),g3:new Array(512+2),g2:new Array(512+2),g1:new Array(512+2),s:true,ll11llll11:function(o,n){var g,f,m,l,F,O,z,L;var P,M,k,h,I,G,S,R,B,s,p;var K,J;var H=[];if(this.s){this.s=false;this.l11ll11l11();}B=o+this.N;g=parseInt(B)&this.BM;f=(g+1)&this.BM;P=B-parseInt(B);M=P-1;B=n+this.N;m=parseInt(B)&this.BM;l=(m+1)&this.BM;k=B-parseInt(B);h=k-1;K=this.p[g];J=this.p[f];F=this.p[K+m];O=this.p[J+m];z=this.p[K+l];L=this.p[J+l];I=this.lll11llll1(P);G=this.lll11llll1(k);H=this.g2[F];s=P*H[0]+k*H[1];H=this.g2[O];p=M*H[0]+k*H[1];S=this.l11l1lll11(I,s,p);H=this.g2[z];s=P*H[0]+h*H[1];H=this.g2[L];p=M*H[0]+h*H[1];R=this.l11l1lll11(I,s,p);return 1.5*this.l11l1lll11(G,S,R);},l11ll11l11:function(){var h,g,f;for(h=0;h<512+2;h++){this.g3[h]=new Array(3);this.g2[h]=new Array(2);}for(h=0;h<this.B;h++){this.p[h]=h;this.g1[h]=(Math.random()-0.5)*2;for(g=0;g<2;g++){this.g2[h][g]=(Math.random()-0.5)*2;}this.l11l1l1lll2(this.g2[h]);for(g=0;g<3;g++){this.g3[h][g]=(Math.random()-0.5)*2;}this.l11l1l1lll3(this.g3[h]);}for(h=this.B-1;h>=0;h--){f=this.p[h];this.p[h]=this.p[g=parseInt(Math.random()*this.B)];this.p[g]=f;}for(h=0;h<this.B+2;h++){this.p[this.B+h]=this.p[h];this.g1[this.B+h]=this.g1[h];for(g=0;g<2;g++){this.g2[this.B+h][g]=this.g2[h][g];}for(g=0;g<3;g++){this.g3[this.B+h][g]=this.g3[h][g];}}},l11l1l1lll2:function(f){var g=Math.sqrt(f[0]*f[0]+f[1]*f[1]);f[0]/=g;f[1]/=g;},l11l1l1lll3:function(f){var g=Math.sqrt(f[0]*f[0]+f[1]*f[1]+f[2]*f[2]);f[0]/=g;f[1]/=g;f[2]/=g;},lll11llll1:function(f){return f*f*(3-2*f);},l11l1lll11:function(h,g,f){return g+h*(f-g);}};l111l11lll={lll1l111l1:function(h){var f=new Array((h.length)/4);for(var g=0;g<f.length;g++){f[g]=h[g*4]<<16|h[g*4+1]<<8|h[g*4+2]|h[g*4+3]<<24;}return f;},delll1l111l1:function(h,g){for(var f=0,j=h.length;f<j;f++){g[f*4]=h[f]>>16&255;g[f*4+1]=h[f]>>8&255;g[f*4+2]=h[f]&255;g[f*4+3]=h[f]>>24&255;}},l1l11ll1l1:function(u,s,t,j,q,o,m,l,g,v){var k=o;var f=0;for(var n=s;n<s+j;n++,k+=m){f=k;for(var p=u;p<u+t;p++){q[f++]=l[p+g*n];}}return q;},ll1l1ll11l:function(n,m,u,k,l,j,s,p,g,v){var o=j,f=0;for(var q=m;q<m+k;q++,o+=s){f=o;for(var t=n;t<n+u;t++){p[t+g*q]=l[f++];}}return p;},lll11l111l:function(g,f){return g/((1/f-2)*(1-g)+1);},l11111l1ll:function(g,f){var h=(1/f-2)*(1-2*g);if(g<0.5){return g/(h+1);}return(h-g)/(h-1);},l11lllllll:function(g,f){return f<g?0:1;},lll111l11l:function(h,g,f){return(f<h)||(f>g)?0:1;},ll1ll11l1l:function(h,g,k,j,f){if((f<h)||(f>=j)){return 0;}if(f>=g){if(f<k){return 1;}f=(f-k)/(j-k);return 1-f*f*(3-2*f);}f=(f-h)/(g-h);return f*f*(3-2*f);},lllllll11l:function(h,g,f){if(f<h){return 0;}if(f>=g){return 1;}f=(f-h)/(g-h);return f*f*(3-2*f);},l1ll111ll1:function(f){f=1-f;return Math.sqrt(1-f*f);},llll11ll11:function(f){return 1-Math.sqrt(1-f*f);},l11l1llll1:function(g,h,f){return g>f?f:g<h?h:g;},llll1lll1l:function(g,f){var h=parseInt(g/f);g-=h*f;if(g<0){return g+f;}return g;},l11l1lll11:function(h,g,f){return g+h*(f-g);},l11l1lll11Int:function(h,g,f){return parseInt(g+h*(f-g));},l11ll1111l:function(f){var g=l111l11lll.llll1lll1l(f,1);return 2*(g<0.5?g:1-g);},llllllllll:function(p,m,l){var h=m>>24&255;var k=m>>16&255;var f=m>>8&255;var o=m&255;var g=l>>24&255;var j=l>>16&255;var q=l>>8&255;var n=l&255;h=l111l11lll.l11l1lll11Int(p,h,g);k=l111l11lll.l11l1lll11Int(p,k,j);f=l111l11lll.l11l1lll11Int(p,f,q);o=l111l11lll.l11l1lll11Int(p,o,n);return h<<24|k<<16|f<<8|o;},l1ll1lllll:function(j,o,q){q+=o;for(var k=o;k<q;k++){var l=j[k];var t=l>>24&255;var h=l>>16&255;var m=l>>8&255;var s=l&255;var n=t/255;h=parseInt(h*n);m=parseInt(m*n);s=parseInt(s*n);j[k]=(t<<24|h<<16|m<<8|s);}},unl1ll1lllll:function(j,m,q){q+=m;for(var k=m;k<q;k++){var l=j[k];var t=l>>24&255;var h=l>>16&255;var n=l>>8&255;var s=l&255;if(t!=0&&t!=255){var o=255/t;h=parseInt(h*o);n=parseInt(n*o);s=parseInt(s*o);if(h>255){h=255;}if(n>255){n=255;}if(s>255){s=255;}j[k]=(t<<24|h<<16|n<<8|s);}}},l1lllll111:function(f,n,q){var o,m,l;var s=(f>n)?f:n;if(q>s){s=q;}var p=(f<n)?f:n;if(q<p){p=q;}l=s/255;if(s!=0){m=(s-p)/s;}else{m=0;}if(m==0){o=0;}else{var h=(s-f)/(s-p);var k=(s-n)/(s-p);var j=(s-q)/(s-p);if(f==s){o=j-k;}else{if(n==s){o=2+h-j;}else{o=4+k-h;}}o=o/6;if(o<0){o=o+1;}}return[o,m,l];},l111ll11ll:function(u,n,m){var j=0,s=0,z=0;if(n==0){j=s=z=Math.round(m*255+0.5);}else{var o=(u-Math.floor(u))*6;var v=o-Math.floor(o);var l=m*(1-n);var k=m*(1-n*v);var B=m*(1-(n*(1-v)));switch(parseInt(o)){case 0:j=parseInt(m*255+0.5);s=parseInt(B*255+0.5);z=parseInt(l*255+0.5);break;case 1:j=parseInt(k*255+0.5);s=parseInt(m*255+0.5);z=parseInt(l*255+0.5);break;case 2:j=parseInt(l*255+0.5);s=parseInt(m*255+0.5);z=parseInt(B*255+0.5);break;case 3:j=parseInt(l*255+0.5);s=parseInt(k*255+0.5);z=parseInt(m*255+0.5);break;case 4:j=parseInt(B*255+0.5);s=parseInt(l*255+0.5);z=parseInt(m*255+0.5);break;case 5:j=parseInt(m*255+0.5);s=parseInt(l*255+0.5);z=parseInt(k*255+0.5);break;}}return 4278190080|(j<<16)|(s<<8)|(z<<0);},lllllll1l1:function(){var h,g,f,j;do{h=2*Math.random()-1;g=2*Math.random()-1;f=h*h+g*g;}while(f>=1||f==0);var k=Math.sqrt(-2*Math.log(f)/f);return h*k;},ll1llll11l:function(u,t,K,p,z,T){var U=K>>24&255;var H=K>>16&255;var h=K>>8&255;var s=K&255;var R=p>>24&255;var G=p>>16&255;var f=p>>8&255;var q=p&255;var O=z>>24&255;var F=z>>16&255;var S=z>>8&255;var o=z&255;var M=T>>24&255;var B=T>>16&255;var P=T>>8&255;var n=T&255;var m=1-u;var l=1-t;var k=m*U+u*R;var j=m*O+u*M;var L=parseInt(l*k+t*j);k=m*H+u*G;j=m*F+u*B;var v=parseInt(l*k+t*j);k=m*h+u*f;j=m*S+u*P;var I=parseInt(l*k+t*j);k=m*s+u*q;j=m*o+u*n;var J=parseInt(l*k+t*j);return L<<24|v<<16|I<<8|J;}};lllll111l1={l111l1ll11:0,l111111l11:1,ll1l111l11:2,lll1l111ll:3,l1l1l11l1l:4,lll1l1l1l1:5,ll1lll11l1:6,l111lllll1:7,l1l111lll1:8,lll1l11111:9,l1l1ll1111:10,ll1l1lll1l:11,ll1111l1l1:12,lll1111111:13,lll111lll1:14,lll1lll1l1:15,ll1ll11l11:16,l1ll11llll:17,l1llll1lll:18,lll11ll1ll:19,lll11ll1llll1111111l:20,"disass":function(l){var h=l>>24&255;var k=l>>16&255;var j=l>>8&255;var f=l&255;return[h,k,j,f];},"ass":function(h,k,j,f){return(h<<24|k<<16|j<<8|f);},"assArray":function(f){return(f[0]<<24|f[1]<<16|f[2]<<8|f[3]);},l1111l1111:function(f){if(f<0){return 0;}else{if(f>255){return 255;}else{return f;}}},l1lll1lll1:function(j,h,g){return lllll111l1.l1111l1111(parseInt(j+g*(h-j)));},l111l1l1ll:function(g){var f=lllll111l1.disass(g);return parseInt((f[1]+f[2]+f[3])/3);},lllll1ll11:function(h,g,f){var k=lllll111l1.disass(h);var j=lllll111l1.disass(g);return(Math.abs(k[1]-j[1])<=f)&&(Math.abs(k[2]-j[2])<=f)&&(Math.abs(k[3]-j[3])<=f);},ll1ll1l1l1:function(q,p,u,o){if(u==0){return q;}if(u==lllll111l1.l111l1ll11){return q;}var j=(q>>24)&255;var l=(q>>16)&255;var g=(q>>8)&255;var z=q&255;var h=(p>>24)&255;var k=(p>>16)&255;var F=(p>>8)&255;var v=p&255;switch(u){case lllll111l1.l111111l11:break;case lllll111l1.ll1l111l11:l=Math.min(l,k);g=Math.min(g,F);z=Math.min(z,v);break;case lllll111l1.lll1l111ll:l=Math.max(l,k);g=Math.max(g,F);z=Math.max(z,v);break;case lllll111l1.l1l1l11l1l:l=lllll111l1.l1111l1111(l+k);g=lllll111l1.l1111l1111(g+F);z=lllll111l1.l1111l1111(z+v);break;case lllll111l1.lll1l1l1l1:l=lllll111l1.l1111l1111(k-l);g=lllll111l1.l1111l1111(F-g);z=lllll111l1.l1111l1111(v-z);break;case lllll111l1.ll1lll11l1:l=lllll111l1.l1111l1111(Math.abs(l-k));g=lllll111l1.l1111l1111(Math.abs(g-F));z=lllll111l1.l1111l1111(Math.abs(z-v));break;case lllll111l1.l111lllll1:l=lllll111l1.l1111l1111(l*k/255);g=lllll111l1.l1111l1111(g*F/255);z=lllll111l1.l1111l1111(z*v/255);break;case lllll111l1.l1ll11llll:console.info("this clause is NOT finish");break;case lllll111l1.lll1111111:l=parseInt((l+k)/2);g=parseInt((g+F)/2);z=parseInt((z+v)/2);break;case lllll111l1.l1l111lll1:case lllll111l1.lll1l11111:case lllll111l1.l1l1ll1111:case lllll111l1.ll1l1lll1l:console.info("this clause is NOT finish");l111l11lll.l1lllll111(l,g,z,hsb1);l111l11lll.l1lllll111(k,F,v,hsb2);switch(u){case l1l111lll1:hsb2[0]=hsb1[0];break;case lll1l11111:hsb2[1]=hsb1[1];break;case l1l1ll1111:hsb2[2]=hsb1[2];break;case ll1l1lll1l:hsb2[0]=hsb1[0];hsb2[1]=hsb1[1];break;}q=l111l11lll.l111ll11ll(hsb2[0],hsb2[1],hsb2[2]);l=(l11ll1lll11>>16)&255;g=(l11ll1lll11>>8)&255;z=l11ll1lll11&255;break;case lllll111l1.ll1111l1l1:l=255-((255-l)*(255-k))/255;g=255-((255-g)*(255-F))/255;z=255-((255-z)*(255-v))/255;break;case lllll111l1.lll111lll1:var n,B;B=255-((255-l)*(255-k))/255;n=l*k/255;l=(B*l+n*(255-l))/255;B=255-((255-g)*(255-F))/255;n=g*F/255;g=(B*g+n*(255-g))/255;B=255-((255-z)*(255-v))/255;n=z*v/255;z=(B*z+n*(255-z))/255;break;case lllll111l1.lll1lll1l1:l=g=z=255;break;case lllll111l1.l1llll1lll:l=lllll111l1.l1111l1111((k*j)/255);g=lllll111l1.l1111l1111((F*j)/255);z=lllll111l1.l1111l1111((v*j)/255);j=lllll111l1.l1111l1111((h*j)/255);return(j<<24)|(l<<16)|(g<<8)|z;case lllll111l1.lll11ll1ll:j=j*h/255;return(j<<24)|(k<<16)|(F<<8)|v;case lllll111l1.lll11ll1llll1111111l:var t=255-j;return(j<<24)|(t<<16)|(t<<8)|t;}if(o!=255||j!=255){j=j*o/255;var f=(255-j)*h/255;l=lllll111l1.l1111l1111((l*j+k*f)/255);g=lllll111l1.l1111l1111((g*j+F*f)/255);z=lllll111l1.l1111l1111((z*j+v*f)/255);j=lllll111l1.l1111l1111(j+f);}return(j<<24)|(l<<16)|(g<<8)|z;}};l11111lll1={init:function(g){this.w1=new Array(g);this.w2=new Array(g);this.w3=new Array(g);var j=1;for(var f=0;f<g;f++){j=j<<1;var h=-2*Math.PI/j;l11111lll1["w1"][f]=Math.sin(0.5*h);l11111lll1["w2"][f]=-2*l11111lll1["w1"][f]*l11111lll1["w1"][f];l11111lll1["w3"][f]=Math.sin(h);}},lll1lllll1:function(s,g,p,F,l){var k=new Date().getTime();var j=this.log2(p);var h=this.log2(F);var m=Math.max(F,p);var f=new Array(m);var B=new Array(m);for(var o=0;o<F;o++){var z=o*p;f=s.slice(z,z+p);B=g.slice(z,z+p);this.lll111ll1l(f,B,j,p,l);var u=[],t=[];s=u.concat(s.slice(0,z),f,s.slice(z+p));g=t.concat(g.slice(0,z),B,g.slice(z+p));}for(var q=0;q<p;q++){var v=q;for(var o=0;o<F;o++){f[o]=s[v];B[o]=g[v];v+=p;}this.lll111ll1l(f,B,h,F,l);v=q;for(var o=0;o<F;o++){s[v]=f[o];g[v]=B[o];v+=p;}}return[s,g];},log2:function(h){var f=1;var g=0;while(f<h){f<<=1;g++;}return f==h?g:-1;},lll111ll1l:function(m,l,j,k,h,g,f){if(!g){g=0;f=0;}this.l111111ll1(k,m,l,g,f);this.l1l1l11lll(k,j,h?1:-1,m,l,g,f);},l111111ll1:function(h,q,g,f,p){var l=0;for(var o=0;o<h;o++){if(o>l){var s=q[l+f];q[l+f]=q[o+f];q[o+f]=s;s=g[l+f];g[l+f]=g[o+f];g[o+f]=s;}var k=h>>1;while((l>=k)&&(k>=2)){l-=k;k>>=1;}l+=k;}},l1l1l11lll:function(v,M,p,t,I,o,J){var q=1;for(var B=0;B<M;B++){var O,z,m,l,g,L,h;var K=q;q<<=1;h=p*this.w1[B];m=l11111lll1["w2"][B];l=p*l11111lll1["w3"][B];O=1;z=0;for(var H=0;H<K;H++){for(var G=H;G<v;G+=q){var F=G+K;var u=t[F+o];var s=I[F+o];g=(O*u)-(z*s);L=(z*u)+(O*s);t[F+o]=t[G+o]-g;t[G+o]=t[G+o]+g;I[F+o]=I[G+o]-L;I[G+o]=I[G+o]+L;}h=O;O=h*m-z*l+O;z=z*m+h*l+z;}}if(p==-1){var f=1/v;for(var G=0;G<v;G++){t[G]=f*t[G+o];I[G]=f*I[G+o];}}}};}();